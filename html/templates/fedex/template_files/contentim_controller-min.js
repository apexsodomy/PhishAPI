var fdx_controllerVersion=fdx_controllerVersion||1429342486;var fdx_debug=fdx_debug||function(message,prefix,location){prefix=(typeof prefix!=="undefined")?"["+prefix+"] ":"";location=(typeof location!=="undefined")?"["+location+"] ":"";if(window.fdx_config&&fdx_config.debug&&fdx_config.debug.enabled===true){if(window.console&&console.log){console.log(prefix+location+message)}else{if(window.opera&&opera.postError){opera.postError(prefix+location+message)}}try{if(fdx_config.debug.track&&fdx_config.debug.track===true){var dCookie=(typeof fdx_getCookie("fdx_debug")!=="undefined")?fdx_getCookie("fdx_debug").split(","):[];var levels={wwwsbox:"L1S",wwwbase:"L1",wwwdev:"L2",wwwdrt:"L3",wwwstress:"L4",wwwbit:"L5",wwwtest:"L6",www:"P"};var l=levels[document.location.hostname.split(".")[0]];var level=(typeof l!=="undefined")?l:document.location.hostname.split(".")[0];var timestamp=new Date().getTime();var page=(typeof s!=="undefined"&&s.pageName)?s.pageName:document.location.href;var data=timestamp+"|"+prefix+location+message+"|"+level+"|"+page;dCookie.push(data.replace(/,/g,"##"));fdx_setCookie("fdx_debug",dCookie,1,"/",".fedex.com")}}catch(e){}}};var fdx_getProtocol=fdx_getProtocol||function(){try{var proto=window.location.protocol;if(proto.toLowerCase().indexOf("https")>-1){return"https"}return"http"}catch(e){fdx_debug(e,"CIM","fdx_getProtocol")}};var fdx_getCookie=fdx_getCookie||function(Name){try{var cookieVals={};var dCookie=document.cookie;var keyVals=dCookie.split("; ");var keyVal;for(var i=0;i<keyVals.length;i++){keyVal=keyVals[i].split("=");cookieVals[keyVal[0]]=unescape(keyVal[1])}return cookieVals[Name]}catch(e){fdx_debug(e,"CIM","fdx_getCookie")}};var fdx_setCookie=fdx_setCookie||function(cookie_name,value,exdays,path,domain){try{if(value!==null){var c_value=escape(value);if(exdays!==""){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);c_value+=((exdays===null)?"":"; expires="+exdate.toUTCString())}c_value+=(typeof path!=="undefined"&&path!==null)?"; path="+path:"";c_value+=(typeof domain!=="undefined"&&domain!==null)?"; domain="+domain:"";document.cookie=cookie_name+"="+c_value}}catch(e){fdx_debug(e,"CIM","fdx_setCookie")}};var fdx_getUrlParam=fdx_getUrlParam||function(name){try{name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.href);return(results==null)?"":results[1]}catch(e){fdx_debug(e,"CIM","fdx_getUrlParam")}};var fdx_loadScript=fdx_loadScript||function(id,url,callback,attributes,sync){try{var oScript=document.createElement("script");oScript.language="javascript";oScript.type="text/javascript";oScript.charset="utf-8";if(typeof sync==="undefined"||sync!==true){oScript.async="true"}oScript.id=id;oScript.src=url;if(typeof callback!=="undefined"&&callback!==null&&typeof callback==="function"){oScript.onloadDone=false;oScript.onload=function(){if(!oScript.onloadDone){oScript.onloadDone=true;callback()}};oScript.onreadystatechange=function(){if(("loaded"===oScript.readyState||"complete"===oScript.readyState)&&!oScript.onloadDone){oScript.onloadDone=true;callback()}}}if(typeof attributes!=="undefined"&&attributes!==null&&typeof attributes==="object"){try{for(var attr in attributes){if(attributes.hasOwnProperty(attr)){oScript.setAttribute(attr,attributes[attr])}}}catch(e){fdx_debug(e)}}var oHead=document.getElementsByTagName("HEAD").item(0);oHead.appendChild(oScript)}catch(e){fdx_debug(e,"CIM","fdx_loadScript")}};var loadScript=loadScript||fdx_loadScript;var fdx_createCustomEvent=fdx_createCustomEvent||function(eventName){try{var customEvent;if(document.createEvent){customEvent=document.createEvent("Event");customEvent.initEvent(eventName,false,false)}else{customEvent=eventName}return customEvent}catch(e){fdx_debug(e,"CIM","fdx_createCustomEvent")}};var fdx_dispatchCustomEvent=fdx_dispatchCustomEvent||function(eventName){try{if(document.createEvent){document.dispatchEvent(eventName)}else{if(typeof document.documentElement[eventName]!=="undefined"){document.documentElement[eventName]++}else{document.documentElement[eventName]=0}}}catch(e){fdx_debug(e,"CIM","fdx_dispatchCustomEvent")}};var fdx_fireCustomEvent=fdx_fireCustomEvent||function(eventName){try{var myEvent=fdx_createCustomEvent(eventName);fdx_dispatchCustomEvent(myEvent)}catch(e){fdx_debug(e,"CIM","fdx_fireCustomEvent")}};var fdx_eventHandler=fdx_eventHandler||(function(){var listeners={},eventID=1;return{addListener:function(eventName,callback,element,capture){try{if(document.addEventListener){var handler=function(){callback(element)};element.addEventListener(eventName,handler,capture);listeners[eventID]={eventName:eventName,handler:handler,element:element,capture:capture};return eventID++}else{if(document.attachEvent){if(eventName.match(/click|dblclick|mousedown|mousemove|mouseup|mouseover|mouseout|keydown|keypress|keyup|submit|unload/g)){var handler=function(){callback(element)};element.attachEvent("on"+eventName,handler);listeners[eventID]={eventName:eventName,handler:handler,element:element,capture:capture}}else{var handler=function(event){if(event.propertyName==eventName){callback()}};element=document.documentElement;element.attachEvent("onpropertychange",handler);listeners[eventID]={eventName:"onpropertychange",handler:handler,element:element,capture:capture}}return eventID++}}}catch(e){fdx_debug(e,"CIM","fdx_eventHandler:addEventListener")}},removeListener:function(eventID){try{if(eventID in listeners){var h=listeners[eventID];if(document.removeEventListener){h.element.removeEventListener(h.eventName,h.handler,h.capture)}else{if(document.detachEvent){h.element.detachEvent(h.eventName,h.handler)}}delete listeners[eventID]}}catch(e){fdx_debug(e,"CIM","fdx_eventHandler:removeEventListener")}}}}());var fdx_subscribeToCustomEvent=fdx_subscribeToCustomEvent||function(eventName,callback,element,capture){try{element=element||document;capture=capture||false;return fdx_eventHandler.addListener(eventName,callback,element,capture)}catch(e){fdx_debug(e,"CIM","fdx_subscribeToCustomEvent")}};var fdx_unsubscribeToCustomEvent=fdx_unsubscribeToCustomEvent||function(eventID){try{fdx_eventHandler.removeListener(eventID)}catch(e){fdx_debug(e,"CIM","fdx_unsubscribeToCustomEvent")}};var fdx_isLive=fdx_isLive||function(start,stop){try{var currentTime=(new Date).getTime();if(start!==null){var startTime=start.getTime();if(currentTime<startTime){return false}}if(stop!==null){var stopTime=stop.getTime();if(currentTime>stopTime){return false}}}catch(e){fdx_debug(e,"CIM","fdx_isLive");return false}return true};var fdx_getRegLangInfo=fdx_getRegLangInfo||function(){var reg_lang=["us","en","en","us","english"];try{var lang_mapping=window.fdx_config.languages||[];var lang_two=fdx_locale.split("_")[0];var countryCode=fdx_locale.split("_")[1].toLowerCase();reg_lang[0]=countryCode;reg_lang[1]=lang_two;reg_lang[2]=lang_two;if(fdx_config.regions.us.indexOf(countryCode)>-1){reg_lang[3]="us"}else{if(fdx_config.regions.CA.indexOf(countryCode)>-1){reg_lang[3]="CA"}else{if(fdx_config.regions.LAC.indexOf(countryCode)>-1){reg_lang[3]="LAC"}else{if(fdx_config.regions.EMEA.indexOf(countryCode)>-1){reg_lang[3]="EMEA"}else{if(fdx_config.regions.APAC.indexOf(countryCode)>-1){reg_lang[3]="APAC"}}}}}if(fdx_locale=="zh_CN"){reg_lang[4]="chinese_sim";reg_lang[2]="zhs"}else{if(fdx_locale=="zh_HK"){reg_lang[4]="chinese_trad";reg_lang[2]="zht"}else{if(fdx_locale=="zh_TW"){reg_lang[4]="chinese_trad_tw";reg_lang[2]="zht"}else{if(lang_mapping[lang_two]){reg_lang[4]=lang_mapping[lang_two]}}}}}catch(e){fdx_debug(e,"CIM","fdx_getRegLangInfo");return reg_lang}return reg_lang};var fdx_parseRegLangInfo=fdx_parseRegLangInfo||function(myString){try{var reg_lang=fdx_getRegLangInfo();var country_code=reg_lang[0];var lang_two=reg_lang[1];var lang_three=reg_lang[2];var region=reg_lang[3];var language=reg_lang[4];return myString.replace(/\$cc\$/g,country_code).replace(/\$lang_two\$/g,lang_two).replace(/\$lang_three\$/g,lang_three).replace("$region$",region).replace("$language$",language)}catch(e){fdx_debug(e,"CIM","fdx_getRegLangInfo");return myString}};var fdx_wireUpFunction=fdx_wireUpFunction||function(myFunction,eventName,params,context){try{context=context||window;if(typeof context[myFunction]!=="undefined"&&typeof context[myFunction]==="function"){context[myFunction].apply(this,params)}else{fdx_subscribeToCustomEvent(eventName,function(){try{context[myFunction].apply(this,params)}catch(e){fdx_debug(e,"CIM","fdx_wireUpFunction:subscribed")}})}}catch(e){fdx_debug(e,"CIM","fdx_wireUpFunction")}};var scIS=scIS||function(IS){fdx_wireUpFunction("fdx_scIS","SCInitialized",arguments)};var logLinkView=logLinkView||function(CLck,evnt,userid,a){fdx_wireUpFunction("fdx_logLinkView","SCInitialized",arguments)};var setLinkView=setLinkView||function(CLck){fdx_wireUpFunction("fdx_setLinkView","SCInitialized",arguments)};var logPageView=logPageView||function(mlctitle,evnt,login,uuid,tracknum){fdx_wireUpFunction("fdx_logPageView","SCInitialized",arguments)};var logPurchase=logPurchase||function(labelObj,callback){fdx_wireUpFunction("fdx_logPurchase","SCInitialized",arguments)};var logUpload=logUpload||function(labelObj,callback){fdx_wireUpFunction("fdx_logUpload","SCInitialized",arguments)};var scCL=scCL||function(CLck,evnt){fdx_wireUpFunction("fdx_scCL","SCInitialized",arguments)};var scDsp=scDsp||function(cmPgn){fdx_wireUpFunction("fdx_scDsp","SCInitialized",arguments)};var IM=IM||{appRootPath:fdx_getProtocol()+"://www.fedex.com/templates/components/apps/contentim",setIM_Props:function(obj,objName){fdx_wireUpFunction("fdx_setIM_Props","IMInitialized",arguments,IM)},makeSureJQuery:function(callback,checkSteal){fdx_wireUpFunction("fdx_makeSureJQuery","IMInitialized",arguments,IM)},loadIMScript:function(type,tag){fdx_wireUpFunction("fdx_loadIMScript","IMInitialized",arguments,IM)},processCurrentPage:function(internal){fdx_wireUpFunction("fdx_processCurrentPage","IMInitialized",arguments,IM)},log:function(tag,view){fdx_wireUpFunction("fdx_log","IMInitialized",arguments,IM)},setflashIsReady:function(value){fdx_wireUpFunction("fdx_setflashIsReady","IMInitialized",arguments,IM)},getIsContainerReady:function(){fdx_wireUpFunction("fdx_getIsContainerReady","IMInitialized",arguments,IM)},setIsContainerReady:function(){fdx_wireUpFunction("fdx_setIsContainerReady","IMInitialized",arguments,IM)},getcookie:fdx_getCookie,setCookie:fdx_setCookie,getUrlParam:fdx_getUrlParam,rotateCreatives:function(){fdx_wireUpFunction("fdx_rotateCreatives","IMInitialized",arguments,IM)},im_build_dfa:function(source,hasOwnOrderId){fdx_wireUpFunction("fdx_im_build_dfa","IMInitialized",arguments,IM)},extend:function(dest,src){try{var target,copy;for(var prop in src){target=dest[prop];copy=src[prop];if(target===copy){continue}else{dest[prop]=copy}}return dest}catch(e){fdx_debug(e,"IM","extend")}},init:function(){try{if(window.IM&&!IM.core){fdx_debug(e,"IM","init:IM.core-undefined")}var typeBefore="";var sizeBefore="";try{typeBefore=typeof IM;if(!Object.keys){Object.keys=function(obj){var keys=[];for(var i in obj){if(obj.hasOwnProperty(i)){keys.push(i)}}return keys}}sizeBefore=Object.keys(IM).length}catch(e){fdx_debug("TYPE:"+typeBefore+"; SIZE:"+sizeBefore+"; "+e,"IM","init:sizeBefore")}try{IM.extend(IM,IM.core)}catch(e){fdx_debug(e,"IM","init:IMExtendObject")}try{IM.initVars()}catch(e){var sizeAfter="";try{sizeAfter=Object.keys(IM).length}catch(e){fdx_debug(e,"IM","init:sizeAfter")}fdx_debug("SB="+sizeBefore+";SA="+sizeAfter+";"+e,"IM","init:IMinitVars")}try{fdx_fireCustomEvent("IMInitialized");IM.processCurrentPage(true)}catch(e){fdx_debug(e,"IM","init:IMProcessCurrentPage")}}catch(e){fdx_debug(e,"IM","init")}},initManifest:function(){window.imManifestInitialized=true;fdx_fireCustomEvent("IMManifestInitialized")}};var fdx_initContentIM=fdx_initContentIM||function(obj){window.fdx_config=obj;window.fdx_cbid=fdx_getCookie("fdx_cbid")||"";window.fdx_locale=fdx_getCookie("fdx_locale")||"en_US";window.fdx_locale_data=fdx_getCookie("fdx_locale_data")||"";try{window.fx_device_type=(window.fx_device_type)?fx_device_type:null}catch(e){window.fx_device_type=null;fdx_debug(e,"CIM","fdx_initContentIM:fx_device_type")}try{window.fdx_snap_point=(window.fx_responsivedata)?fx_responsivedata.split(":")[0]:null}catch(e){window.fdx_snap_point=null;fdx_debug(e,"CIM","fdx_initContentIM:fdx_snap_point")}try{window.fdx_is_disabled=(fdx_config.fdx_is_disabled)?fdx_config.fdx_is_disabled:false;for(var i=0;i<obj.isLive.length;i++){var id=(obj.isLive[i].id)?obj.isLive[i].id:null;var flag=(obj.isLive[i].disabledflag)?obj.isLive[i].disabledflag:null;var devices=(obj.isLive[i].disableddevices)?obj.isLive[i].disableddevices:null;var snaps=(obj.isLive[i].disabledsnappoints)?obj.isLive[i].disabledsnappoints:null;var start=(obj.isLive[i].starttime&&obj.isLive[i].starttime!==null)?(new Date(fdx_config.isLive[i].starttime)):null;var stop=(obj.isLive[i].stoptime&&obj.isLive[i].stoptime!==null)?(new Date(obj.isLive[i].stoptime)):null;if(id!==null&&flag!==null){window[flag]=!fdx_isLive(start,stop);if(fx_device_type!==null&&devices!==null){try{var deviceTypes=devices.split(",");for(var deviceType in deviceTypes){if(deviceTypes[deviceType]===fx_device_type){window[flag]=true;break}}}catch(e){fdx_debug(e,"CIM","fdx_initContentIM:isLive:devices")}}if(fdx_snap_point!==null&&snaps!==null){try{var snapPoints=snaps.split(",");for(var snapPoint in snapPoints){if(snapPoints[snapPoint]===fdx_snap_point){window[flag]=true;break}}}catch(e){fdx_debug(e,"CIM","fdx_initContentIM:isLive:snaps")}}}}}catch(e){fdx_debug(e,"CIM","fdx_initContentIM:isLive")}try{for(var i=0;i<obj.includes.length;i++){var id=(obj.includes[i].id)?obj.includes[i].id:null;var path=(obj.includes[i].path)?fdx_parseRegLangInfo(obj.includes[i].path):null;var controller=(obj.includes[i].controller)?obj.includes[i].controller:null;var flag=(obj.includes[i].disabledflag)?obj.includes[i].disabledflag:null;var callback=(obj.includes[i].callback)?obj.includes[i].callback:null;var attributes=(obj.includes[i].attributes)?obj.includes[i].attributes:null;var sync=(obj.includes[i].sync)?obj.includes[i].sync:null;var domains=(obj.includes[i].domains)?obj.includes[i].domains:null;if(id!==null&&path!==null&&(controller==null||controller==fdx_controllerVersion)){if(flag!==null){if(window[flag]===true){continue}}var isListed;if(domains!==null){try{var domainList=domains.split(",");isListed=false;for(var domain in domainList){if(window.location.hostname.indexOf(domainList[domain])>-1){isListed=true}}if(!isListed){continue}}catch(e){fdx_debug(e,"CIM","fdx_initContentIM:includes:domains")}}path=(fdx_min_off)?path.replace("-min.js",".js"):path;fdx_loadScript(id,fdx_getProtocol()+"://www.fedex.com"+path,callback,attributes,sync)}}}catch(e){fdx_debug(e,"CIM","fdx_initContentIM:includes")}};var fdx_loadContentIM=fdx_loadContentIM||function fdx_loadContentIM(){try{if(window.fdx_suppressController){window.fdx_suppressController=false;return}if(!window.fdx_config){window.fdx_config={};window.fdx_min_off=(fdx_getUrlParam("min")==="off")||(fdx_getCookie("contentim-min")==="off");var refreshUri="";var pUri="";try{pUri=document.location.pathname.split("/");refreshUri="&refresh_uri=%2F"+pUri[1]+"%2F"}catch(e){fdx_debug(e,"CIM","fdx_loadContentIM:localeURIRefresh")}var cacheBuster=Math.round(new Date().getTime()/1000);var path=fdx_getProtocol()+"://www.fedex.com/templates/components/apps/contentim/contentim-min.json";var intPath=fdx_getProtocol()+"://www.fedex.com/templates/components/apps/contentim/contentim_internal-min.json";path=(fdx_min_off)?path.replace("-min.json",".json"):path;intPath=(fdx_min_off)?intPath.replace("-min.json",".json"):intPath;try{if(document.getElementById("contentim-internal")!==null&&window.location.hostname.indexOf("brand.fedex.com")<0&&window.location.hostname.indexOf("brandtest.fedex.com")<0){fdx_loadScript("contentim_internal-json",intPath+"?cb="+cacheBuster+refreshUri,null,null)}else{fdx_loadScript("contentim-json",path+"?cb="+cacheBuster+refreshUri,null,null)}}catch(e){fdx_debug(e,"CIM","fdx_loadContentIM:internal-json")}}}catch(e){fdx_debug(e,"CIM","fdx_loadContentIM")}};fdx_loadContentIM();
/*!
//# sourceURL=__contentim_controller
*/
