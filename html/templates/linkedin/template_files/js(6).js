LI.define("Login.handleSuccess");LI.Login.handleSuccess=function(a){a=a.responseText;var c=LI.ChangePassword.Styles,d=LI.ChangePassword.JS,b=LI.Controls.getControl("login","FrontierAJAXForm");LI.Dialog().open({name:"change-password-dialog",type:"interrupt",width:500,content:{title:LI.i18n.get("change_your_password"),html:a},dependencies:{jsFiles:d,cssFiles:c}});b.resetFormSubmit()};LI.define("Login.handleError");
LI.Login.handleError=function(a){function c(a,l,b){var e=a.parentNode;YDom.addClass(a,h);a.focus();l||(l=document.createElement("span"),l.className=h+" "+m,e.appendChild(l),YDom.insertBefore(l,e),a.className.replace(m,""));n&&jSecure.setElementContent(l,LI.i18n.get(b))}var d=YDom.get("session_password-login"),b=YDom.get("session_key-login"),e=YDom.get("session_key-login-error"),k=YDom.get("session_password-login-error"),n=YDom.get("mini-profile--js"),f=YDom.get("domainSuggestion"),g=n?n.children[0]:
"",h="error",m="hidden";YDom.removeClass(d,h);YDom.removeClass(b,h);if(a&&a.cec){e&&(e.textContent="");k&&(k.textContent="");if(f=a&&a.cec&&a.cec.password||null)c(d,k,f),YDom.addClass(g,"wp-margin");(g=a&&a.cec&&a.cec.username||null)&&c(b,e,g);LI.injectAlert(a.globalError,"error")}else{d.value="";""===a.domainSuggestions&&(YDom.addClass(f,"hide"),YDom.removeClass(g,"wp-margin"));if("wp"===a.ec)c(d,k,"wrong_password"),YDom.addClass(g,"wp-margin");else if("iu"===a.ec||"ium"===a.ec||"wpm"===a.ec){var q=
b.parentNode,p="";if("iu"===a.ec)p="invalid_username";else if("ium"===a.ec||"wpm"===a.ec)p="invalid_username_mobile";(e=e?e:Y$("."+h,q)[0])&&c(b,e,p);"wpm"===a.ec&&(c(d,k,"wrong_password"),YDom.addClass(g,"wp-margin"));""!==a.domainSuggestions&&(b=a.domainSuggestions,YDom.addClass(g,"wp-margin"),YDom.removeClass(f,"hide"),document.getElementById("suggestion").textContent=b)}else"pnlna"===a.ec&&c(b,e,"phone_number_login_not_allowed");!a.ec&&a.fieldErrors&&a.globalError&&LI.injectAlert(a.globalError,
"error");a.tc&&(document.getElementById("tryCount").value=a.tc);if(a&&a.fieldErrors){for(var r in a.fieldErrors)YDom.addClass(r,h);"iu"==a.ec||YDom.hasClass(f,"hide")||(YDom.addClass(f,"hide"),YDom.removeClass(g,"wp-margin"))}}};LIModules&&LIModules.exports("Smartlock.LoginErrorHandler",LI.Login.handleError);
$(function(){function a(){var a=g.text(),a=b.val().split("@")[0].concat(a);b.val(a);document.getElementById("clickedSuggestion").value="true";s=!0}function c(a){var b=a.target;"A"===b.tagName&&(a.preventDefault(),window.open(b.href),self.close())}function d(){var a=LI.parseQueryString,b=a(window.location.href).session_redirect;return b&&(b=a(b).l)?"FIREFOX_ACTIVATION"===a(b).trk:!1}var b=$("#session_key-login"),e=$("#session_password-login"),k=$("#mini-profile"),n=$("#mini-profile--js"),f=$("#not-me--js"),
g=$("#suggestion"),h=$("#login"),m=$("#btn-primary"),q=$("#cancelBtn"),p=LIModules.imports("Smartlock.LoginErrorHandler"),r="true"===n.attr("data-phone-login-allowed"),s=!1;if(window.opener||d())$(window).on("click",c);if(!s)g.on("click",a);q.length&&q.keydown(function(a){32===a.which&&(a.preventDefault(),window.location.href=jSecure.sanitizeUrl(a.target.href))});f.on("click",function(a){b.removeClass("hidden");k.addClass("hidden");f.addClass("hidden");b.focus();WebTracking&&WebTracking.trackUserAction("login_page_v2_interaction_tracking",
"login_not_you")});b.hasClass("error")?b.focus():e.hasClass("error")&&e.focus();m.length&&m.click(function(a){a.preventDefault();a.stopImmediatePropagation();a=b.val();var g=e.val(),c={cec:null},d=null,f=null;if(!$("#session_key-login").hasClass("hidden"))if(r){if(!a||3>a.length||a&&a.match(/.*[a-zA-Z].*/g)&&!(a&&-1<a.indexOf("@")))d="invalid_email_phone_format"}else!a||3>a.length?d="invalid_email_format":a&&-1<a.indexOf("@")||(d="phone_number_login_not_allowed");g||(f="empty_password");if(d||f)c.cec=
{},d&&(c.cec.username=d),f&&(c.cec.password=f),c.globalError=LI.i18n.get("generic_login_error_message");null!==c.cec?p(c):h.submit()})});