"use strict";function changeMe(a){a.style.color="#000"}var UPS_Identity_APP=angular.module("upsIdentityApp",["ui.bootstrap","upsIdentityApp.controllers","upsIdentityApp.directives","upsIdentityApp.filters","upsIdentityApp.services","ngRoute","upsCpcModule","upsCacModule"]);UPS_Identity_APP.constant("API_SERVICE","local"),UPS_Identity_APP.constant("MOCK_BASE_URL","app_assets/mocks/"),UPS_Identity_APP.constant("TEMPLATE_URL","app_assets/templates/"),UPS_Identity_APP.config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self","https://wwwapps.ups.com/**"])}]),UPS_Identity_APP.config(["$locationProvider",function(a){a.hashPrefix("")}]),UPS_Identity_APP.config(function(){}).run(["$http","identityErrorHandler",function(a,b){b.Errors=[]}]),UPS_Identity_APP.config(["$routeProvider","PREPEND_STRING",function(a,b){a.when("/identityEntry/",{templateUrl:b+"/identityverification/app_assets/Identity.html"}).when("/mychoiceactivate/",{templateUrl:b+"/identityverification/app_assets/mychoiceactivate.html"}).when("/addpayment/",{templateUrl:b+"/identityverification/app_assets/payment.html"}).when("/membershipcancellation/",{templateUrl:b+"/identityverification/app_assets/cancelmembership.html"}).when("/identityverification/aiaentry",{templateUrl:b+"/identityverification/app_assets/aia.html"})}]),window.UPS_app={getAngularService:function(a){var b=document.querySelector("[data-ng-controller]")||document.querySelector("[ng-controller]"),c=angular.element(b),d=c.injector();return d?d.get(a):null},backtrace:function(a){var b=[];"object"==typeof a&&void 0!==a.length&&(b=a);for(var c=new Error("vivdisense_backtrace"),d=c.stack,e=d.split("\n"),f="",g=0;g<e.length;g++){for(var h=!1,i=0;i<b.length;i++)if(-1!==e[g].indexOf(b[i])){h=!0;break}!1===h&&(f+=e[g]+"\n")}}},UPS_Identity_APP.filter("validMonths",function(){return function(a,b){var c=[],d=new Date,e=d.getUTCMonth()+1,f=d.getUTCFullYear()-18;return""!=b&&(b==f?angular.forEach(a,function(a){a.id<=e&&c.push(a)}):angular.forEach(a,function(a){c.push(a)})),c}}),UPS_Identity_APP.filter("daysInMonth",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){""!=c&&(1==c.id||3==c.id||5==c.id||7==c.id||8==c.id||10==c.id||12==c.id?d.push(a):(4==c.id||6==c.id||9==c.id||11==c.id)&&a<=30?d.push(a):2==c.id&&(b%4==0&&a<=29?d.push(a):a<=28&&d.push(a)))}),d}}),UPS_Identity_APP.filter("validDays",function(){return function(a,b,c){var d=[],e=new Date,f=e.getUTCDate(),g=e.getUTCMonth()+1;return b==e.getUTCFullYear()-18&&c.id==g?angular.forEach(a,function(a){a<=f&&d.push(a)}):angular.forEach(a,function(a){d.push(a)}),d}}),angular.module("upsIdentityApp.controllers",[]).controller("InitCtrl",function(){});


UPS_Identity_APP.constant("IS_DEVELOPMENT",!1),UPS_Identity_APP.constant("PREPEND_STRING","");


"use strict";angular.module("upsIdentityApp.directives",[]),angular.module("upsIdentityApp.directives").directive("upsIdentity",["$rootScope","PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(a,b,c){var d;f.isModal?(d="<div id='IdentityModalDiv' class='modal'  data-backdrop='static' tabindex='-1' role='dialog' >"+a.IdentityHtml+"</div>",b.append(g(d)(a))):(d="<div id='IdentityModalDiv'>"+f.convertModal(a.IdentityHtml)+"</div>",b.append(g(d)(a)),a.finishedLoading="done")}}}]).directive("addPayment",["$rootScope","PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(a,b,c){var d;d="<div>"+a.addpaymentcard+"</div>",b.append(g(d)(a))}}}]).directive("aiaVerification",["$rootScope","PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(a,b,c){var d,e=a.aiaHtml;d=f.isModal?"<div id='AIAModalDiv' class='modal'  data-backdrop='static' tabindex='-1' role='dialog'>"+e+"</div>":"<div id='AIAModalDiv' ng-controller='aiaCtrlVerification' >"+f.convertModal(e)+"</div>",b.append(g(d)(a)),a.finishedLoading="done"}}}]).directive("identityTemplate",["identityWemsDataConversion","PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(b,d,e){f.initHeaders().then(function(){f.getHTML(function(e){a.convertErrorCodes(e.identity_errors),a.convertErrorCodes(e.doapp_errors),a.convertErrorCodes(e.identity_list_options),b.IdentityHtml=e[c.idverification_template],b.addpaymentcard=e.ct1_doapp_addpaymentcard,b.templateStringForCPC=e.ct1_doapp_cpc,b.templateStringForCAC=e.doa_cac,d.replaceWith(g("<ups-identity></<ups-identity><add-payment></add-payment>")(b)),b.finishedLoading="done"},[c.idverification_template,"identity_errors","doapp_errors","identity_list_options","ct1_doapp_addpaymentcard","ct1_doapp_cpc","doa_cac"])})}}}]).directive("paymentTemplate",["identityWemsDataConversion","PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(b,d,e){f.initHeaders().then(function(){f.getHTMLAia(function(e){a.convertErrorCodes(e.identity_errors),b.IdentityHtml=e[c.idverification_template],b.templateStringForCPC=e.ct1_doapp_cpc,b.templateStringForCAC=e.doa_cac,d.replaceWith(g("<add-payment></add-payment>")(b)),b.finishedLoading="done"},[c.idverification_template,"identity_errors","identity_list_options","ct1_doapp_cpc","doa_cac"],"en_US")})}}}]).directive("reportFraudTemplate",["identityWemsDataConversion","PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(b,c,d){f.initHeaders().then(function(){f.getHTMLAia(function(d){a.convertErrorCodes(d.identity_errors),b.fraudHtml=d.ct1_idverification_cancel_enrollment,b.templateStringForCPC=d.ct1_doapp_cpc,b.templateStringForCAC=d.doa_cac,f.cac_html=d.doa_cac,c.replaceWith(g("<ups-cancel-enrollment></ups-cancel-enrollment>")(b)),b.finishedLoading="done"},["ct1_idverification_cancel_enrollment","identity_errors","identity_list_options","ct1_doapp_cpc","doa_cac","doa_cac"],f.Locale)})}}}]).directive("myChoiceActivateTemplate",["identityWemsDataConversion","PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(b,c,d){f.initHeaders().then(function(){f.getHTMLAia(function(d){a.convertErrorCodes(d.identity_errors),b.IdentityActivate=d.ct1_identityverification_mychoice_activatecodeenrollment,b.templateStringForCPC=d.ct1_doapp_cpc,b.templateStringForCAC=d.doa_cac,f.cac_html=d.doa_cac,c.replaceWith(g("<my-choice-activate></my-choice-activate>")(b)),b.finishedLoading="done"},["ct1_identityverification_mychoice_activatecodeenrollment","identity_errors","identity_list_options","ct1_doapp_cpc","doa_cac","doa_cac"],f.Locale)})}}}]).directive("aiaTemplate",["identityWemsDataConversion","PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(b,c,d){f.initHeaders().then(function(){f.getHTMLAia(function(d){a.convertErrorCodes(d.identity_errors),a.convertErrorCodes(d.doapp_errors),a.convertCountryList(d.doa_country_list),b.aiaHtml=d.ct1_identityverification_aia,c.replaceWith(g("<aia-verification></<aia-verification>")(b)),b.finishedLoading="done"},["ct1_identityverification_aia","identity_errors","doapp_errors","identity_list_options","doa_country_list"],f.Locale)})}}}]).directive("upsCancelEnrollment",["PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f){return{restrict:"E",replace:!0,transclude:!1,link:function(a,b,c){var d="<div id='CancelEnrollmentDiv' ng-controller='CancelEnrollmentCtrl''>"+e.convertModal(a.fraudHtml)+"</div>";b.append(f(d)(a)),a.finishedLoading="done"}}}]).directive("myChoiceActivate",["PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f){return{restrict:"E",replace:!0,transclude:!1,link:function(a,b,c){var d="<div id='ActivateModalDiv'>"+e.convertModal(a.IdentityActivate)+"</div>";b.append(f(d)(a)),a.finishedLoading="done"}}}]).directive("datepicker",["PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f){return{restrict:"A",link:function(a,b,c){b.datepicker({dateFormat:"yy-mm-dd"})}}}]).directive("upsIdentityActivation",["PREPEND_STRING","Constants","IS_DEVELOPMENT","$http","DTOService","$compile",function(a,b,c,d,e,f){return{restrict:"E",replace:!0,transclude:!1,link:function(a,g,h){c?d.get("/identityverification/app_assets/templates/"+b.idverification_activation_template+".html").then(function(b){g.replaceWith(f(b.data)(a)),a.finishedLoading="done"}):e.getHTML(function(b){var c="<div ng-controller='FraudCtrl'>"+b[idverification_activation_template]+"</div>";g.replaceWith(f(c)(a)),a.finishedLoading="done"},[b.idverification_template])}}}]).directive("identityTitle",["DTOService",function(a){return{restrict:"E",link:function(b,c,d){var e=c.context.innerText;a.isModal?c[0].outerHTML='<h2 class="modal-title">'+e+"</h2>":(document.title=e.replace(/(<([^>]+)>)/gi,"").replace(".","")+" | UPS",c[0].outerHTML="",$("h1").html("<span>"+e+"</span>").attr("tabindex","-1"),$("h1").focus());var f='<li class="breadcrumb">'+e+"</li>",g=$("nav.ups-breadcrumb > ol").html();g&&$("nav.ups-breadcrumb > ol").html(g+f.replace(".",""))}}}]);


"use strict";angular.module("upsIdentityApp.filters",[]).filter("lowerFirstLetter",function(){return function(a){if(a)return a=a.charAt(0).toLowerCase()+a.slice(1),a.replace(" ","")}}).filter("capFirstLetter",function(){return function(a){if(a)return a=a.charAt(0).toUpperCase()+a.slice(1)}});


!function(a,b){"use strict";function c(){function a(a,b,d,e){return function(g,h,i){var j=i.$normalize(b);!c[j]||f(h,d)||i[j]||g.$watch(i[a],function(a){a=e?!a:!!a,h.attr(b,a)})}}var c={ariaHidden:!0,ariaChecked:!0,ariaReadonly:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeydown:!0,bindRoleForClick:!0};this.config=function(a){c=b.extend(c,a)},this.$get=function(){return{config:function(a){return c[a]},$$watchExpr:a}}}var d=b.module("ngAria",["ng"]).provider("$aria",c),e=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],f=function(a,b){if(-1!==b.indexOf(a[0].nodeName))return!0};d.directive("ngShow",["$aria",function(a){return a.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function(a){return a.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function(a){return a.$$watchExpr("ngValue","aria-checked",e,!1)}]).directive("ngChecked",["$aria",function(a){return a.$$watchExpr("ngChecked","aria-checked",e,!1)}]).directive("ngReadonly",["$aria",function(a){return a.$$watchExpr("ngReadonly","aria-readonly",e,!1)}]).directive("ngRequired",["$aria",function(a){return a.$$watchExpr("ngRequired","aria-required",e,!1)}]).directive("ngModel",["$aria",function(a){function b(b,c,d,g){return a.config(c)&&!d.attr(b)&&(g||!f(d,e))}function c(a,b){return!b.attr("role")&&b.attr("type")===a&&!f(b,e)}function d(a,b){var c=a.type,d=a.role;return"checkbox"===(c||d)||"menuitemcheckbox"===d?"checkbox":"radio"===(c||d)||"menuitemradio"===d?"radio":"range"===c||"progressbar"===d||"slider"===d?"range":""}return{restrict:"A",require:"ngModel",priority:200,compile:function(e,f){var g=d(f,e);return{post:function(d,e,f,h){function i(){return h.$modelValue}function j(a){var b=f.value==h.$viewValue;e.attr("aria-checked",b)}function k(){e.attr("aria-checked",!h.$isEmpty(h.$viewValue))}var l=b("tabindex","tabindex",e,!1);switch(g){case"radio":case"checkbox":c(g,e)&&e.attr("role",g),b("aria-checked","ariaChecked",e,!1)&&d.$watch(i,"radio"===g?j:k),l&&e.attr("tabindex",0);break;case"range":if(c(g,e)&&e.attr("role","slider"),a.config("ariaValue")){var m=!e.attr("aria-valuemin")&&(f.hasOwnProperty("min")||f.hasOwnProperty("ngMin")),n=!e.attr("aria-valuemax")&&(f.hasOwnProperty("max")||f.hasOwnProperty("ngMax")),o=!e.attr("aria-valuenow");m&&f.$observe("min",function(a){e.attr("aria-valuemin",a)}),n&&f.$observe("max",function(a){e.attr("aria-valuemax",a)}),o&&d.$watch(i,function(a){e.attr("aria-valuenow",a)})}l&&e.attr("tabindex",0)}!f.hasOwnProperty("ngRequired")&&h.$validators.required&&b("aria-required","ariaRequired",e,!1)&&f.$observe("required",function(){e.attr("aria-required",!!f.required)}),b("aria-invalid","ariaInvalid",e,!0)&&d.$watch(function(){return h.$invalid},function(a){e.attr("aria-invalid",!!a)})}}}}}]).directive("ngDisabled",["$aria",function(a){return a.$$watchExpr("ngDisabled","aria-disabled",e,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(a,b,c,d){b.attr("aria-live")||b.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(a,b){return{restrict:"A",compile:function(c,d){var g=b(d.ngClick,null,!0);return function(b,c,d){f(c,e)||(a.config("bindRoleForClick")&&!c.attr("role")&&c.attr("role","button"),a.config("tabindex")&&!c.attr("tabindex")&&c.attr("tabindex",0),!a.config("bindKeydown")||d.ngKeydown||d.ngKeypress||d.ngKeyup||c.on("keydown",function(a){function c(){g(b,{$event:a})}var d=a.which||a.keyCode;32!==d&&13!==d||b.$apply(c)}))}}}}]).directive("ngDblclick",["$aria",function(a){return function(b,c,d){!a.config("tabindex")||c.attr("tabindex")||f(c,e)||c.attr("tabindex",0)}}])}(window,window.angular),angular.module("upsIdentityApp.services",["ui.bootstrap"]).service("UtilService",["API_SERVICE","$http","$q","$window",function(a,b,c,d){var e="";return{openTermsAndConditions:function(a){var b=a,c=Math.round(.8*UPS.configs.viewport.width),e=Math.round(.8*UPS.configs.viewport.height),f=void 0!==window.screenLeft?window.screenLeft:screen.left,g=void 0!==window.screenTop?window.screenTop:screen.top,h=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,i=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,j=h/2-c/2+f,k=i/2-e/2+g,l=d.open(b,"_blank","scrollbars=yes, width="+c+", height="+e+", top="+k+", left="+j);window.focus&&l.focus()},getKeyFromJson:function(a,d){var e=c.defer();return b.get(d).then(function(b){for(var c in b.data)if(-1!==c.indexOf(a)){e.resolve(b.data[c]);break}}),e.promise},mergeNames:function(a){var b=angular.copy(a),c=a.middle_name?" "+a.middle_name+" ":" ",d=a.first_name+c+a.last_name;return d.length>35&&(d=a.first_name+" "+a.last_name,d.length>35&&(d=a.first_name.trim()+" "+a.last_name.trim(),d.length>35&&(d=a.first_name.trim()+" "+a.last_name.trim(),d=d.slice(0,35)))),b.name=d,console.log(b),b},mockServiceCalls:function(c,d,f){e="server"===a?"":"app_assets/mocks/",b({method:c.type||"GET",url:e+c.urlString}).then(d,f)},getLocation:function(a,b){b("United States")},openModal:function(a,b,c){var d=b||"modal.html";return $modal.open({templateUrl:d,controller:function(){console.log("here")},resolve:{callback:function(){return c},data:function(){return a}}})}}}]).service("ScreenChanger",function(){return{changeScreen:function(a,b,c){c&&($(a).on("hidden.bs.modal",function(c){$(b).modal("show"),$(a).off()}),$(a).modal("hide"))}}}).service("DTOService",["$q","Constants","$http","$location",function(a,b,c,d){var e=this;return{initShip:function(){for(var a=this.SHIPPING_INFO.length,b=0;b<a;b++){var c=this.SHIPPING_INFO[b];"emailAddress"===c.key&&(this.SHIPPING_INFO.emailAddress=c.value)}},convertModal:function(a){return a=a.replace("modal-dialog modal-lg","ups-wrap_inner"),a=a.replace("modal-content",""),a=a.replace("modal-header","ups-onboApp-wrap-ppc ups-application_wrapper ups-wrap ups-form_wrap ups-app_onboarding"),a=a.replace("modal-title","ups-no-modal"),a=a.replace("ups-modal_subtitle",""),a=a.replace("ups-icon-x",""),a=a.replace("modal-body","ups-application_wrapper ups-wrap ups-form_wrap ups-app_onboarding"),console.log("full page version of html is "+JSON.stringify(a)),a},createURL:function(a){if(this.TransactionID=e.TransactionID,this.isModal)return a+"?TRANSACTION_ID="+e.TransactionID;var b=d.absUrl(),c=b.split("?"),f=c[1];return void 0!==f?(f=f+"&TRANSACTION_ID="+e.TransactionID,a+"?"+f):a+"?TRANSACTION_ID="+e.TransactionID},getHTML:function(a,d){this.TransactionID=e.TransactionID,c({method:"POST",data:JSON.stringify(d),url:this.createURL(b.GetHTMLContent)}).then(function(b){var c=b.data;!0===c.WasSuccessfull&&a(c.Object)},function(a){$("#ajaxError").html("There was an issue with getting name sugestions suggestions. Please try again soon."),$("#enrollmentError").html(""),$("#error_modal").modal("show")})},getHTMLAia:function(a,d,f){void 0==f&&(f="en_US"),this.TransactionID=e.TransactionID;var g={pageID:d,Locale:f};console.log("getHTML"+JSON.stringify(g)),c({method:"POST",data:JSON.stringify(g),url:this.createURL(b.GetHTMLContentAia)}).then(function(b){var c=b.data;!0===c.WasSuccessfull&&a(c.Object)},function(a){$("#ajaxError").html("There was an issue with getting name sugestions suggestions. Please try again soon."),$("#enrollmentError").html(""),$("#error_modal").modal("show")})},initHeaders:function(){var b=a.defer();return c({method:"POST",url:"/IdentityVerification/Init/GetInit"}).then(function(a){console.log("init is successfull");var c=a.data;if(1==c.WasSuccessfull){var d=c.Object;e.TransactionID=d,c.xLocale&&(e.Locale=xLocale),b.resolve()}else b.resolve()},function(a){b.resolve()}),b.promise}}}]).service("Constants",["PREPEND_STRING",function(a){this.SubmitCancelEnrollment=a+"/identityverification/CancelEnrollment/",this.GetIdentityOptions=a+"/IdentityVerification/VerifyIdentity/",this.GetQuizQuestions=a+"/IdentityVerification/GetQuizQuestions",this.GetPinToPhoneSMS=a+"/identityverification/GetActivationCode",this.GetPinToPhoneVoice=a+"/identityverification/GetActivationCode",this.GetPinToLetter=a+"/identityverification/GetActivationCode",this.SubmitIdentitySucess=a+"/identityverification/SucessIdentity",this.AIAVerification=a+"/identityverification/AiaVerification/",this.SubmitAIAVerification=a+"/identityverification/SubmitAia/",this.CloseAiaVerification=a+"/identityverification/CloseAiaVerification/",this.GetUserInfo=a+"/identityverification/GetUserInfo/",this.GetUserEnrollment=a+"/identityverification/GetUserEnrollment/",this.SubmitActivationCode=a+"/identityverification/SubmitActivationCode/",this.SendMeNewCode=a+"/identityverification/SendMeNewCode/",this.ValidatePinToLetterActivationCode=a+"/identityverification/ValidateActivationCode",this.GetHTMLContent=a+"/IdentityVerification/Content/GetHTML",this.GetHTMLContentAia=a+"/IdentityVerification/Content/GetHTMLAia",this.CloseIdentity=a+"/IdentityVerification/CloseIdentity",this.idverification_template="ct1_doapp_idverification",this.idverification_activation_template="ct1_doapp_idverification_activation",this.idverification_cancel_enrollment="ct1_doapp_idverification_cancel_enrollment",this.idverification_add_payment="ct1_doapp_addpaymentcard",this.idverification_choose_payment="ct1_doapp_choosepayment",this.idverification_my_choice_activate="ct1_identityverification_mychoice_activatecodeenrollment",this.DOB_YEAR="Year",this.DOB_MONTH="Month",this.DOB_DAY="DAY",this.identity_error_list_wem="doapp_errors"}]).service("IdentityVerificationClientService",["DTOService","$compile","$http","$rootScope",function(a,b,c,d){return{showModal:function(e,f,g){a.Locale=f,a.ClientID=g,a.ClientService=!0,a.isModal=!0,c.get("/identityverification/app_assets/"+e+".html").then(function(a){var c=d.$new(!0);$("body").append(b(a.data)(c))})}}}]).service("identityErrorHandler",["$parse","$rootScope",function(a,b){return this.errorList=[],{createError:function(a,b,c){var d=this.Errors[b];if(void 0!==d.FieldName){var e=a[d.FieldName];c.errors[d.FieldName]=d.ErrorMessage,e.$setValidity("serverMessage",!1,a)}},getErrorList:function(a,b){for(var c=[],d=0;d<b.length;d++)c.push(this.Errors[b[d]]);return c},createErrorList:function(a){var c=[];"string"==typeof a&&(a=[a]);for(var d=0;d<a.length;d++){var e=a[d],f=e.indexOf("~");f>-1&&(b.apiErrorKey=e.substring(f+1,e.length),e=e.substring(0,f)),c.push(this.Errors[e]||this.Errors.doappGenericError||this.Errors.BACK_END_DOWN)}return c}}}]).service("ScopeStack",function(){this.LocationStack=[]}).service("NotificationService",["$window","$rootScope",function(a,b){var c=[],d={UPS_ERR_01:{errorCode:404,errorMessage:"File not found",errorDetail:"File not found"}};return{handleError:function(a,e){if(a)if("object"==typeof a)a.length>0?a[0].errorCode&&a[0].errorMessage&&(c=a):c=[a];else{var f=d[a];a=f?{id:a,msg:f.message}:{id:a,msg:e},c=a}else c=[];b.$emit("handleError",c)}}}]).factory("IdentityVerificationAPIService",["$rootScope","$location","$window","$http","NotificationService","UtilService","DTOService","Constants","$timeout","ScopeStack","ScreenChanger","PREPEND_STRING",function(a,b,c,d,e,f,g,h,i,j,k,l){return this.getview=function(){return d({method:"POST",url:g.createURL(h.GetIdentityOptions)}).then(function(a){return a})},this}]).service("identityErrorHandler",["$parse","$rootScope",function(a,b){return this.errorList=[],{createError:function(a,b,c){var d=this.Errors[b];if(void 0!==d.FieldName){var e=a[d.FieldName];c.errors[d.FieldName]=d.ErrorMessage,e.$setValidity("serverMessage",!1,a)}},getErrorList:function(a,b){for(var c=[],d=0;d<b.length;d++)c.push(this.Errors[b[d]]);return c},createErrorList:function(a){var c=[];"string"==typeof a&&(a=[a]);for(var d=0;d<a.length;d++){var e=a[d],f=e.indexOf("~");f>-1&&(b.apiErrorKey=e.substring(f+1,e.length),e=e.substring(0,f)),c.push(this.Errors[e]||this.Errors.doappGenericError||this.Errors.BACK_END_DOWN)}return c}}}]).service("identityWemsDataConversion",["DTOService","identityErrorHandler","$rootScope",function(a,b,c){return b.Errors={},{convertErrorCodes:function(a){if(a){var c=JSON.parse(a);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer,e=0;e<d.length;e++){for(var f=d[e].item,g="",h=[],i="",j="",k="",l=0;l<f.length;l++){var m=f[l].key,n=f[l].value.toString();"ErrorCode"===m?-1!==n.indexOf("|")?h=n.split("|"):g=n:"ErrorMessage"===m?i=n:"FieldId"===m?j=n:"FieldName"===m&&(k=n)}var o={ErrorMessage:i,FieldId:j,FieldName:k};if(h.length>0)for(var p=0;p<h.length;p++)b.Errors[h[p]]=o;else b.Errors[g]=o}}else{var o={ErrorMessage:"We're sorry, but it seems we're experiencing technical issues. Please refresh your screen or try again later."};b.Errors.BACK_END_DOWN=o,o.ErrorMessage="Sorry, we're unable to process this request. Please check your information and try again.",b.Errors.doappGenericError=o,b.Errors.errorHeader=" Please correct the following errors:"}},convertCountryList:function(b){if(a.countryList=[],a.countryListArray=[],b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer,e=0;e<d.length;e++){for(var f=d[e].item,g="",h="",i="",j="",k=0;k<f.length;k++){var l=f[k].key,m=f[k].value;"code"===l?g=m:"country"===l?h=m:"CustomerServicePhoneNumber"===l?j=m:"FraudPreventionPhoneNumber"===l&&(i=m)}var n={code:g,country:h,fraudNumber:i,customerServiceNumber:j};a.countryList[g]=n,a.countryListArray.push(n)}}},hasDataContainer:function(a){return a.angular&&a.angular.dataContainer}}}]);


"use strict";angular.module("upsIdentityApp.controllers").controller("Identity.AddPaymentCardCtrl",["$scope","identityErrorHandler","$location","$window","$http","NotificationService","UtilService","DTOService","Constants","$timeout","ScopeStack","ScreenChanger","PREPEND_STRING",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){a.TransactionID=h.TransactionID,$("#identityErrorMessage").html("")}function o(b,c,d,e,f,g){$("#identityErrorMessage").html("");var i="";i=h.Locale?h.Locale:"en_US";var j="";j=h.Location?h.Location:"US";var k=a.templateStringForCPC,l=a.templateStringForCAC;void 0===k||""===k||void 0===l||""===l||(a.widgetOptions={templateString:k,cacTemplateString:l,transactionId:a.TransactionID,appId:b,uiType:2,country:j,currency:"USD",locale:i,accountKey:d,newPaymentCard:e,newPayPalAccount:f,newHPP:g,token:c,cpcwsBaseUri:"https://wwwapps.ups.com/",useCookies:!1,redirectTo:"https://www.ups.com/cpcws/redirect",returnTo:window.location.protocol+"//"+window.location.host+"/ppc/ppc.html?loc=en_US#/payment/returnpaypal/",cacwsBaseUri:"https://wwwapps.ups.com/"},a.cpcApi.init(a.widgetOptions))}n(),a.toggleCPC=function(){$("#PaymentModalDiv").modal("show")},a.cancel=function(){$("#PaymentModalDiv").modal("toggle")},a.savePaymentToProfile=function(){$("#identityErrorText").html(""),a.formErrorsFromCPC=null,a.showErrorsFromCPC=!1;a.showErrorsFromCPC=!1,a.isLoading=!0,a.cpcApi.saveToProfile(function(c){var d=c.data;if(a.isLoading=!1,null!==d.processingError){var e={vCode:null,vDesc:null},f=d.processingError.code;if("39047"===f||"39200"===f)if(null!=d.validationErrors||void 0!=d.validationErrors)if(e.vCode=d.validationErrors[0].code.trim(),e.vDesc=d.validationErrors[0].message,b.Errors[e.vCode]){var g=b.Errors[e.vCode].ErrorMessage;$("#identityErrorText").html(JSON.stringify(g))}else $("#identityErrorText").html(JSON.stringify(e.vDesc));else if(b.Errors[e.vCode]){var g=b.Errors[e.vCode].ErrorMessage;$("#identityErrorText").html(JSON.stringify(g))}else $("#identityErrorText").html(JSON.stringify("Please check your information and try again. "));else if(b.Errors[e.vCode]){var g=b.Errors[e.vCode].ErrorMessage;$("#identityErrorText").html(JSON.stringify(g))}else $("#identityErrorText").html(JSON.stringify("Please check your information and try again. "))}else if(null===d.processingError){a.isLoading=!1,$(".modal-backdrop").remove(),$("#PaymentModalDiv").modal("toggle"),window.openAccountCallBack()}})},a.initCPCWidget=function(b){function c(){e({method:"POST",url:h.createURL("/identityverification/GetCPCTokenRequest/")}).then(function(a){var b=a.data;b.Response.IsSuccess&&(j=b.token,k=b.appId,o(k,j,d,f,g,i))},function(a){})}a.cpcApi=b;var d=null,f=!1,g=!1,i=!1;f=!0;var j="",k="";c()}}]),angular.module("upsIdentityApp.controllers").controller("aiaCtrlVerification",["$filter","identityErrorHandler","$routeParams","$scope","$location","$window","$http","NotificationService","UtilService","DTOService","Constants","$timeout","ScopeStack","ScreenChanger","PREPEND_STRING",function($filter,identityErrorHandler,$routeParams,$scope,$location,$window,$http,NotificationService,UtilService,DTOService,Constants,$timeout,ScopeStack,ScreenChanger,PREPEND_STRING){function init(){$scope.opened=!1,$scope.acc_num="",$scope.countryName="",$scope.countryCode="",$scope.invoice_number="",$scope.invoiceDate="",$scope.charges="",$scope.controlNumber="",$scope.displayCID=!1,$scope.displayCountry=!0,$scope.showCancelButton="false",$scope.showBackButton="true",$("#identityErrorMessage").html(""),$scope.ismmddyyyy=!1,aiaInitCall(),$scope.showCancelButton=DTOService.isModal}function aiaInitCall(){if($scope.isAIAModal=!0,$scope.isFullPage=!1,DTOService.isModal?$scope.isAIAModal=!0:($scope.isFullPage=!0,$scope.isAIAModal=!1),$scope.acc_num="",$scope.invoice_number="",$scope.charges="",$scope.controlNumber="",$scope.invoiceDate_us="",$scope.invoiceDate_nonUS="",DTOService.Locale){var a=DTOService.Locale.substring(3,5),b="",c="";b=DTOService.Locale.substring(0,2),c=a.toUpperCase(),DTOService.Locale=b+"_"+c}else{DTOService.Locale="en_US";var a="us"}$scope.isLoading=!0;var d=collectData();$http({method:"POST",data:JSON.stringify(d),url:DTOService.createURL(Constants.AIAVerification)}).then(function(a){$(".modal-body .ups-date_picker_button").hide(),$scope.isLoading=!1;var b=a.data;if(b.WasSuccessfull)if(b.ReturnToMethod){var c=b.Object;window[c]()}else $timeout(function(){$scope.acc_num=b.Object.accountNumber,""!=b.Object.countryCode&&($scope.countryName=DTOService.countryList[b.Object.countryCode].country),$scope.countryCode=b.Object.countryCode,DTOService.isModal?("01"==b.Object.accountType?"US"==b.Object.countryCode||"CA"==b.Object.countryCode||"PR"==b.Object.countryCode?($scope.displayCID=!0,$scope.ismmddyyyy=!0):$scope.ismmddyyyy=!1:"02"!=b.Object.accountType&&"03"!=b.Object.accountType||($scope.displayCountry=!1,"US"==b.Object.countryCode||"CA"==b.Object.countryCode||"PR"==b.Object.countryCode?$scope.ismmddyyyy=!0:$scope.ismmddyyyy=!1),$("#AIAModalDiv").modal("show")):"US"==b.Object.countryCode||"CA"==b.Object.countryCode||"PR"==b.Object.countryCode?($scope.displayCID=!0,$scope.ismmddyyyy=!0):$scope.ismmddyyyy=!1})},function(a){DTOService.isModal&&$("#AIAModalDiv").modal("show"),$scope.isLoading=!1})}function collectData(){var a="",b="";if($scope.ismmddyyyy){if($scope.invoiceDate_us){var c=$scope.invoiceDate_us.substring(0,2),d=$scope.invoiceDate_us.substring(3,5),e=$scope.invoiceDate_us.substring(6,10);a=d+"/"+c+"/"+e,b=$scope.charges}}else $scope.invoiceDate_nonUS&&(a=$scope.invoiceDate_nonUS,b=$scope.charges.replace(",","."));return $scope.isFullPage&&(DTOService.ClientID="VIP"),{ClientID:DTOService.ClientID,Locale:DTOService.Locale,AccountNumber:$scope.acc_num,CountryName:$scope.countryCode,InvoiceNumber:$scope.invoice_number,InvoiceDate:a,AmountDue:b,ControlId:$scope.controlNumber}}$scope.openFromCalender=function(){$scope.opened=!0},$scope.SubmitAIA=function(){if(1!=$scope.displayCID||""!=$scope.invoice_number&&null!=$scope.invoice_number&&""!=$scope.controlNumber&&null!=$scope.controlNumber&&""!=$scope.charges&&null!=$scope.charges&&(""!=$scope.invoiceDate_us&&null!=$scope.invoiceDate_us||""!=$scope.invoiceDate_nonUS&&null!=$scope.invoiceDate_nonUS))if(0!=$scope.displayCID||""!=$scope.invoice_number&&null!=$scope.invoice_number&&""!=$scope.charges&&null!=$scope.charges&&(""!=$scope.invoiceDate_us&&null!=$scope.invoiceDate_us||""!=$scope.invoiceDate_nonUS&&null!=$scope.invoiceDate_nonUS)){var data=collectData();$scope.isLoading=!0,$http({method:"POST",data:JSON.stringify(data),url:DTOService.createURL(Constants.SubmitAIAVerification)}).then(function successCallback(response){$scope.isLoading=!1;var result=response.data;if(!0===result.WasSuccessfull){var returnURL=result.Object,clientType=result.ClientType,returnType=result.ReturnToMethod;if("REDIRECT_TO_JAVASCRIPT"==returnType)if("Non_Angular"==clientType){$(".modal-backdrop").remove(),$("#AIAModalDiv").modal("toggle");var parenthesis="()",returnTofunction=returnURL.concat(parenthesis);eval(returnTofunction)}else $(".modal-backdrop").remove(),$("#AIAModalDiv").modal("toggle"),window[returnURL]();else{$(".modal-backdrop").remove();var returnURL_FullPage=returnURL;returnURL_FullPage=DTOService.Locale?returnURL+"&loc="+DTOService.Locale:returnURL+"&loc=en_US",$window.location.href=returnURL_FullPage}}else{var errorCode=result.Object;if(identityErrorHandler.Errors[errorCode])if(identityErrorHandler.Errors[errorCode].ErrorMessage)if("14100000"==errorCode){var errorrMessage=identityErrorHandler.Errors[965e4].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(errorrMessage))}else{var errorrMessage=identityErrorHandler.Errors[errorCode].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(errorrMessage))}else{var language="",languageToLowerCase="";DTOService.Locale?(language=DTOService.Locale.substring(0,2),languageToLowerCase=language.toLowerCase()):languageToLowerCase="en","en"==languageToLowerCase?"14101036"==errorCode?$("#identityErrorMessage").html("Invoice Details not found"):"14101036"==errorCode?$("#identityErrorMessage").html("Invoice Details not found"):"14101012"==errorCode?$("#identityErrorMessage").html("You've exceeded the maximum number of attempts"):$("#identityErrorMessage").html("Invoice Details not found"):"14101036"==errorCode?$("#identityErrorMessage").html("Detalles de la factura no encontrados"):"14101036"==errorCode?$("#identityErrorMessage").html("Detalles de la factura no encontrados"):"14101012"==errorCode?$("#identityErrorMessage").html("Ha excedido el número máximo de intentos"):$("#identityErrorMessage").html("Detalles de la factura no encontrados")}else if("14101013"==errorCode)$("#identityErrorMessage").html("invoice details not found for the account");else{var errorrMessage=identityErrorHandler.Errors[965e4].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(errorrMessage))}}},function(a){var b=identityErrorHandler.Errors[errorCode].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(b))})}else $("#identityErrorMessage").html("Please check your information and try again.");else $("#identityErrorMessage").html("Please check your information and try again.")},init()}]),angular.module("upsIdentityApp.controllers").controller("MyChoiceActivateCtrl",["identityErrorHandler","$routeParams","$scope","$location","$window","$http","NotificationService","UtilService","DTOService","Constants","$timeout","ScopeStack","ScreenChanger","PREPEND_STRING",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){c.activate={},c.formModel={},c.haveOnlyOneEnrollment="false",c.haveMoreThanOneEnrollment="false",c.haveNoEnrollment="false",c.SendNewCodeResponse="reset",c.NoEnrollmentSelected=!1,c.StartOverResponse="na",$("#identityErrorMessage").html(""),p(),q()}function p(){c.isLoading=!0;t();f({method:"POST",data:"",url:i.createURL(j.GetUserInfo)}).then(function(a){i.isModal&&$("#ActivateModalDiv").modal("show"),c.isLoading=!1;var b=a.data;b.WasSuccessfull?c.username=b.Object.UserName:c.username=""},function(a){i.isModal&&$("#ActivateModalDiv").modal("show"),c.isLoading=!1})}function q(){t();c.isLoading=!0,f({method:"POST",data:JSON.stringify(i.Locale),url:i.createURL(j.GetUserEnrollment)}).then(function(a){c.isLoading=!1;var b=a.data;if(!0===b.WasSuccessfull){c.activate.step="activate";var d=b.Object,e=Object.keys(d).length;1==e?c.haveOnlyOneEnrollment="true":e>1?c.haveMoreThanOneEnrollment="true":c.haveNoEnrollment="true",c.formModel.PendingEnrollmentModels=b.Object}else c.haveNoEnrollment="true"},function(a){c.haveNoEnrollment=!0,c.isLoading=!1})}function r(){return{AddressLine1:c.formModel.PendingEnrollmentModels[0].DeliveryAddressModel.AddressLine1,City:c.formModel.PendingEnrollmentModels[0].DeliveryAddressModel.City,StateProvince:c.formModel.PendingEnrollmentModels[0].DeliveryAddressModel.StateProvince,PostalCode:c.formModel.PendingEnrollmentModels[0].DeliveryAddressModel.PostalCode,Country:c.formModel.PendingEnrollmentModels[0].DeliveryAddressModel.Country,EnrollmentNumber:c.formModel.PendingEnrollmentModels[0].EnrollmentNumber,AddressToken:c.formModel.PendingEnrollmentModels[0].AddressToken,ActivationCodeValue:c.activationNumber,Locale:i.Locale,Name:c.username}}function s(){if(c.pageSet){c.NoEnrollmentSelected=!1;var a=JSON.parse(c.pageSet),b=a.DeliveryAddressModel,d=a.AddressToken,e=a.EnrollmentNumber;return{AddressLine1:b.AddressLine1,City:b.City,StateProvince:b.StateProvince,PostalCode:b.PostalCode,Country:b.Country,EnrollmentNumber:e,AddressToken:d,ActivationCodeValue:c.activationNumber,Locale:i.Locale,Name:c.username}}c.NoEnrollmentSelected=!0}function t(){return{ClientID:i.ClientID,Locale:i.Locale,AccountNumber:c.acc_num,CountryName:c.countryName,InvoiceNumber:c.invoice_number,InvoiceDate:c.invoiceDate,AmountDue:c.charges,ControlId:c.controlNumber}}c.Back=function(){var a=i.Locale;a||(a="en_US"),e.location.href="https://www.ups.com/IdentityVerification/mychoiceactivate?loc="+a+"&ClientId=pea"},c.StartOver=function(){var a=i.Locale;a||(a="en_US"),e.location.href="https://wwwapps.ups.com/ppc/ppc.html?loc="+a+"#/preferencePage/mychoicePreference/membership"},c.Submit=function(){if(c.SendNewCodeResponse="reset",c.NoEnrollmentSelected=!1,$("#identityErrorMessage").html(""),!c.isLoading){var b="";b="true"==c.haveOnlyOneEnrollment?r():s(),b&&(c.isLoading=!0,f({method:"POST",data:JSON.stringify(b),url:i.createURL(j.SubmitActivationCode)}).then(function(b){c.isLoading=!1;var d=b.data;if(!0===d.WasSuccessfull)c.activate.step="confirmation",$("#identityErrorMessage").html("");else{var e=d.Object;if("undefined"!=a.Errors[e]){if("MAX_VAL_TRY_LMIT_REACHED"==e)var f=a.Errors[14101084].ErrorMessage;else var f=a.Errors[e].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(f))}else $("#identityErrorMessage").html("Error")}},function(a){c.isLoading=!1}))}},c.SendNewCode=function(){if(c.NoEnrollmentSelected=!1,c.SendNewCodeResponse="reset",$("#identityErrorMessage").html(""),!c.isLoading){var b="";b="true"==c.haveOnlyOneEnrollment?r():s(),b&&(c.isLoading2=!0,f({method:"POST",url:i.createURL(j.SendMeNewCode),data:b}).then(function(b){c.isLoading2=!1;var d=b.data;if(!0===d.WasSuccessfull)c.SendNewCodeResponse="success";else{var e=d.Object;if("9651082"==e||"14101084"==e)c.StartOverResponse="success";else if("9651094"==e)$("#identityErrorMessage").html(JSON.stringify("We are unable to verify your identity. Try the request again in 24 hours."));else if(a.Errors[e]){var f=a.Errors[e].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(f))}else c.SendNewCodeResponse="fail";$("#identityErrorMessage").scrollTop(0)}},function(a){$("#identityErrorMessage").html("Internal Error - Please Try again !!!!!!"),$("#identityErrorMessage").scrollTop(0)}))}},o()}]),angular.module("upsIdentityApp.controllers").controller("CancelEnrollmentCtrl",["identityErrorHandler","$scope","$location","$window","$http","NotificationService","UtilService","DTOService","Constants","$timeout","ScopeStack","ScreenChanger","PREPEND_STRING",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){b.isCalledFromInit=!0,b.selected=null,b.step="reason_to_cancel",$("#identityErrorMessage").html(""),b.isLoading=!1,$("#CancelEnrollmentDiv").modal("show"),h.CountryCode=h.Locale.substring(3,5),o()}function o(){var a={Locale:h.Locale};e({method:"POST",data:JSON.stringify(a),url:h.createURL(i.GetAvailableMCCountries)}).then(function(a){var b=a.data,c=b.Object;if(b.WasSuccessfull)h.MyChoiceCountries=c.AvailableCountry;else{c.ErrorDescription,c.ErrorCode}},function(a){})}function p(a){var c=s(),d=a.address,e=(a.contact,{MYCAddress:{AddressLine1:d.address1,AddressLine2:d.address2,AddressLine3:d.address3,City:d.city,PostalCode:d.postal,CountryCode:d.country?d.country.key:h.Locale},MYCUserProfile:q(a),Locale:h.Locale,ReasonCode:b.model.selected,ReasonText:c,FraudPin:b.control_number});return d.state&&(d.state.value?(e.MYCAddress.StateProvinceCode=d.state.key,e.MYCAddress.OtherInfo=""):(e.MYCAddress.StateProvinceCode="",e.MYCAddress.OtherInfo=d.state.key)),e}function q(a){return{FirstName:b.first_name,MiddleName:b.middle_initial,LastName:b.last_name,Suffix:b.name_suffix,EmailAddress:a.contact.email}}function r(c){$("#identityErrorMessage").html(""),b.isLoading=!0,e({method:"POST",data:JSON.stringify(c),url:h.createURL(i.SubmitCancelEnrollment)}).then(function(c){b.isLoading=!1;var d=c.data,e=d.Object;if(d.WasSuccessfull)b.step="success";else{var f=(e.ErrorDescription,e.ErrorCode);if("9651079"==f){var g=a.Errors[f].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(g))}else b.step="fail"}},function(a){b.isLoading=!1,b.step="fail"})}function s(){var a="";return"01"==b.model.selected?a=document.getElementById("option1").textContent:"01"==b.model.selected?a=document.getElementById("option2").textContent:"02"==b.model.selected?a=document.getElementById("option3").textContent:"03"==b.model.selected?a=document.getElementById("option4").textContent:"04"==b.model.selected?a=document.getElementById("option4").textContent:"05"==b.model.selected?a=document.getElementById("option6").textContent:"06"==b.model.selected||(a=""),a}function t(){var a={CancelEnrollmentReason:b.model.selected};e({method:"POST",url:h.createURL(i.SubmitCancelEnrollment),data:a}).then(function(a){a.data.WasSuccessfull?b.step="success":b.step="Fail"},function(a){b.step="Fail"})}b.cacAPI={};b.CacLoadedCallback=function(a){b.returnedObject=a,j(function(){if(b.isCalledFromInit){b.cacAPI=a;var c=b.createCACOptions();b.cacAPI.init(c)}})},b.submit=function(){t()},$(".modal").on("hidden.bs.modal",function(){history.pushState(null,null,"/#"),window.location.reload()}),b.submitForm=function(){b.cacAPI.validateAddress().then(function(a){if("2"===a.validationResult.key||"1"===a.validationResult.key||"3"===a.validationResult.key){var c=b.cacAPI.getData();h.Country=c.address.country.key;r(p(c))}else if("0"===a.validationResult.key){var d=a.validationResult.value;$("#identityErrorMessage").html(JSON.stringify(d))}})},b.createCACOptions=function(){var a=new Cac.WidgetOptions;return a.addressType="Origin",a.idPrefix=1,a.templateString=h.cac_html,a.locale=h.Locale,a.useFullWidth=!0,a.cacwsBaseUri="https://wwwapps.ups.com/",a.showTopNickname=function(){return!1},a.showName=function(){return!1},a.nameRequired=function(){return!1},a.showContactName=function(){return!1},a.contactNameRequired=function(){return!1},a.showPhoneType=function(){return!1},a.address.country.key=h.CountryCode.toUpperCase(),a.contactListRequired=function(){return!1},a.showIsResidential=function(){return!1},a.countryRequired=function(){return!0},a.showSaveEntry=function(){return!1},a.showEmailNotify=function(){return!1},a.countactNameRequired=function(){return!1},a.address1Required=function(){return!0},a.address1MaxLength=function(){return 30},a.address2Required=function(){return!1},a.address3Required=function(){return!1},a.emailRequired=function(){return!0},a.phoneRequired=function(){return!1},a.showContactsList=function(){return!1},a.showCountry=function(){return!0},a.showCountactName=function(){return!1},a.showAddress1=function(){return!0},a.showAddress2=function(){return!0},a.showAddress3=function(){return!0},a.showCity=function(){return!0},a.cityMaxLength=function(){return 30},a.showState=function(){return!0},a.showPostal=function(){return!0},a.showEmail=function(){return!0},a.showPhone=function(){return!1},a.showFax=function(){return!1},a.showLocationId=function(){return!1},a.countryDisabled=function(){return!0},a},n()}]),angular.module("upsIdentityApp.controllers").controller("FraudCtrl",["IdentityVerificationAPIService","identityErrorHandler","$rootScope","$scope","$location","$window","$http","NotificationService","UtilService","DTOService","Constants","$timeout","ScopeStack","ScreenChanger","PREPEND_STRING",function(IdentityVerificationAPIService,identityErrorHandler,$rootScope,$scope,$location,$window,$http,notification,UtilService,DTOService,Constants,$timeout,ScopeStack,ScreenChanger,PREPEND_STRING){function init(){$scope.nextUrl="",$scope.submit=0,$scope.questionsAswers={},$scope.error=0,$scope.idui={},$scope.ivuihome=!1,$scope.formObj={},$scope.SetOfLockedAuthenticationMethods=new Set,$scope.fieldValues={dateOfBirth:""},$scope.days=[Constants.DOB_DAY,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],$scope.months=[{id:0,name:Constants.DOB_MONTH},{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}],$scope.years=[],$scope.years.push(Constants.DOB_YEAR);for(var a=new Date,b=a.getFullYear()-18;b>a.getFullYear()-100;b--)$scope.years.push(b);$scope.formObj.selectedYear=Constants.DOB_YEAR,$scope.formObj.selectedMonth=$scope.months[0],$scope.formObj.selectedDay=$scope.days[0].toString(),IdentityVerificationAPIService.getview().then(function(a){var b=a.data;if(b.WasSuccessfull)if(b.Object.APMRequested)DTOService.Locale=b.Object.locale,DTOService.Location=DTOService.Locale.substring(3,5),DTOService.Language=DTOService.Locale.substring(0,2),angular.element("#PaymentModalDiv").scope().toggleCPC();else if(b.Object.EnrollmentUpdatePin)$timeout(function(){$scope.idui.step="PinToLetterActivationScreen"}),$("#IdentityModalDiv").modal("show");else{var c=b.Object,d="",e=c.phoneNumber;null!=c.phoneNumber&&(d=e.substr(e.length-4)),$scope.addressLine1=c.addressLine1,$timeout(function(){$scope.identitylists=c;for(var a=0;a<$scope.identitylists.authenticationMethods.length;a++)"QuizQuestions"==$scope.identitylists.authenticationMethods[a].Code?($scope.DisplayQuizQuestions=!0,$scope.identitylists.authenticationMethods[a].Description=$scope.pinQuestionDescription):"PinToVoice"==$scope.identitylists.authenticationMethods[a].Code?($scope.DisplayPinToVoice=!0,$scope.identitylists.authenticationMethods[a].Description=$scope.pinVoiceDescription):"PinToSMS"==$scope.identitylists.authenticationMethods[a].Code?($scope.DisplayPinToSMS=!0,$scope.identitylists.authenticationMethods[a].Description=$scope.pinSMSDescription):"PinToLetter"==$scope.identitylists.authenticationMethods[a].Code&&($scope.DisplayPinToLetter=!0,$scope.identitylists.authenticationMethods[a].Description=$scope.pinLetterDescription);$scope.last4phone=d,$scope.idui.step="optionsScreen"}),DTOService.isModal?$("#IdentityModalDiv").modal("show"):$(".modal-body .ups-date_picker_button").hide()}else{DTOService.isModal?$("#IdentityModalDiv").modal("show"):$(".modal-body .ups-date_picker_button").hide();var f=b.Object,g="";"undefined"!=identityErrorHandler.Errors[f]?(g=identityErrorHandler.Errors[f])?(g=identityErrorHandler.Errors[f].ErrorMessage,$("#identityErrorMessage").html(JSON.stringify(g))):$("#identityErrorMessage").html("We're sorry, but it seems we're experiencing technical issues."):$("#identityErrorMessage").html("Error"),$("#identityErrorMessage").scrollTop(0)}})}function resetForm(){$scope.pinmail="",$scope.pinSMS="",$scope.pinPhone="",angular.isDefined($scope.identitylists)&&angular.forEach($scope.identitylists.authenticationMethods,function(a){a.Selected=!1}),angular.isDefined($scope.quizquestionData)&&angular.forEach($scope.quizquestionData,function(a){angular.forEach(a.AnswerChoices,function(b){$scope.questionsAswers[a.QuestionId]=!1})}),"PinToLetterActivationScreen"==$scope.idui.step||"PinToLetterConfirmationScreen"==$scope.idui.step?$scope.idui.step="PinToLetterActivationScreen":$scope.idui.step="optionsScreen",$("#identityErrorMessage").html("")}function collectDataToSendMeNewCode(){return{source:"PPC_ACTIVATE"}}function callGetQuizController(){var a=collectDOBData();$scope.isLoading=!0,$http({method:"POST",url:DTOService.createURL(Constants.GetQuizQuestions),data:a}).then(function(a){$scope.isLoading=!1;var b=a.data;if(DTOService.quizquestionss=b.Object,!0===b.WasSuccessfull)if(b.Object.ErrorCode){if("MAX_AUTH_REQ_LIMIT_REACHED"==b.Object.ErrorCode||"MAX_VAL_TRY_LIMIT_REACHED"==b.Object.ErrorCode||"HISTORY_PASS"==b.Object.ErrorCode){$scope.SetOfLockedAuthenticationMethods.add("quiz"),$scope.DisplayQuizQuestions=!1,"quizQuestionScreen"==$scope.idui.step&&(3==$scope.SetOfLockedAuthenticationMethods.size?($timeout(function(){$scope.identitylists.authenticationMethods=[],$scope.identitylists.authenticationMethods=[{Code:"PinToLetter",Description:"PIN To Letter",mailCarrier:null}],$scope.DisplayPinToLetter=!0}),$("#IdentityModalDiv").modal("show")):$scope.idui.step="optionsScreen");var c=identityErrorHandler.Errors.MAX_AUTH_REQ_LIMIT_REACHED.ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(c)),$("#identityErrorMessage").scrollTop(0)}}else $scope.quizquestionData=b.Object.IDVerificationQuestions,DTOService.QuestionId=b.Object.QuestionId,$scope.idui.step="quizQuestionScreen";else{var d=b.Object;if(d)if("undefined"!=identityErrorHandler.Errors[d]){if("14101001"==d)$scope.idui.step="DOB";else if(null!=identityErrorHandler.Errors[d]){var c=identityErrorHandler.Errors[d].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(c))}else $("#identityErrorMessage").html("We're sorry, but it seems we're experiencing technical issues.");$("#identityErrorMessage").scrollTop(0)}else $("#identityErrorMessage").html("We're sorry, but it seems we're experiencing technical issues."),$("#identityErrorMessage").scrollTop(0);else $("#identityErrorMessage").html("We're sorry, but it seems we're experiencing technical issues."),$("#identityErrorMessage").scrollTop(0)}},function(a){$("#identityErrorMessage").html("Sorry Your Request has timed out"),$("#identityErrorMessage").scrollTop(0)})}function collectDOBData(){var a=$scope.formObj.selectedYear,b="";if($scope.formObj.selectedMonth&&$scope.formObj.selectedMonth.id)var b=$scope.formObj.selectedMonth.id;else b="";return{Year:a,Month:b,Day:$scope.formObj.selectedDay}}function callSuccessController(){$scope.isLoading=!0,$http({method:"POST",url:DTOService.createURL(Constants.SubmitIdentitySucess)}).then(function successCallback(response){$scope.isLoading=!1;var isIVUI_Success=!1,result=response.data;if(!0===result.WasSuccessfull){var returnURL=result.Object,clientType=result.ClientType,returnType=result.ReturnToMethod,isIVUI_Success=result.IVUI_STATUS;if($("#identityErrorMessage").html(""),resetForm(),"REDIRECT_TO_JAVASCRIPT"==returnType)if("Non_Angular"==clientType){$(".modal-backdrop").remove();var parenthesis="()",returnTofunction=returnURL.concat(parenthesis);eval(returnTofunction)}else"IV_ANDROID_SESSION_KEY"===clientType||"IV_IOS_SESSION_KEY"===clientType?window.location.href=isIVUI_Success?"https://www.ups.com/webviewCallback?didCompleteRegistration=0&didCompleteEnrollment=0&didCancel=0&didTimeout=0&didPassAuth=1":"https://www.ups.com/webviewCallback?didCompleteRegistration=0&didCompleteEnrollment=0&didCancel=1&didTimeout=0&didPassAuth=0":($(".modal-backdrop").remove(),$("#IdentityModalDiv").modal("toggle"),window[returnURL]());else $(".modal-backdrop").remove(),$window.location.href=returnURL}else $("#IdentityModalDiv").modal("toggle")},function(a){$("#identityErrorMessage").html("Sorry Your Request has timed out"),$("#identityErrorMessage").scrollTop(0)})}function closeX(){$http({method:"POST",url:DTOService.createURL(Constants.SubmitIdentitySucess)}).then(function successCallback(response){var result=response.data;if(!0===result.WasSuccessfull){var returnURL=result.Object,clientType=result.ClientType,returnType=result.ReturnToMethod;if($("#identityErrorMessage").html(""),resetForm(),"REDIRECT_TO_JAVASCRIPT"==returnType)if("Non_Angular"==clientType){$(".modal-backdrop").remove();var parenthesis="()",returnTofunction=returnURL.concat(parenthesis);eval(returnTofunction)}else"IV_ANDROID_SESSION_KEY"===clientType||"IV_IOS_SESSION_KEY"===clientType?window.location.href="https://www.ups.com/webviewCallback?didCompleteRegistration=0&didCompleteEnrollment=0&didCancel=1&didTimeout=0&didPassAuth=0":($(".modal-backdrop").remove(),window[returnURL]());else $(".modal-backdrop").remove(),$window.location.href=returnURL}else $("#IdentityModalDiv").modal("toggle")},function(a){$("#identityErrorMessage").html("Sorry Your Request has timed out"),$("#identityErrorMessage").scrollTop(0)})}function collectAnswers(){var a=$scope.questionsAswers,b=$scope.quizquestionData,c=[],d=collectDOBData(),e="";for(var f in a)if(a.hasOwnProperty(f)){for(var g=0;g<b.length;g++){var h=b[g];if(b[g].QuestionId==f)for(var i=h.AnswerChoices,j=0;j<i.length;j++)i[j].ID==a[f]&&(e=i[j].Text)}var k={QuestionID:f,AnswerID:a[f],AnswerText:e,QuestionIDGlobal:DTOService.QuestionId};c.push(k)}return{DOB:d,quizAnswer:c}}function callSubmitQuizController(){var a=collectAnswers();$scope.isLoading=!0,$http({method:"POST",data:JSON.stringify(a),url:DTOService.createURL("/IdentityVerification/SubmitQuiz")}).then(function(a){$scope.isLoading=!1;var b=a.data,a=b.Object;if(b.WasSuccessfull)$scope.firstName=a,$scope.idui.step="success";else{var c=a;if($("#submitID").hide(),"MAX_VAL_TRY_LIMIT_REACHED"==c){$scope.SetOfLockedAuthenticationMethods.add("quiz");var d=document.getElementById("02");d&&(d.parentNode.removeChild(d),$(".ups-radio-custom-label:contains(Knowledge-based quiz)").filter(function(){return $(this).children("span").length>0}).remove());var e=identityErrorHandler.Errors[14101012].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(e))}else if(null!=identityErrorHandler.Errors[c]){var e=identityErrorHandler.Errors[c].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(e))}}},function(a){$("#identityErrorMessage").html("Sorry Your Request has timed out !!!!!!"),$("#identityErrorMessage").scrollTop(0)})}function callGetPinToVoiceController(a){var b=null;"PinToVoice"==a?b={ActivationCodeName:"VOICE"}:"PinToSMS"==a?b={ActivationCodeName:"SMS"}:"PinToLetter"==a&&(b={ActivationCodeName:"USPS"}),$scope.isLoading=!0,$http({method:"POST",url:DTOService.createURL($scope.nextUrl),data:b}).then(function(a){$scope.isLoading=!1;var c=a.data;if(DTOService.quizquestionss=c.Object,!0===c.WasSuccessfull){var d=c.Object.ActivationMethod;if("SMS"==d?$scope.idui.step="PinToSMSScreen":"VOICE"==d&&($scope.idui.step="PinToVoiceScreen"),c.Object.IdentityActivationCodeResponseType&&"AUTH_MATCH_FAIL"==c.Object.IdentityActivationCodeResponseType){if("VOICE"==b.ActivationCodeName?($scope.SetOfLockedAuthenticationMethods.add("voice"),$scope.DisplayPinToVoice=!1):"SMS"==b.ActivationCodeName&&($scope.SetOfLockedAuthenticationMethods.add("sms"),$scope.DisplayPinToSMS=!1),"undefined"!=identityErrorHandler.Errors[f]){var e=identityErrorHandler.Errors[14101004].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(e))}else $("#identityErrorMessage").html("Phone or address could not be matched with the information from vendor");$("#identityErrorMessage").scrollTop(0)}}else{var f=c.Object;if("undefined"!=identityErrorHandler.Errors[f])if(identityErrorHandler.Errors[f]){var e=identityErrorHandler.Errors[f].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(e))}else $("#identityErrorMessage").html("We're sorry, but it seems we're experiencing technical issues.");else $("#identityErrorMessage").html("Error");$("#identityErrorMessage").scrollTop(0)}},function(a){$("#identityErrorMessage").html("Internal Error - Please Try again !!!!!!"),$("#identityErrorMessage").scrollTop(0)})}function callSubmitControllerStub(){$location.path("/mychoiceconfirmation/")}function callSubmitPinToSMSController(){var a=null;"PinToVoiceScreen"==$scope.idui.step?a={ActivationCodeType:"VOICE",ActivationCodeValue:$scope.pinPhone}:"PinToSMSScreen"==$scope.idui.step?a={ActivationCodeType:"SMS",ActivationCodeValue:$scope.pinSMS}:"PinToLetterActivationScreen"==$scope.idui.step&&(a={ActivationCodeType:"USPS",ActivationCodeValue:$scope.pinmail}),$scope.isLoading=!0,$http({method:"POST",url:DTOService.createURL("/identityverification/ValidateActivationCode"),data:a}).then(function(b){$scope.isLoading=!1;var c=b.data;if(c.WasSuccessfull){var d=c.Object;$scope.firstName=d,$scope.idui.step="success"}else{if("MAX_VAL_TRY_LMIT_REACHED"==c.Object){"VOICE"==a.ActivationCodeType?($scope.SetOfLockedAuthenticationMethods.add("voice"),$scope.DisplayPinToVoice=!1):"SMS"==a.ActivationCodeType&&($scope.SetOfLockedAuthenticationMethods.add("sms"),$scope.DisplayPinToSMS=!1);var e=identityErrorHandler.Errors[14101012].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(e))}else{var f=c.Object;if("14101004"==f)$scope.SetOfLockedAuthenticationMethods.add("voice"),$scope.DisplayPinToVoice=!1,$scope.SetOfLockedAuthenticationMethods.add("sms"),$scope.DisplayPinToSMS=!1;else if("undefined"!=identityErrorHandler.Errors[f]){var e=identityErrorHandler.Errors[f].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(e))}else $("#identityErrorMessage").html("Error");$("#identityErrorMessage").scrollTop(0)}}},function(a){$("#identityErrorMessage").html("Sorry Your Request has timed out !!!!!!"),
$("#identityErrorMessage").scrollTop(0)})}init(),$scope.updateDate=function(a){"year"==a?($scope.formObj.selectedMonth=$scope.months[0],$scope.formObj.selectedDay=$scope.days[0].toString()):"month"==a&&($scope.formObj.selectedDay=$scope.days[0].toString()),$scope.formObj.selectedYear&&$scope.formObj.selectedMonth&&$scope.formObj.selectedDay&&($scope.fieldValues.dateOfBirth=new Date($scope.formObj.selectedYear,$scope.formObj.selectedMonth.id-1,$scope.formObj.selectedDay))},$scope.backStep=function(){3==$scope.SetOfLockedAuthenticationMethods.size&&($timeout(function(){$scope.identitylists.authenticationMethods=[],$scope.identitylists.authenticationMethods=[{Code:"PinToLetter",Description:"PIN To Letter",mailCarrier:null}],$scope.DisplayPinToLetter=!0}),$("#IdentityModalDiv").modal("show")),$("#submitID").show(),$scope.idui.step="optionsScreen",$scope.pinSMS="",$scope.pinPhone="",$scope.pinmail="",$scope.formObj.selectedYear=Constants.DOB_YEAR,$scope.formObj.selectedMonth=$scope.months[0],$scope.formObj.selectedDay=$scope.days[0].toString(),$scope.submit=0,$("#identityErrorMessage").html(""),angular.isDefined($scope.identitylists)&&angular.forEach($scope.identitylists.authenticationMethods,function(a){a.Selected=!1}),angular.isDefined($scope.quizquestionData)&&angular.forEach($scope.quizquestionData,function(a){angular.forEach(a.AnswerChoices,function(b){$scope.questionsAswers[a.QuestionId]=!1})})},$scope.close=function(){callSuccessController()},$scope.closeX=function(){closeX()},$scope.nextStep=function(){$("#identityErrorMessage").html("");var a=$("input[type=radio][name=security]:checked").attr("id");if($scope.submit=1,3==$scope.SetOfLockedAuthenticationMethods.size&&"PinToLetter"!=a&&"PinToSMSScreen"!=$scope.idui.step&&"PinToVoiceScreen"!=$scope.idui.step)$timeout(function(){$scope.identitylists.authenticationMethods=[],$scope.identitylists.authenticationMethods=[{Code:"PinToLetter",Description:"PIN To Letter",mailCarrier:null}],$scope.DisplayPinToLetter=!0}),$("#IdentityModalDiv").modal("show");else if(1==$scope.ivuihome)$scope.idui.step="optionsScreen",$scope.ivuihome=!1;else if("optionsScreen"===$scope.idui.step)"QuizQuestions"===a?($scope.nextUrl=Constants.GetQuizQuestions,$scope.idui.step="quizQuestionScreen",callGetQuizController()):"PinToSMS"===a?($scope.nextUrl=Constants.GetPinToPhoneSMS,$scope.idui.step="PinToSMSScreen",callGetPinToVoiceController("PinToSMS")):"PinToVoice"===a?($scope.nextUrl=Constants.GetPinToPhoneVoice,$scope.idui.step="PinToVoice",callGetPinToVoiceController("PinToVoice")):"06"===a?($scope.nextUrl="/identityverification/GetPinToEmail",$scope.idui.step="PinToLetterActivationScreen",callGetPinToEmailController(a)):"PinToLetter"===a&&($scope.nextUrl=Constants.GetPinToLetter,$scope.idui.step="PinToLetterConfirmationScreen",callGetPinToVoiceController("PinToLetter"));else if("quizQuestionScreen"===$scope.idui.step){var b={site_area:"IDUI",site_sub_area:"notYetEnrolled",referring_url:"notYetEnrolled",step:"verify_identity_quiz",page_name:"modal_verify_identity_quiz",page_id:"verify_identity_quiz",completion_event:""};"undefined"!=typeof utag&&void 0!==utag&&utag.view($.extend(utag_data,b),null),callSubmitQuizController()}else if("DOB"===$scope.idui.step)$scope.nextUrl=Constants.GetQuizQuestions,$scope.idui.step="DOB",callGetQuizController();else if("success"==$scope.idui.step||"fail"==$scope.idui.step){var b={site_area:"IDUI",site_sub_area:"notYetEnrolled",referring_url:"notYetEnrolled",step:"identity_verified",page_name:"modal_identity_verified",page_id:"identity_verified",completion_event:""};"undefined"!=typeof utag&&void 0!==utag&&utag.view($.extend(utag_data,b),null),callSuccessController()}else"PinToSMSScreen"==$scope.idui.step?callSubmitPinToSMSController():"PinToVoiceScreen"==$scope.idui.step?callSubmitPinToSMSController():"PinToLetterActivationScreen"==$scope.idui.step&&callSubmitPinToSMSController()},$scope.SendNewCodeModal=function(){if($scope.SendNewCodeResponse="reset",$("#identityErrorMessage").html(""),!$scope.isLoading){var a=collectDataToSendMeNewCode();a&&($scope.isLoading2=!0,$http({method:"POST",url:DTOService.createURL(Constants.SendMeNewCode),data:a}).then(function(a){$scope.isLoading2=!1;var b=a.data;if(!0===b.WasSuccessfull)$scope.SendNewCodeResponseModal="success";else{var c=b.Object;if("9651082"==c)$scope.StartOverResponseModal="success";else if("9651094"==c)$("#identityErrorMessage").html(JSON.stringify("We are unable to verify your identity. Try the request again in 24 hours."));else if(identityErrorHandler.Errors[c]){var d=identityErrorHandler.Errors[c].ErrorMessage;$("#identityErrorMessage").html(JSON.stringify(d))}else $scope.SendNewCodeResponseModal="fail";$("#identityErrorMessage").scrollTop(0)}},function(a){$("#identityErrorMessage").html("Internal Error - Please Try again !!!!!!"),$("#identityErrorMessage").scrollTop(0)}))}}}]),angular.module("upsIdentityApp.controllers").controller("IDENTITY.InitCtrl",["$scope","$rootScope","$routeParams","$location","$route","Constants","$http","$window","DTOService",function($scope,$rootScope,$routeParams,$location,$route,Constants,$http,$window,DTOService){function isURL_FullPage_or_Modal(){if(url=$location.$$absUrl.toLowerCase(),DTOService.ClientService||(DTOService.Locale=$location.search().loc,DTOService.ClientID=$location.search().ClientID),url.indexOf("#/")<0)if(url.indexOf("identityverification/fullpage/aia")>0){DTOService.isModal=!1;var a=url.slice(url.indexOf("?")+1),b=a.substring(25,31);DTOService.Locale=null!=b?b:"en_US"}else if(url.indexOf("identityverification/fullpage/reportfraud")>0||url.indexOf("/identityverification/mychoiceactivate")>0||url.indexOf("identityverification/fullpage/identityverification")>0){DTOService.isModal=!1;var a=url.slice(url.indexOf("?")+1),b=a.substring(4,9);if(DTOService.Locale=null!=b?b:"en_US",url.indexOf("?")>-1){var a=url.slice(url.indexOf("?")+1),b=a.substring(4,9);DTOService.Locale=null!=b?b:"en_US"}}else url.indexOf("identityverification/")>0||url.indexOf("identityverification")>0?DTOService.Locale="en_US":url.indexOf("identityverification/mychoiceactivate")>0?DTOService.isModal=!1:DTOService.isModal=!0;else DTOService.isModal=!0}function getParam(a){var b={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(a,c,d){b[c]=void 0!==d?d:""}),a?b[a]?b[a]:null:b}function getUrlParameter(a){var b,c,d=url,e=d.split("&");for(c=0;c<e.length;c++)if(b=e[c].split("="),b[0]===a)return void 0===b[1]||b[1]}var url="";isURL_FullPage_or_Modal(),$rootScope.$watch("isAIAClosing",function(){if($rootScope.isAIAClosing){var clientid=DTOService.ClientID;$rootScope.isAIAClosing=!1,$http({method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(clientid),url:DTOService.createURL(Constants.CloseAiaVerification)}).then(function successCallback(response){$scope.invoice_number="",$scope.invoiceDate="",$scope.charges="",$scope.controlNumber="";var result=response.data;if(!0===result.WasSuccessfull)if("VIP"==result.ClientType){var returnToVIP="https://www.ups.com/vip/view?loc="+DTOService.Locale;$window.location.href=returnToVIP}else{var returnURL=result.Object,clientType=result.ClientType,returnType=result.ReturnToMethod;if("REDIRECT_TO_JAVASCRIPT"==returnType)if("Non_Angular"==clientType){$(".modal-backdrop").remove();var parenthesis="()",returnTofunction=returnURL.concat(parenthesis);eval(returnTofunction)}else $(".modal-backdrop").remove(),$("#AIAModalDiv").modal("hide"),location.reload(!0);else $(".modal-backdrop").remove(),$window.location.href=returnURL}else $("#IdentityModalDiv").modal("toggle")},function(a){$("#identityErrorMessage").html("Sorry Your Request has timed out")})}}),$scope.$watch("finishedLoading",function(){DTOService.isModal||(document.body.style.display="")})}]);


