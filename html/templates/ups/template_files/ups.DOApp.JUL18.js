"use strict";function gigyaResponseDOAPP(a){"string"==typeof a&&(a=JSON.parse(a)),angular.element("#SignupDiv").scope().populateGigyaObject(a)}function identityResponseDOAPP(){if($.doappShouldGatherPaymentInfo)angular.element("#ChoosePaymentDiv").scope().toggleChoosePaymentModal("#AddressDiv");else{angular.element("#MyChoiceConfirmationDiv").scope().completeMyChoiceEnrollment(!1)}}function identityResponseDOAPP_MyChoiceExpansion(){angular.element("#MyChoiceConfirmationDiv").scope().completeMyChoiceEnrollment(!0)}function aiaCallBack(){angular.element("#DoAppAddExistingAccountDiv").scope().aiaCallback()}function openAccountCallBack(){angular.element("#PickupOptionsDiv").scope().OpenAccountCallback()}function addExistingAccountCallBack(){angular.element("#InitDiv").scope().aiaCallBack()}function clearDOAppUTAG(){"undefined"!=typeof utag_data&&void 0!==utag_data&&(utag_data.gross_revenue="",utag_data.net_revenue="",utag_data.currency="",utag_data.journey_step_number="",utag_data.shipping_package_count="",utag_data.link_name="",utag_data.link_page="",utag_data.link_type="",utag_data.field_name="",utag_data.form_name="",utag_data.form_intent="",utag_data.event_id="0")}$(document).keyup(function(a){27===a.keyCode&&$(".modal").modal("hide")});var UPS_DO_APP=angular.module("upsDOApp",["ui.bootstrap","upsDOApp.controllers","upsDOApp.directives","upsDoApp.filters","upsDoApp.services","ngRoute","upsIdentityApp","ngIdle","upsCacModule"]);UPS_DO_APP.constant("API_SERVICE","local"),UPS_DO_APP.constant("MOCK_BASE_URL","app_assets/config/"),UPS_DO_APP.constant("TEMPLATE_URL","app_assets/templates/"),UPS_DO_APP.factory("xsrfCheck",[function(){return{responseError:function(a){if(!a.status||400!==a.status)return a;window.location.replace("https://www.ups.com")}}}]),UPS_DO_APP.config(["$sceDelegateProvider","IdleProvider","WHITE_LIST",function(a,b,c){a.resourceUrlWhitelist(c),b.idle(1200)}]),UPS_DO_APP.config(function(){}).run(["$http","doappService","doappErrorHandler","$location","PREPEND_STRING","Idle",function(a,b,c,d,e,f){c.Errors=[],b.VAT_REQUIRED=[],b.VAT_OPTIONAL=[],b.VAT_NOT_NEEDED=[],b.VAT_CERTIFIED_CITY_LIST=[],f.watch(),b.IsAppClosing=!0}]),UPS_DO_APP.config(["$routeProvider","$locationProvider","PREPEND_STRING",function(a,b,c){a.when("/doapp/register/",{templateUrl:c+"/doapp/app_assets/SignUp.html"}).when("/doapp/registermyc/",{templateUrl:c+"/doapp/app_assets/SignUpMyChoice.html"}).when("/doapp/registermycpremium/",{templateUrl:c+"/doapp/app_assets/SignUpMyChoice.html"}).when("/doapp/registeroa/",{templateUrl:c+"/doapp/app_assets/SignUpOpenAccount.html"}).when("/doapp/requestnotifications/",{templateUrl:c+"/doapp/app_assets/AddNotifications.html"}).when("/doapp/mychoicepremiumconfirmation/",{templateUrl:c+"/doapp/app_assets/MyChoicePremiumConfirmation.html"}).when("/doapp/mychoicestandardconfirmation/",{templateUrl:c+"/doapp/app_assets/upsStandardMyChoiceConfirmation.html"}).when("/doapp/addpickup/",{templateUrl:c+"/doapp/app_assets/Pickup.html"}).when("/doapp/addexistingaccount/",{templateUrl:c+"/doapp/app_assets/AddExistingAccount.html"}).when("/doapp/accountaia/",{templateUrl:c+"/doapp/app_assets/AccountAIA.html"}).when("/doapp/hazmatchecklist/",{templateUrl:c+"/doapp/app_assets/HazmatChecklist.html"}).when("/doapp/accepttermmodal/",{templateUrl:c+"/doapp/app_assets/AcceptMyChoiceTerms.html"}).when("/doapp/addpromo/",{templateUrl:c+"/doapp/app_assets/AddPromo.html"}).when("/doapp/",{})}]).run(["$rootScope","doappService","doappConstants",function(a,b,c){function d(){b.isSignUpFlow=!1,b.isMyChoiceFlow=!1,b.isMyChoicePremiumFlow=!1,b.isOpenAccountFlow=!1,b.isPickupFlow=!1,b.isAddNotificationFlow=!1,b.isPickupFlow=!1,b.isHazmatChecklistFlow=!1,b.isAddPromoFlow=!1,b.isPremiumConfirmationFlow=!1,b.isDefaultRoute=!1}a.$on("$routeChangeSuccess",function(a,e){d(),e.$$route&&e.$$route.originalPath&&("/doapp/register"===e.$$route.originalPath||"/doapp/register/"===e.$$route.originalPath?(b.entryPoint=c.SignUp,b.isSignUpFlow=!0):"/doapp/registermyc"===e.$$route.originalPath||"/doapp/registermyc/"===e.$$route.originalPath?(b.entryPoint=c.SignUpMyChoice,b.isMyChoiceFlow=!0,b.isMyChoicePremiumFlow=!1):"/doapp/registeroa"===e.$$route.originalPath||"/doapp/registeroa/"===e.$$route.originalPath?(b.entryPoint=c.OpenAccount,b.isOpenAccountFlow=!0):"/doapp/requestnotifications"===e.$$route.originalPath||"/doapp/requestnotifications/"===e.$$route.originalPath?(b.entryPoint=c.AddNotifications,b.isAddNotificationFlow=!0):"/doapp/registermycpremium"===e.$$route.originalPath||"/doapp/registermycpremium/"===e.$$route.originalPath?(b.entryPoint=c.SignUpMyChoicePremium,b.isMyChoiceFlow=!0,b.isMyChoicePremiumFlow=!0):"/doapp/mychoiceconfirmation"===e.$$route.originalPath||"/doapp/mychoiceconfirmation/"===e.$$route.originalPath?(b.entryPoint=c.MyChoiceConfirmation,b.isMyChoiceFlow=!0):"/doapp/addpickup"===e.$$route.originalPath||"/doapp/addpickup/"===e.$$route.originalPath?(b.entryPoint=c.Pickup,b.isPickupFlow=!0):"/doapp/hazmatchecklist"===e.$$route.originalPath||"/doapp/hazmatchecklist/"===e.$$route.originalPath?(b.entryPoint=c.HazmatChecklist,b.isHazmatChecklistFlow=!0):"/doapp/addexistingaccount"===e.$$route.originalPath||"/doapp/addexistingaccount/"===e.$$route.originalPath?(b.entryPoint=c.AddexistingAccount,b.isAddExistingAccountFlow=!0):"/doapp/addpromo"===e.$$route.originalPath||"/doapp/addpromo/"===e.$$route.originalPath?(b.entryPoint=c.AddPromo,b.isAddPromoFlow=!0):"/doapp/mychoicepremiumconfirmation"===e.$$route.originalPath||"/doapp/mychoicepremiumconfirmation/"===e.$$route.originalPath?(b.entryPoint=c.MyChoicePremiumConfirmation,b.isPremiumConfirmationFlow=!0):"/doapp"!==e.$$route.originalPath&&"/doapp/"!==e.$$route.originalPath||(b.isDefaultRoute=!0),b.isModalFlow=!0)})}]),window.UPS_app={getAngularService:function(a){var b=document.querySelector("[data-ng-controller]")||document.querySelector("[ng-controller]"),c=angular.element(b),d=c.injector();return d?d.get(a):null}},angular.module("upsDOApp.controllers",[]).controller("DOAPP.InitCtrl",["$scope","$rootScope","doappService","$routeParams","$location","$route","doappConstants","$http","$window","doappScreenLogger","Idle","doappUtilService","$timeout","doappScreenChanger",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a){h({method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(j.log),url:c.createURL(g.CloseDoapp)}).then(function(b){a(b&&b.data?b.data.Object:"")},function(a){c.errorCallbackReponse=a,c.errorCode="BACK_END_DOWN"})}function p(){var a=e.$$absUrl.toLowerCase();a.indexOf("#/doapp")<0&&(a.indexOf("doapp/signupmychoicepremium")>0?(c.entryPoint=g.SignUpMyChoice,c.isMyChoiceFlow=!0,c.isMyChoicePremiumFlow=!0,c.isModalFlow=!1):a.indexOf("doapp/signupmychoice")>0?(c.entryPoint=g.SignUpMyChoicePremium,c.isMyChoiceFlow=!0,c.isMyChoicePremiumFlow=!1,c.isModalFlow=!1):a.indexOf("doapp/signupopenaccount")>0?(c.entryPoint=g.OpenAccount,c.isOpenAccountFlow=!0,c.isModalFlow=!1):a.indexOf("doapp/pickup")>0?(c.entryPoint=g.Pickup,c.isPickupFlow=!0,c.isModalFlow=!1):a.indexOf("doapp/mychoiceconfirmation")>0?(c.entryPoint=g.MyChoiceConfirmation,c.isMyChoiceFlow=!0,c.isModalFlow=!1):a.indexOf("doapp/addnotifications")>0?(c.entryPoint=g.AddNotifications,c.isAddNotificationFlow=!0,c.isModalFlow=!1):a.indexOf("doapp/signup")>0?(c.entryPoint=g.SignUp,c.isSignUpFlow=!0,c.isModalFlow=!1):a.indexOf("doapp/addexistingaccount")>0?(c.entryPoint=g.AddExistingAccount,c.isAddExistingAccountFlow=!0,c.isModalFlow=!1):a.indexOf("doapp/addpromo")>0&&(c.entryPoint=g.AddPromo,c.isAddPromoFlow=!0,c.isModalFlow=!1))}function q(){return c.isSignUpFlow?"Sign up":c.isMyChoiceFlow?"notYetEnrolled":c.isOpenAccountFlow?"OpenAccount":c.isAddExistingAccountFlow?"AIA":""}if(b.isClosing=!1,b.tcomCountries=["ES","SI","UA","RU"],b.flowData={didCompleteRegistration:!1,didCompleteEnrollment:!1,didTimeout:!1,didCancel:!1},window.location&&window.location.href&&window.location.href.indexOf("?")>0?b.fullURLParameters=window.location.href.substring(window.location.href.indexOf("?")):b.fullURLParameters="",a.updateQueryString=function(a,b,c){c||(c=window.location.href);var d,e=new RegExp("([?&])"+a+"=.*?(&|#|$)(.*)","gi");if(e.test(c))return void 0!==b&&null!==b?c.replace(e,"$1"+a+"="+b+"$2$3"):(d=c.split("#"),c=d[0].replace(e,"$1$3").replace(/(&|\?)$/,""),void 0!==d[1]&&null!==d[1]&&(c+="#"+d[1]),c);if(void 0!==b&&null!==b){var f=-1!==c.indexOf("?")?"&":"?";return d=c.split("#"),c=d[0]+f+a+"="+b,void 0!==d[1]&&null!==d[1]&&(c+="#"+d[1]),c}return c},d.loc&&(5!==d.loc.length||"_"!==d.loc.substring(2,3))){d.loc="en_US";var r=a.updateQueryString("loc","en_US");window.location=r}a.$watch("finishedLoading",function(){c.isAddExistingAccountFlow&&$(g.AddExistingAccountDiv).length?angular.element(g.AddExistingAccountDiv).scope().toggleAddExistingAccountScreen():$(g.SignUpDiv).length?angular.element(g.SignUpDiv).scope().toggleModal():b.shouldContactCS?n.changeScreen(g.InitStart,g.ContactCSDiv,c.isModalFlow):c.isAddPromoFlow&&$(g.promoChoosePaymentDiv).length?angular.element(g.promoChoosePaymentDiv).scope().toggleAddPromoScreen():c.isPremiumConfirmationFlow&&$(g.ChoosePaymentDiv).length&&angular.element(g.ChoosePaymentDiv).scope().toggleChoosePaymentModal()}),b.$watch("displayFullPage",function(){!0===b.displayFullPage&&m(function(){document.body.style.display=""})}),c.prepopData={},c.SignUpData={},c.ClientID=d.clientId||"00",b.isModalFlow=c.isModalFlow;var s=function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d];if(e.indexOf("=")){var f=e.split("=");if(f[0]===a){return decodeURIComponent(f[1])}}}return""};if(c.Locale?void 0!==d.loc&&c.Locale!==d.loc&&(c.Locale=d.loc):c.Locale=d.loc||s("loc")||"en_US",5!==c.Locale.length||"_"!==c.Locale.substring(2,3)){c.Locale="en_US";var r=a.updateQueryString("loc","en_US");window.location=r}c.Location=c.Locale.substring(3,5).toUpperCase(),b.location=c.Location,c.Language=c.Locale.substring(0,2),c.isENUS="en_us"===c.Locale.toLowerCase(),c.isENPR="en_pr"===c.Locale.toLowerCase(),c.isUS="us"===c.Location.toLowerCase(),c.isCA="ca"===c.Location.toLowerCase(),c.isPR="pr"===c.Location.toLowerCase(),c.isCN="cn"===c.Location.toLowerCase(),c.isMX="mx"===c.Location.toLowerCase(),b.isES="es"===c.Location.toLowerCase(),b.urlParameters={},b.urlParameters.loc=c.Locale,b.urlParameters.returnTo=d.ReturnTo||d.returnTo||d.returnto||s("ReturnTo")||s("returnTo")||s("returnto"),b.urlParameters.loginReturnTo=d.loginReturnTo||s("loginReturnTo"),b.urlParameters.jsCallBack=d.jsCallBack||s("jsCallBack"),b.urlParameters.clientId=d.ClientId||d.clientId||s("ClientId")||s("clientId"),b.urlParameters.promoCode=d.promoCode||s("promoCode"),b.urlParameters.trackingNumber=d.trackingNumber||s("trackingNumber"),b.urlParameters.companyOptions=d.companyOptions||s("companyOptions"),b.isAndoroidNative="15"===b.urlParameters.clientId,b.isIOSNative="16"===b.urlParameters.clientId,b.isNif=!1,b.promoCode=b.urlParameters.promoCode,b.promoCode&&b.promoCode.length>=3&&(b.discountLink="https://www.ups.com/media/"+c.Language+"/"+b.promoCode.substring(0,3)+"_US.pdf"),b.trackingNumber=b.urlParameters.trackingNumber||b.clientServiceTrackingNumber,b.trackingNumber&&l.getTrackingNumberDetails(b.trackingNumber),b.masterEmailPattern=/^[a-zA-Z-0-9._-]+@[a-zA-Z0-9-_][a-zA-Z0-9-_.]+\.[a-zA-Z-_.]{2,10}$/,b.$watch("isClosing",function(){b.isClosing&&(c.isClosingError=!1,o(function(a){if(b.isAndoroidNative||b.isIOSNative){var d=l.createWebViewCallback(b.flowData);window.location.href=d}else{var e=b.urlParameters.jsCallBack||c.clientCallback;if(e){if("function"==typeof e)try{b.isIOSNative&&windowRef?windowRef.callBack():e()}catch(h){c.isClosingError=!0}else if("string"==typeof e)try{window[e]()}catch(h){c.isClosingError=!0}}else if(a=b.urlParameters&&b.urlParameters.clientId&&"04"==b.urlParameters.clientId?b.urlParameters.returnTo+"="+b.urlParameters.loc:a||b.urlParameters.returnTo)i.location.href=a;else{if(c.isModalFlow)if(c.IsServiceCall)void 0===c.modalInstance?$("#ups-my_choice_conf").modal("toggle"):c.modalInstance.close("a"),$(".modal-backdrop").remove(),i.location.href="#";else if($(".modal-backdrop").remove(),c.Registered)i.location.href=document.referrer;else{var f=$("#doAppDiv .in");if(f[0]){var g=f[0].id;g&&(g="#"+g,$(g).modal("hide"))}else i.location.href="#/doapp"}else i.location.href="https://www.ups.com";b.isClosing=!1}}}),b.isClosing=!1)}),p(),a.$on("$routeChangeStart",function(a,b,d){c.next=b,c.current=d,void 0===b&&(i.location.href=document.referrer)}),b.$on("configLoaded",function(){k.setIdle(c.appConfig.idleTimeout)}),a.$on("IdleStart",function(){if(b.flowData.didTimeout=!0,b.isAndoroidNative||b.isIOSNative){var a=l.createWebViewCallback(b.flowData);window.location.href=a}else h({method:"POST",data:JSON.stringify(""),url:c.createURL(g.Logout)}).then(function(a){c.callbackResponse=a,i.location="/doapp/timeout?loc="+c.Locale},function(a){c.errorCallbackReponse=a,c.errorCode="BACK_END_DOWN"})}),$.siteArea="Doapp",$.pageType=c.isModalFlow?"modal_":"screen_",$.referringUrl=c.isModalFlow?c.IsServiceCall?window.location.pathname:window.location.href:"",$.subArea=q(),$.doappShouldGatherPaymentInfo=!1,"undefined"!=typeof utag_data&&void 0!==utag_data&&(utag_data.gross_revenue="",utag_data.net_revenue="",utag_data.currency="",utag_data.journey_step_number="",utag_data.shipping_package_count="",utag_data.link_name="",utag_data.link_page="",utag_data.link_type="",utag_data.field_name="",utag_data.form_name="",utag_data.form_intent="",utag_data.event_id="0")}]);


if(function(a,b){"use strict";function c(){function a(a,b,d,e){return function(g,h,i){var j=i.$normalize(b);!c[j]||f(h,d)||i[j]||g.$watch(i[a],function(a){a=e?!a:!!a,h.attr(b,a)})}}var c={ariaHidden:!0,ariaChecked:!0,ariaReadonly:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeydown:!0,bindRoleForClick:!0};this.config=function(a){c=b.extend(c,a)},this.$get=function(){return{config:function(a){return c[a]},$$watchExpr:a}}}var d=b.module("ngAria",["ng"]).provider("$aria",c),e=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],f=function(a,b){if(-1!==b.indexOf(a[0].nodeName))return!0};d.directive("ngShow",["$aria",function(a){return a.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function(a){return a.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function(a){return a.$$watchExpr("ngValue","aria-checked",e,!1)}]).directive("ngChecked",["$aria",function(a){return a.$$watchExpr("ngChecked","aria-checked",e,!1)}]).directive("ngReadonly",["$aria",function(a){return a.$$watchExpr("ngReadonly","aria-readonly",e,!1)}]).directive("ngRequired",["$aria",function(a){return a.$$watchExpr("ngRequired","aria-required",e,!1)}]).directive("ngModel",["$aria",function(a){function b(b,c,d,g){return a.config(c)&&!d.attr(b)&&(g||!f(d,e))}function c(a,b){return!b.attr("role")&&b.attr("type")===a&&!f(b,e)}function d(a,b){var c=a.type,d=a.role;return"checkbox"===(c||d)||"menuitemcheckbox"===d?"checkbox":"radio"===(c||d)||"menuitemradio"===d?"radio":"range"===c||"progressbar"===d||"slider"===d?"range":""}return{restrict:"A",require:"ngModel",priority:200,compile:function(e,f){var g=d(f,e);return{post:function(d,e,f,h){function i(){return h.$modelValue}function j(a){var b=f.value==h.$viewValue;e.attr("aria-checked",b)}function k(){e.attr("aria-checked",!h.$isEmpty(h.$viewValue))}var l=b("tabindex","tabindex",e,!1);switch(g){case"radio":case"checkbox":c(g,e)&&e.attr("role",g),b("aria-checked","ariaChecked",e,!1)&&d.$watch(i,"radio"===g?j:k),l&&e.attr("tabindex",0);break;case"range":if(c(g,e)&&e.attr("role","slider"),a.config("ariaValue")){var m=!e.attr("aria-valuemin")&&(f.hasOwnProperty("min")||f.hasOwnProperty("ngMin")),n=!e.attr("aria-valuemax")&&(f.hasOwnProperty("max")||f.hasOwnProperty("ngMax")),o=!e.attr("aria-valuenow");m&&f.$observe("min",function(a){e.attr("aria-valuemin",a)}),n&&f.$observe("max",function(a){e.attr("aria-valuemax",a)}),o&&d.$watch(i,function(a){e.attr("aria-valuenow",a)})}l&&e.attr("tabindex",0)}!f.hasOwnProperty("ngRequired")&&h.$validators.required&&b("aria-required","ariaRequired",e,!1)&&f.$observe("required",function(){e.attr("aria-required",!!f.required)}),b("aria-invalid","ariaInvalid",e,!0)&&d.$watch(function(){return h.$invalid},function(a){e.attr("aria-invalid",!!a)})}}}}}]).directive("ngDisabled",["$aria",function(a){return a.$$watchExpr("ngDisabled","aria-disabled",e,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(a,b,c,d){b.attr("aria-live")||b.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(a,b){return{restrict:"A",compile:function(c,d){var g=b(d.ngClick,null,!0);return function(b,c,d){f(c,e)||(a.config("bindRoleForClick")&&!c.attr("role")&&c.attr("role","button"),a.config("tabindex")&&!c.attr("tabindex")&&c.attr("tabindex",0),!a.config("bindKeydown")||d.ngKeydown||d.ngKeypress||d.ngKeyup||c.on("keydown",function(a){function c(){g(b,{$event:a})}var d=a.which||a.keyCode;32!==d&&13!==d||b.$apply(c)}))}}}}]).directive("ngDblclick",["$aria",function(a){return function(b,c,d){!a.config("tabindex")||c.attr("tabindex")||f(c,e)||c.attr("tabindex",0)}}])}(window,window.angular),$.isProduction=!0,"undefined"==typeof gigya){var script=document.createElement("script");script.type="text/javascript",script.src="https://cdns.gigya.com/JS/gigya.js?apikey=3_iCVSE9Ao6y9HITzXCDEN85YkhAnYbAuW1a6LOUnRKPEcwU_QCjFz7q_a1qfN5Vgd",$("body").append(script)}UPS_DO_APP.constant("IS_DEVELOPMENT",!1),UPS_DO_APP.constant("ENV","PROD"),UPS_DO_APP.constant("PREPEND_STRING",""),UPS_DO_APP.constant("WHITE_LIST",["self","https://wwwapps.ups.com/**"]);


UPS_DO_APP.constant("APAC_CONSTANTS",{VALID_LOCALES:["AU","CN","HK","IN","KR","MO","MY","JP","SG","TH","TW","VN"],VALID_CITIES_CN:["Beijing","Changzhou","Chengdu","Dalian","Dongguan","Foshan","Fuzhou","Guangzhou","Hangzhou","Hefei","Huizhou","Jiangmen","Jiaxing","Kunshan","Nanjing","Nantong","Ningbo","Qingdao","Quanzhou","Shanghai","Shaoxing","Shenyang","Shenzhen","Suzhou","Tianjin","Wenzhou","Wuhan","Wuxi","Xiamen","Xi'an","Zhengzhou","Zhongshan","Zhuhai"]}),UPS_DO_APP.constant("BILLING_CENTER_CONSTANTS",{BILLING_CENTER_COUNTRIES:["AU","AT","BE","CA","DK","FI","FR","DE","HK","IE","IT","MX","NL","NO","PL","PR","SG","ES","SE","CH","GB"]}),UPS_DO_APP.constant("BUSINESS_DOCS_CONSTANTS",{AU:["Business License","Copy of Identification Card"],CN:["Business License"],HK:["Business License"],IN:["Business License","PAN Card Copy","Importer-Exporter Code Registration Certificate"],KR:["Business License"],MO:["Business License"],MY_1:["Form 9 (Perakuan Perbadanan Syarikat Sendirian) or Form 13 (Perakuan Perbadanan Atas Pertukaran nama Syarikat)","Form 24 (Return of Allotment of Shares)","Form 49 (Particular of Register of Directors, Managers & Secretaries and change of Particulars)"],MY_2:["Form 9 (Perakuan Perbadanan Syarikat Sendirian) or Form 13 (Perakuan Perbadanan Atas Pertukaran nama Syarikat)","Form 24 (Return of Allotment of Shares)","Form 49 (Particular of Register of Directors, Managers & Secretaries and change of Particulars)"],MY_3:["SSM certificate (Suruhanjaya Syarikat Malaysia)","Applicant’s Identification Card (IC) of company owner"],MY_4:["SSM certificate (Suruhanjaya Syarikat Malaysia)","Applicant’s Identification Card (IC) of company owner"],JP:["Business License"],SG:["Business License"],TH:["Business License","Customer Financial Statement","Registration Statement"],TW:["Business License"],VN:["Business License"]}),UPS_DO_APP.constant("DOA_CONSTANTS",{SHIP_CLIENT_ID:"01",TRACK_CLIENT_ID:"02",DCR_CLIENT_ID:"03",ORDER_SUPPLIES_CLIENT_ID:"04",OPEN_ACCOUNT_CLIENT_ID:"05",PPC_CLIENT_ID:"06",PICKUP_CLIENT_ID:"07",MCDI_CLIENT_ID:"08",DOA_CLIENT_ID:"DOAPP",PAYMENT_TYPE_ACCOUNT:"ACCOUNT",PAYMENT_TYPE_CREDIT_CARD:"PAYMENTCARD",DOA_SESSION_KEY:"DOAPP_SESSION_KEY",SHIP_SESSION_KEY:"SHIP_SESSION_KEY",PREMIUM_SESSION_KEY:"DOAPP_PREMIUM_SESSION_KEY",IDENTITY_VERIFICATION_SESSION_KEY:"IV_SESSION_KEY",SESSION_COOKIE_NAME:"sharedsession",SMARTPICKUP:"02",NOPICKUP:"08",DAILYPICKUP:"01",DAYSPECIFICPICKUP:"99"}),UPS_DO_APP.constant("COUNTRY_CODE_CONSTANTS",{POSTAL_REQUIRED:["AX","DZ","AO","AR","AM","AU","AT","AZ","A2","BD","BY","BE","BA","BR","BN","BG","BI","CA","IC","XC","CN","CO","CD","HR","CY","CZ","DK","DJ","EC","GB","EE","ET","FO","FI","FR","GE","DE","GR","GL","GU","GG","HO","HU","IN","ID","IL","IT","JP","JE","JO","KZ","KR","KV","KO","KG","LV","LI","LT","LU","MK","MG","M3","MY","MH","MQ","YT","XL","MX","FM","MC","MN","ME","NL","NZ","NB","NO","PK","PH","PL","PO","PT","PR","RE","RO","RU","RW","SA","SF","RS","SG","SK","SI","ZA","ES","LK","C3","UV","VL","SE","CH","TW","TJ","TZ","TH","TU","TN","TR","TM","VI","UG","UA","GB","US","UY","UZ","VA","VN","WL","YA","ZW"]}),UPS_DO_APP.constant("DIGITAL_SIGNATURE_COUNTRIES",{DIGITAL_SIGNATURE_COUNTRIES:["AT","BE","FR","DE","HK","IE","IT","NL","SG","ES","CH"]}),UPS_DO_APP.constant("ELECTRONIC_BILLING_CONSTANTS",{ELECTRONIC_BILLING_COUNTRIES:["AU","AT","BE","DK","FI","FR","DE","HK","IE","IT","MX","NL","NO","PL","PT","SG","ES","SE","CH","GB"]}),UPS_DO_APP.constant("PICKUP_COUNTRIES_CONSTANT",{NON_CHARGEABLE_PICKUP_COUNTRIES:["AE","AR","AT","AU","BR","CH","CL","CN","CZ","CR","DO","DK","FI","GR","HK","HU","ID","IE","IN","JP","KR","LT","LU","LV","MA","MO","MY","NG","NO","NZ","PH","PK","PT","RO","RU","SA","SE","SG","SI","TH","TR","TW","VN","ZA"]}),UPS_DO_APP.constant("PICKUP_OPTIONS_COUNTRIES",{PICKUP_OPTIONS_COUNTRIES:["US","CA","DE","GB"]}),UPS_DO_APP.constant("TIME_FORMAT_CONSTANTS",{TWELVE_HOUR_FORMAT_COUNTRIES:["EL","HK","IN","KO","US"]}),UPS_DO_APP.constant("UTA_CONSTANTS",{UTA_CHECK_BOX_ONLY:["AU","BE","BR","CA","DK","DE","GB","HK","JA","JP","KO","MX","NL","PL","PT","ES","SE","CH","TR","US"],UTA_OPTIONAL_SCROLL:["FR","VI","VN"],UTA_REQUIRED_SCROLL:["ALL_OTHER_COUNTRIES"],WAIVER_OF_CONSUMER_RIGHTS:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GB","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"]}),UPS_DO_APP.constant("VAT_CONSTANTS",{VAT_REQUIRED:["AR","AU","AT","BE","BR","CN","DK","DO","FI","FR","DE","IN","IE","IT","MY","NL","NO","PL","PT","KR","ES","SE","CH","TW","TH","GB","VN"],VAT_OPTIONAL:["HK","JP","MO","MX","SG"],VAT_NOT_NEEDED:["ALL_OTHERS"],VAT_CERTIFIED_CITY_LIST:["Beijing","Changzhou","Chengdu","Dalian","Dongguan","Foshan","Fuzhou","Guangzhou","Hangzhou","Hefei","Huizhou","Jiangmen","Jiaxing","Kunshan","Nanjing","Nantong","Ningbo","Qingdao","Quanzhou","Shanghai","Shaoxing","Shenyang","Shenzhen","Suzhou","Tianjin","Wenzhou","Wuhan","Wuxi","Xiamen","Zhengzhou","Zhongshan","Zhuhai"]}),UPS_DO_APP.constant("WEB_FORM_CONSTANTS",{WEB_FORM_COUNTRIES:["AL","DZ","AZ","BS","BD","BH","BM","BO","BA","BG","KY","CO","CR","HR","CY","EC","EG","SV","EE","GH","GT","HN","ID","IL","CI","JO","KE","KW","LV","LT","MT","MU","MD","MA","MZ","NZ","NI","NG","OM","PK","PA","PY","PE","PH","QA","SA","RS","SK","ZA","LK","TN","TR","UA","UY","VI","VE","ZM"]}),UPS_DO_APP.constant("CONTACT_CS_COUNTRIES",{CONTACT_CS_COUNTRIES:["ZW","CD","DJ","BI","AO","CM","CD","ET","GI","MW","RW","TZ","UG"]});


angular.module("upsDOApp.directives",[]),angular.module("upsDOApp.directives").directive("doappApiError",["$compile",function(a){return{restrict:"E",replace:!0,transclude:!1,link:function(b,c){var d="'/doapp/app_assets/templates/ups.api_error.html'",e='<ng-include src="'+d+'"></ng-include>';c.append(a(e)(b))}}}]),angular.module("upsDOApp.directives").directive("doappErrorList",["$compile",function(a){return{restrict:"E",replace:!0,transclude:!1,link:function(b,c){var d="'/doapp/app_assets/templates/ups.error_list.html'",e='<ng-include src="'+d+'"></ng-include>';c.append(a(e)(b))}}}]),angular.module("upsDOApp.directives").directive("pageTitle",["doappService",function(a){return{restrict:"E",link:function(b,c){var d=c.context.innerText;if(a.isModalFlow)a.isAddExistingAccountFlow?c[0].outerHTML="":c[0].outerHTML='<h2 class="modal-title">'+d+"</h2>";else{document.title=d.replace(/(<([^>]+)>)/gi,"").replace(".","")+" | UPS",c[0]&&c[0].outerHTML&&(c[0].outerHTML=""),$("h1").html("<span>"+d+"</span>").attr("tabindex","-1"),$("h1").focus();var e='<li class="breadcrumb">'+d+"</li>",f=$("nav.ups-breadcrumb > ol").html();f&&$("nav.ups-breadcrumb > ol").html(f+e.replace(".",""))}}}}]),angular.module("upsDOApp.directives").directive("doappAddPromoTemplate",["doappService","$compile","IS_DEVELOPMENT","$http","doappConstants","doappWemsDataConversion","doappUtilService",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(h,i){c?g.initHeaders().then(function(){f.convertErrorCodes(""),f.convertAppConfig(""),d.get("/app_assets/templates/"+e.doapp_promo_choose_payment+".html").then(function(a){h.promoChoosePaymentHTML=a.data,d.get("/app_assets/templates/"+e.doapp_promo_conflict+".html").then(function(a){h.PromoConflictHtml=a.data,d.get("/app_assets/templates/"+e.doapp_promo_confirmation+".html").then(function(a){h.promoConfirmationHTML=a.data,i.replaceWith(b("<doapp-promo-choose-payment></doapp-promo-choose-payment><doapp-promo-conflict></doapp-promo-conflict><doapp-promo-confirmation></doapp-promo-confirmation>")(h)),h.finishedLoading="done"})})})}):g.initHeaders().then(function(){a.getHTML(function(a){f.convertErrorCodes(a[e.doapp_error_list_wem]),f.convertAppConfig(a[e.doa_app_config_wem]),h.promoChoosePaymentHTML=a[e.doapp_promo_choose_payment],h.promoConfirmationHTML=a[e.doapp_promo_confirmation],h.PromoConflictHtml=a[e.doapp_promo_conflict],i.replaceWith(b("<doapp-promo-choose-payment></doapp-promo-choose-payment><doapp-promo-conflict></doapp-promo-conflict><doapp-promo-confirmation></doapp-promo-confirmation>")(h)),h.finishedLoading="done"},[e.doapp_promo_conflict,e.doapp_promo_choose_payment,e.doapp_promo_confirmation,e.doapp_error_list_wem,e.doa_app_config_wem])})}}}]).directive("doappPromoChoosePayment",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='PromoChoosePaymentDiv' class='modal' ng-controller='DOAPP.PromoChoosePaymentCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.promoChoosePaymentHTML:"<div id='PromoChoosePaymentDiv' ng-controller='DOAPP.PromoChoosePaymentCtrl' hidden>"+a.convertModal(c.promoChoosePaymentHTML),e+="</div>",d.append(b(e)(c))}}}]).directive("doappPromoConfirmation",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='PromoConfirmationDiv' class='modal' ng-controller='DOAPP.PromoConfirmationCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.promoConfirmationHTML:"<div id='PromoConfirmationDiv' ng-controller='DOAPP.PromoConfirmationCtrl' hidden>"+a.convertModal(c.promoConfirmationHTML),e+="</div>",d.append(b(e)(c))}}}]),angular.module("upsDOApp.directives").directive("doappSignup",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='SignupDiv' class='modal' ng-controller='DOAPP.SignupCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.SignUpHtml:"<div id='SignupDiv' ng-controller='DOAPP.SignupCtrl' hidden>"+a.convertModal(c.SignUpHtml),e+="</div>",e=e.replace("[a-zA-Z-_][a-zA-Z-_.]","[a-zA-Z0-9-_][a-zA-Z0-9-_.]"),d.append(b(e)(c))}}}]).directive("doappPromoConflict",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='PromoConflictDiv' class='modal' ng-controller='DOAPP.PromoConflictCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.PromoConflictHtml:"<div id='PromoConflictDiv' ng-controller='DOAPP.PromoConflictCtrl' hidden>"+a.convertModal(c.PromoConflictHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappContactCs",["doappService","$compile","$rootScope",function(a,b,c){return{restrict:"E",replace:!0,transclude:!1,link:function(d,e){c.shouldContactCS=!0;var f;f=a.isModalFlow?"<div id='ContactCSDiv' class='modal' data-backdrop='static' tabindex='-1' role='dialog' >"+d.ContactCSHtml:"<div id='ContactCSDiv' hidden>"+a.convertModal(d.ContactCSHtml),f+="</div>",e.append(b(f)(d))}}}]).directive("doappAcceptMyChoiceTerm",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='AcceptMychoiceTermsDiv' class='modal' ng-controller='DOAPP.AcceptMyChoiceCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.AcceptMyChoiceTermHtml:"<div id='AcceptMychoiceTermsDiv' ng-controller='DOAPP.AcceptMyChoiceCtrl' hidden>"+a.convertModal(c.AcceptMyChoiceTermHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappUta",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='UTADiv' class='modal' ng-controller='DOAPP.UTACtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.UTAHtml:"<div id='UTADiv' ng-controller='DOAPP.UTACtrl' hidden>"+a.convertModal(c.UTAHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappUtaLegal",function(){return{restrict:"E",replace:!0,transclude:!1,link:function(a,b){b.append(a.UTAHtmlLegal)}}}).directive("doappSignupConfirmation",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='SignupConfirmationDiv' class='modal' ng-controller='DOAPP.SignupConfirmationCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.SignUpConfirmationHtml:"<div id='SignupConfirmationDiv' ng-controller='DOAPP.SignupConfirmationCtrl' hidden>"+a.convertModal(c.SignUpConfirmationHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappGuestShippingConfirmation",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='GuestShippingConfirmationDiv' class='modal' ng-controller='DOAPP.GuestShippingConfirmationCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.GuestShippingConfirmation:"<div id='GuestShippingConfirmationDiv' ng-controller='DOAPP.GuestShippingConfirmationCtrl' hidden>"+a.convertModal(c.GuestShippingConfirmation),e+="</div>",d.append(b(e)(c))}}}]).directive("doappSignupTemplate",["doappService","$compile","IS_DEVELOPMENT","$http","doappConstants","doappWemsDataConversion","doappUtilService",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(h,i){c?g.initHeaders().then(function(){f.convertErrorCodes(""),f.convertAppConfig(""),f.convertLinks(""),f.convertUTA(""),f.convertCreditCardTypes(""),f.convertPopover(""),d.get("/app_assets/templates/"+e.doapp_sign_up+".html").then(function(a){h.SignUpHtml=a.data,d.get("/app_assets/templates/"+e.doapp_uta+".html").then(function(a){h.UTAHtml=a.data,d.get("/app_assets/templates/"+e.doapp_signup_confirmation+".html").then(function(a){h.SignUpConfirmationHtml=a.data,d.get("/app_assets/templates/"+e.doapp_guest_shipping_confirmation+".html").then(function(a){h.GuestShippingConfirmation=a.data,d.get("/app_assets/templates/"+e.doapp_uta_legal+".html").then(function(a){h.UTAHtmlLegal=a.data,i.replaceWith(b("<doapp-signup></doapp-signup><doapp-uta></doapp-uta><doapp-signup-confirmation></doapp-signup-confirmation><doapp-guest-shipping-confirmation></doapp-guest-shipping-confirmation>")(h)),h.finishedLoading="done"})})})})})}):g.initHeaders().then(function(){a.getHTML(function(a){f.convertErrorCodes(a[e.doapp_error_list_wem]),f.convertAppConfig(a[e.doa_app_config_wem]),f.convertLinks(a[e.doa_links_wem]),f.convertUTA(a[e.doa_uta_wem]),f.convertCreditCardTypes(a[e.doa_credit_card_types]),f.convertPopover(a[e.doa_popover_wem]),h.SignUpHtml=a[e.doapp_sign_up],h.SignUpConfirmationHtml=a[e.doapp_signup_confirmation],h.GuestShippingConfirmation=a[e.doapp_guest_shipping_confirmation],h.UTAHtml=a[e.doapp_uta],h.UTAHtmlLegal=a[e.doapp_uta_legal],i.replaceWith(b("<doapp-signup></doapp-signup><doapp-uta></doapp-uta><doapp-signup-confirmation></doapp-signup-confirmation><doapp-guest-shipping-confirmation></doapp-guest-shipping-confirmation>")(h)),h.finishedLoading="done"},[e.doapp_sign_up,e.doapp_signup_confirmation,e.doapp_uta,e.doapp_uta_legal,e.doapp_error_list_wem,e.doa_app_config_wem,e.doa_links_wem,e.doa_uta_wem,e.doapp_guest_shipping_confirmation,e.doa_credit_card_types,e.doa_popover_wem])})}}}]).directive("doappAcceptMychoiceTermsTemplate",["doappService","$compile","IS_DEVELOPMENT","$http","doappConstants","doappWemsDataConversion","doappUtilService",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(h,i){c?g.initHeaders().then(function(){f.convertErrorCodes(""),f.convertAppConfig(""),f.convertLinks(""),d.get("/app_assets/templates/"+e.doapp_accept_mychoice_terms+".html").then(function(a){h.AcceptMyChoiceTermHtml=a.data,i.replaceWith(b("<doapp-accept-my-choice-term></doapp-accept-my-choice-term>")(h))})}):g.initHeaders().then(function(){a.getHTML(function(a){f.convertErrorCodes(a[e.doapp_error_list_wem]),f.convertAppConfig(a[e.doa_app_config_wem]),f.convertLinks(a[e.doa_links_wem]),h.AcceptMyChoiceTermHtml=a[e.doapp_accept_mychoice_terms],i.replaceWith(b("<doapp-accept-my-choice-term></doapp-accept-my-choice-term>")(h)),h.finishedLoading="done"},[e.doapp_accept_mychoice_terms,e.doapp_error_list_wem,e.doa_app_config_wem,e.doa_links_wem])})}}}]).directive("doappTimeoutTemplate",["doappService","$compile","IS_DEVELOPMENT","$http","doappConstants","doappWemsDataConversion","doappUtilService","$rootScope",function(a,b,c,d,e,f,g,h){return{restrict:"E",replace:!0,transclude:!1,link:function(i,j){g.initHeaders().then(function(){a.getHTML(function(a){f.convertAppConfig(a[e.doa_app_config_wem]),f.convertLinks(a[e.doa_links_wem]),c?d.get("/app_assets/templates/"+e.doapp_timeout+".html").then(function(a){i.TimeoutHtml=a.data,j.replaceWith(b("<doapp-timeout></doapp-timeout>")(i)),i.finishedLoading="done",h.displayFullPage=!0}):(i.TimeoutHtml=a[e.doapp_timeout],j.replaceWith(b("<doapp-timeout></doapp-timeout>")(i)),i.finishedLoading="done",h.displayFullPage=!0)},[e.doa_app_config_wem,e.doa_links_wem,e.doapp_timeout])})}}}]).directive("doappTimeout",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(a,c){var d;d="<div id='TimeoutDiv' ng-controller='DOAPP.TimeoutCtrl'>"+a.TimeoutHtml+"</div>",c.append(b(d)(a))}}}]).directive("doappAddPaymentCard",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='AddPaymentCardDiv' class='modal' ng-controller='DOApp.AddPaymentCardCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.AddPaymentCardHtml:"<div id='AddPaymentCardDiv' ng-controller='DOApp.AddPaymentCardCtrl' hidden>"+a.convertModal(c.AddPaymentCardHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappChoosePayment",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='ChoosePaymentDiv' class='modal' ng-controller='DOApp.ChoosePaymentCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.ChoosePaymentHtml:"<div id='ChoosePaymentDiv' ng-controller='DOApp.ChoosePaymentCtrl' hidden>"+a.convertModal(c.ChoosePaymentHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappAddPaymentMethod",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='AddPaymentMethodDiv' class='modal' ng-controller='DOApp.AddPaymentMethodCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.AddPaymentHtml:"<div id='AddPaymentMethodDiv' ng-controller='DOApp.AddPaymentMethodCtrl' hidden>"+a.convertModal(c.AddPaymentHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappMyChoiceConfirmationFromIdentity",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='MyChoiceConfirmationDiv' class='modal' ng-controller='DOAPP.MyChoiceConfirmationCtrller' data-backdrop='static' tabindex='-1' role='dialog' >"+c.MyChoiceConfirmationHtml:"<div id='MyChoiceConfirmationDiv' ng-controller='DOAPP.MyChoiceConfirmationCtrller' hidden>"+a.convertModal(c.MyChoiceConfirmationHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappMyChoiceConfirmation",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='MyChoiceConfirmationDiv' class='modal' ng-controller='DOAPP.MyChoiceConfirmationCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.MyChoiceConfirmationHtml:"<div id='MyChoiceConfirmationDiv' ng-controller='DOAPP.MyChoiceConfirmationCtrl' hidden>"+a.convertModal(c.MyChoiceConfirmationHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappMyChoicePremiumConfirmation",["doappService","$compile","IS_DEVELOPMENT","$http","doappConstants","doappUtilService",function(a,b,c,d,e,f){return{restrict:"E",replace:!0,transclude:!1,link:function(g,h){c?f.initHeaders().then(function(){d.get("/app_assets/templates/"+e.doapp_choose_payment+".html").then(function(c){g.ChoosePaymentHtml=c.data,d.get("/app_assets/templates/"+e.doapp_cpc_wem+".html").then(function(c){a.cpc_html=c.data,d.get("/app_assets/templates/"+e.doapp_my_choice_confirmation+".html").then(function(a){g.MyChoiceConfirmationHtml=a.data,h.replaceWith(b("<doapp-choose-payment></doapp-choose-payment><doapp-my-choice-confirmation></doapp-my-choice-confirmation>")(g)),g.finishedLoading="done"})})})}):f.initHeaders().then(function(){a.getHTML(function(c){g.ChoosePaymentHtml=c[e.doapp_choose_payment],g.MyChoiceConfirmationHtml=c[e.doapp_my_choice_confirmation],a.cpc_html=c[e.doa_cpc_wem],h.replaceWith(b("<doapp-choose-payment></doapp-choose-payment><doapp-my-choice-confirmation></doapp-my-choice-confirmation>")(g)),g.finishedLoading="done"},[e.doapp_cpc_wem,e.doapp_choose_payment,e.doapp_my_choice_confirmation])})}}}]).directive("doappMyChoiceRemainderConfirmation",["doappService","$compile","IS_DEVELOPMENT","$http","doappConstants","doappUtilService",function(a,b,c,d,e,f){return{restrict:"E",replace:!0,transclude:!1,link:function(g,h){c?f.initHeaders().then(function(){d.get("/app_assets/templates/"+e.doapp_add_payment_card+".html").then(function(a){g.AddPaymentCardHtml=a.data,d.get("/app_assets/templates/"+e.doapp_choose_payment+".html").then(function(a){g.ChoosePaymentHtml=a.data,d.get("/app_assets/templates/"+e.doapp_my_choice_confirmation+".html").then(function(a){g.MyChoiceConfirmationHtml=a.data,h.replaceWith(b("<doapp-add-payment-card></doapp-add-payment-card><doapp-choose-payment></doapp-choose-payment><doapp-my-choice-confirmation></doapp-my-choice-confirmation>")(g)),g.finishedLoading="done"})})})}):f.initHeaders().then(function(){a.getHTML(function(a){g.AddPaymentCardHtml=a[e.doapp_add_payment_card],g.AddPaymentHtml=a[e.doapp_choose_payment],g.MyChoiceConfirmationHtml=a[e.doapp_my_choice_confirmation],h.replaceWith(b("<doapp-add-payment-card></doapp-add-payment-card><doapp-choose-payment></doapp-choose-payment><doapp-my-choice-confirmation></doapp-my-choice-confirmation>")(g)),g.finishedLoading="done"},[e.doapp_add_payment_card,e.doapp_choose_payment,e.doapp_my_choice_confirmation,e.doapp_add_payment_method])})}}}]).directive("doappStandardChoiceConfirmation",["doappService","$compile","doappConstants","doappUtilService",function(a,b,c,d){return{restrict:"E",replace:!0,transclude:!1,link:function(e,f){d.initHeaders().then(function(){a.getHTML(function(a){e.MyChoiceConfirmationHtml=a[c.doapp_my_choice_confirmation],f.replaceWith(b("<doapp-my-choice-confirmation-from-identity></doapp-my-choice-confirmation-from-identity>")(e))},[c.doapp_my_choice_confirmation])})}}}]).directive("doappMychoiceTemplate",["doappService","$compile","doappConstants","doappWemsDataConversion","doappUtilService","$http","IS_DEVELOPMENT",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(h,i){e.initHeaders().then(function(){a.getHTML(function(e){h.SignUpHtml=e[c.doapp_sign_up],h.UTAHtml=e[c.doapp_uta],h.UTAHtmlLegal=e[c.doapp_uta_legal],a.cac_html=e[c.doa_cac_wem],a.cpc_html=e[c.doapp_cpc_wem],h.AddressHtml=e[c.doapp_address],h.MyAvailabilityHtml=e[c.doapp_my_availability],h.ChoosePaymentHtml=e[c.doapp_choose_payment],h.MyChoiceConfirmationHtml=e[c.doapp_my_choice_confirmation],d.convertSuffixList(e[c.doapp_suffix_list]),d.convertCountryList(e[c.doa_country_list]),d.convertErrorCodes(e[c.doapp_error_list_wem]),d.convertAppConfig(e[c.doa_app_config_wem]),d.convertLinks(e[c.doa_links_wem]),d.convertUTA(e[c.doa_uta_wem]),d.convertPopover(e[c.doa_popover_wem]),d.convertListOf16MyChoiceCountryList(e[c.doa_mychoice_16countries]),d.convertListOfNonPostalMyChoiceCountries(e[c.doa_nonpostal_mychoice_countries]),g?f.get("/app_assets/templates/"+c.doapp_choose_payment+".html").then(function(a){h.ChoosePaymentHtml=a.data,i.replaceWith(b("<doapp-signup></doapp-signup><doapp-choose-payment></doapp-choose-payment><doapp-availability></doapp-availability><doapp-uta></doapp-uta><doapp-address name='AddressDiv' init='shouldDisplayPromoCode = true; countryDisabled = true'></doapp-address><doapp-my-choice-confirmation></doapp-my-choice-confirmation>")(h)),h.finishedLoading="done"}):(i.replaceWith(b("<doapp-signup></doapp-signup><doapp-choose-payment></doapp-choose-payment><doapp-availability></doapp-availability><doapp-uta></doapp-uta><doapp-address name='AddressDiv' init='shouldDisplayPromoCode = true; countryDisabled = true'></doapp-address><doapp-my-choice-confirmation></doapp-my-choice-confirmation>")(h)),h.finishedLoading="done")},[c.doa_nonpostal_mychoice_countries,c.doapp_cpc_wem,c.doa_mychoice_16countries,c.doapp_choose_payment,c.doapp_uta_legal,c.doa_cac_wem,c.doapp_sign_up,c.doapp_uta,c.doapp_address,c.doapp_my_availability,c.doapp_suffix_list,c.doa_country_list,c.doapp_error_list_wem,c.doa_app_config_wem,c.doa_links_wem,c.doa_uta_wem,c.doapp_my_choice_confirmation,c.doa_popover_wem])})}}}]).directive("doappHazmatTemplate",["doappService","$compile","doappConstants","doappWemsDataConversion","doappUtilService",function(a,b,c,d,e){return{restrict:"E",replace:!0,transclude:!1,link:function(f,g){e.initHeaders().then(function(){a.getHTML(function(a){f.HazmatHtml=a[c.doapp_oa_hazmat],d.convertErrorCodes(a[c.doapp_error_list_wem]),d.convertLinks(a[c.doa_links_wem]),g.replaceWith(b("<doapp-hazmat></doapp-hazmat>")(f)),f.hazmatLoaded="done"},[c.doapp_oa_hazmat,c.doapp_error_list_wem,c.doa_links_wem])})}}}]).directive("doappMychoicePremiumTemplate",["doappService","$compile","doappConstants","doappWemsDataConversion","doappUtilService",function(a,b,c,d,e){return{restrict:"E",replace:!0,transclude:!1,link:function(f,g){e.initHeaders().then(function(){a.getHTML(function(e){f.SignUpHtml=e[c.doapp_sign_up],f.UTAHtml=e[c.doapp_uta],f.UTAHtmlLegal=e[c.doapp_uta_legal],a.cac_html=e[c.doa_cac_wem],f.AddressHtml=e[c.doapp_address],d.convertSuffixList(e[c.doapp_suffix_list]),d.convertCountryList(e[c.doa_country_list]),d.convertErrorCodes(e[c.doapp_error_list_wem]),d.convertAppConfig(e[c.doa_app_config_wem]),d.convertLinks(e[c.doa_links_wem]),d.convertUTA(e[c.doa_uta_wem]),f.MyAvailabilityHtml=e[c.doapp_my_availability],g.replaceWith(b("<doapp-availability></doapp-availability><doapp-uta></doapp-uta><doapp-address name='AddressDiv' init='shouldDisplayPromoCode = true; countryDisabled = true'></doapp-address><doapp-signup></doapp-signup>")(f)),f.finishedLoading="done"},[c.doapp_uta_legal,c.doa_cac_wem,c.doapp_add_payment_card,c.doapp_suffix_list,c.doapp_sign_up,c.doapp_uta,c.doapp_address,c.doapp_my_availability,c.doa_country_list,c.doapp_error_list_wem,c.doa_app_config_wem,c.doa_links_wem,c.doa_uta_wem])})}}}]).directive("doappOpenAccountTemplate",["doappService","$compile","IS_DEVELOPMENT","$http","doappConstants","doappWemsDataConversion","doappUtilService","WEB_FORM_CONSTANTS","CONTACT_CS_COUNTRIES","$window","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"E",replace:!0,transclude:!1,link:function(j,l){if(-1!==h.WEB_FORM_COUNTRIES.indexOf(a.Location)){var m=window.location.hostname,n=a.Locale;"wwwapps.ups.com"===m?m="www.ups.com":m.includes("-apps")&&(m=m.replace("-apps","")),-1!==k.tcomCountries.indexOf(a.Location)&&(n="en_"+a.Location),window.location.replace("https://"+m+"/account/int/start?loc="+n)}else-1!==i.CONTACT_CS_COUNTRIES.indexOf(a.Location)?c?g.initHeaders().then(function(){d.get("/app_assets/templates/"+e.doapp_contact_cs+".html").then(function(a){j.ContactCSHtml=a.data,l.replaceWith(b("<doapp-contact-cs></doapp-contact-cs>")(j)),j.finishedLoading="done"})}):g.initHeaders().then(function(){a.getHTML(function(a){j.ContactCSHtml=a[e.doapp_contact_cs],l.replaceWith(b("<doapp-contact-cs></doapp-contact-cs>")(j)),j.finishedLoading="done"},[e.doapp_contact_cs,e.doa_app_config_wem])}):g.createPrepopInfo().then(function(){null!==a.prepopData.RegistrationCountryCode&&void 0!==a.prepopData.RegistrationCountryCode&&(a.prepopData.RegistrationCountryCode!==a.Location?c?g.initHeaders().then(function(){d.get("/app_assets/templates/"+e.doapp_contact_cs+".html").then(function(a){j.ContactCSHtml=a.data,l.replaceWith(b("<doapp-contact-cs></doapp-contact-cs>")(j)),j.cannotOpenAccount=!0,j.finishedLoading="done"})}):g.initHeaders().then(function(){a.getHTML(function(a){j.ContactCSHtml=a[e.doapp_contact_cs],l.replaceWith(b("<doapp-contact-cs></doapp-contact-cs>")(j)),j.cannotOpenAccount=!0,j.finishedLoading="done"},[e.doapp_contact_cs,e.doa_app_config_wem])}):c?g.initHeaders().then(function(){a.getHTML(function(c){f.convertApacValidCitiesCN(c[e.doa_apac_valid_cities_cn]),f.convertApacValidLocales(c[e.doa_apac_valid_locales]),f.convertBusinessDocuments(c[e.doa_business_documents_wem]),f.convertDays(c[e.doa_days_wem]),f.convertErrorCodes(c[e.doapp_error_list_wem]),f.convertAppConfig(c[e.doa_app_config_wem]),f.convertLinks(c[e.doa_links_wem]),f.convertUTA(c[e.doa_uta_wem]),f.convertVAT(c[e.doa_vat_wem]),f.convertBillingCenter(c[e.doa_billingcentercountries_wem]),f.convertPopover(c[e.doa_popover_wem]),f.convertCountryList(c[e.doa_country_list]),a.cac_html=c[e.doa_cac_wem],d.get("/app_assets/templates/"+e.doapp_sign_up+".html").then(function(a){j.SignUpHtml=a.data,d.get("/app_assets/templates/"+e.doapp_address+".html").then(function(a){j.AddressHtml=a.data,d.get("/app_assets/templates/"+e.doapp_pickup_start_date+".html").then(function(a){j.PickupStartDateHtml=a.data,d.get("/app_assets/templates/"+e.doapp_open_account_confirmation+".html").then(function(a){j.OpenAccountConfirmationHtml=a.data,d.get("/app_assets/templates/"+e.doapp_pickup_options+".html").then(function(a){j.PickupOptionsHtml=a.data,d.get("/app_assets/templates/"+e.doapp_choose_address+".html").then(function(a){j.ChooseAddressHtml=a.data,d.get("/app_assets/templates/"+e.doapp_apac_upload+".html").then(function(a){j.ApacUploadHtml=a.data,d.get("/app_assets/templates/"+e.doapp_apac_tax_info+".html").then(function(a){j.ApacTaxInfoHtml=a.data,d.get("/app_assets/templates/"+e.doapp_account_options+".html").then(function(a){j.AccountOptionsHtml=a.data,d.get("/app_assets/templates/"+e.doapp_uta+".html").then(function(a){j.UTAHtml=a.data,d.get("/app_assets/templates/"+e.doapp_uta_legal+".html").then(function(a){j.UTAHtmlLegal=a.data,d.get("/app_assets/templates/"+e.doapp_promo_conflict+".html").then(function(a){j.PromoConflictHtml=a.data,d.get("/app_assets/templates/"+e.doapp_oa_fail+".html").then(function(a){j.OpenAccountFailHtml=a.data,d.get("/app_assets/templates/"+e.doapp_oa_hazmat+".html").then(function(a){j.HazmatHtml=a.data,l.replaceWith(b("<doapp-promo-conflict></doapp-promo-conflict><doapp-uta></doapp-uta><doapp-address name='AddressDiv' init='shouldDisplayPromoCode = false; countryDisabled = true'></doapp-address><doapp-choose-address></doapp-choose-address><doapp-signup></doapp-signup><doapp-open-account-fail></doapp-open-account-fail><doapp-hazmat></doapp-hazmat><doapp-account_options></doapp-account_options><doapp-address name='InvoiceMailingAddressDiv' init='shouldDisplayPromoCode = false; countryDisabled = false'></doapp-address><doapp-apac-upload></doapp-apac-upload><doapp-apac-tax-info></doapp-apac-tax-info><doapp-pickup-options></doapp-pickup-options><doapp-pickup-start-date></doapp-pickup-start-date><doapp-open-account-confirmation></doapp-open-account-confirmation>")(j)),j.finishedLoading="done"})})})})})})})})})})})})})})},[e.doapp_promo_conflict,e.doapp_uta_legal,e.doapp_uta,e.doa_cac_wem,e.doa_popover_wem,e.doa_billingcentercountries_wem,e.doa_apac_valid_cities_cn,e.doa_apac_valid_locales,e.doa_business_documents_wem,e.doapp_sign_up,e.doapp_address,e.doapp_account_options,e.doapp_oa_fail,e.doapp_oa_hazmat,e.doapp_apac_tax_info,e.doapp_apac_upload,e.doapp_choose_address,e.doapp_open_account_confirmation,e.doapp_pickup_options,e.doapp_pickup_start_date,e.doapp_error_list_wem,e.doa_app_config_wem,e.doa_links_wem,e.doa_uta_wem,e.doa_vat_wem,e.doa_days_wem])}):g.initHeaders().then(function(){a.getHTML(function(c){f.convertApacValidCitiesCN(c[e.doa_apac_valid_cities_cn]),f.convertApacValidLocales(c[e.doa_apac_valid_locales]),f.convertBusinessDocuments(c[e.doa_business_documents_wem]),f.convertDays(c[e.doa_days_wem]),f.convertErrorCodes(c[e.doapp_error_list_wem]),f.convertAppConfig(c[e.doa_app_config_wem]),f.convertLinks(c[e.doa_links_wem]),f.convertUTA(c[e.doa_uta_wem]),f.convertVAT(c[e.doa_vat_wem]),f.convertBillingCenter(c[e.doa_billingcentercountries_wem]),f.convertPopover(c[e.doa_popover_wem]),f.convertCountryList(c[e.doa_country_list]),a.cac_html=c[e.doa_cac_wem],j.SignUpHtml=c[e.doapp_sign_up],j.AddressHtml=c[e.doapp_address],j.PickupStartDateHtml=c[e.doapp_pickup_start_date],j.OpenAccountConfirmationHtml=c[e.doapp_open_account_confirmation],j.PickupOptionsHtml=c[e.doapp_pickup_options],j.ChooseAddressHtml=c[e.doapp_choose_address],j.ApacUploadHtml=c[e.doapp_apac_upload],j.ApacTaxInfoHtml=c[e.doapp_apac_tax_info],j.AccountOptionsHtml=c[e.doapp_account_options],j.OpenAccountFailHtml=c[e.doapp_oa_fail],j.HazmatHtml=c[e.doapp_oa_hazmat],j.UTAHtml=c[e.doapp_uta],j.UTAHtmlLegal=c[e.doapp_uta_legal],j.PromoConflictHtml=c[e.doapp_promo_conflict],l.replaceWith(b("<doapp-promo-conflict></doapp-promo-conflict><doapp-uta></doapp-uta><doapp-address name='AddressDiv' init='shouldDisplayPromoCode = false; countryDisabled = true'></doapp-address><doapp-choose-address></doapp-choose-address><doapp-open-account-fail></doapp-open-account-fail><doapp-hazmat></doapp-hazmat><doapp-account_options></doapp-account_options><doapp-address name='InvoiceMailingAddressDiv' init='shouldDisplayPromoCode = false; countryDisabled = false'></doapp-address><doapp-apac-upload></doapp-apac-upload><doapp-apac-tax-info></doapp-apac-tax-info><doapp-pickup-options></doapp-pickup-options><doapp-pickup-start-date></doapp-pickup-start-date><doapp-open-account-confirmation></doapp-open-account-confirmation><doapp-signup></doapp-signup>")(j)),j.finishedLoading="done"},[e.doapp_promo_conflict,e.doapp_uta_legal,e.doapp_uta,e.doa_cac_wem,e.doa_popover_wem,e.doa_billingcentercountries_wem,e.doa_apac_valid_cities_cn,e.doa_apac_valid_locales,e.doa_business_documents_wem,e.doapp_sign_up,e.doapp_address,e.doapp_account_options,e.doapp_oa_fail,e.doapp_oa_hazmat,e.doapp_apac_tax_info,e.doapp_apac_upload,e.doapp_choose_address,e.doapp_open_account_confirmation,e.doapp_pickup_options,e.doapp_pickup_start_date,e.doapp_error_list_wem,e.doa_app_config_wem,e.doa_links_wem,e.doa_uta_wem,e.doa_vat_wem,e.doa_days_wem,e.doa_country_list])}))})}}}]).directive("doappPickupTemplate",["doappService","$compile","IS_DEVELOPMENT","$http","doappConstants","doappWemsDataConversion","doappUtilService",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){g.initHeaders().then(function(){a.getHTML(function(g){f.convertApacValidCitiesCN(g[e.doa_apac_valid_cities_cn]),f.convertApacValidLocales(g[e.doa_apac_valid_locales]),f.convertBusinessDocuments(g[e.doa_business_documents_wem]),f.convertDays(g[e.doa_days_wem]),f.convertErrorCodes(g[e.doapp_error_list_wem]),f.convertAppConfig(g[e.doa_app_config_wem]),f.convertLinks(g[e.doa_links_wem]),f.convertUTA(g[e.doa_uta_wem]),f.convertVAT(g[e.doa_vat_wem]),f.convertBillingCenter(g[e.doa_billingcentercountries_wem]),f.convertPopover(g[e.doa_popover_wem]),a.cac_html=g[e.doa_cac_wem],c.SignUpHtml=g[e.doapp_sign_up],c.UTAHtml=g[e.doapp_uta],c.UTAHtmlLegal=g[e.doapp_uta_legal],c.AddressHtml=g[e.doapp_address],c.PickupStartDateHtml=g[e.doapp_pickup_start_date],c.PickupOptionsHtml=g[e.doapp_pickup_options],c.OpenAccountConfirmationHtml=g[e.doapp_open_account_confirmation],c.ChooseAddressHtml=g[e.doapp_choose_address],c.ApacUploadHtml=g[e.doapp_apac_upload],c.ApacTaxInfoHtml=g[e.doapp_apac_tax_info],c.AccountOptionsHtml=g[e.doapp_account_options],d.replaceWith(b("<doapp-address name='AddressDiv' init='shouldDisplayPromoCode = false; countryDisabled = true'></doapp-address><doapp-choose-address></doapp-choose-address><doapp-signup></doapp-signup><doapp-account_options></doapp-account_options><doapp-address name='InvoiceMailingAddressDiv' init='shouldDisplayPromoCode = false; countryDisabled = false'></doapp-address><doapp-apac-upload></doapp-apac-upload><doapp-apac-tax-info></doapp-apac-tax-info><doapp-pickup-options></doapp-pickup-options><doapp-pickup-start-date></doapp-pickup-start-date><doapp-open-account-confirmation></doapp-open-account-confirmation>")(c)),c.finishedLoading="done"},[e.doapp_uta,e.doapp_uta_legal,e.doa_cac_wem,e.doa_popover_wem,e.doa_billingcentercountries_wem,e.doa_apac_valid_cities_cn,e.doa_apac_valid_locales,e.doa_business_documents_wem,e.doa_days_wem,e.doapp_sign_up,e.doapp_address,e.doapp_account_options,e.doapp_apac_tax_info,e.doapp_apac_upload,e.doapp_choose_address,e.doapp_open_account_confirmation,e.doapp_pickup_options,e.doapp_pickup_start_date,e.doapp_error_list_wem,e.doa_app_config_wem,e.doa_links_wem,e.doa_uta_wem,e.doa_vat_wem])})}}}]).directive("doappAddNotificationTemplate",["doappService","$compile","doappConstants","doappWemsDataConversion","doappUtilService",function(a,b,c,d,e){return{restrict:"E",replace:!0,transclude:!1,link:function(f,g){e.initHeaders().then(function(){a.getHTML(function(e){f.SignUpHtml=e[c.doapp_sign_up],a.cac_html=e[c.doa_cac_wem],f.AddressHtml=e[c.doapp_address],f.MyChoiceConfirmationHtml=e[c.doapp_my_choice_confirmation],f.ChooseNotificationHtml=e[c.doapp_choose_notification],d.convertErrorCodes(e[c.doapp_error_list_wem]),d.convertAppConfig(e[c.doa_app_config_wem]),d.convertLinks(e[c.doa_links_wem]),d.convertUTA(e[c.doa_uta_wem]),g.replaceWith(b("<doapp-choose-notification></doapp-choose-notification><doapp-address name='AddressDiv' init='shouldDisplayPromoCode = false; countryDisabled = true'></doapp-address><doapp-signup></doapp-signup><doapp-my-choice-confirmation></doapp-my-choice-confirmation>")(f)),f.finishedLoading="done"
},[c.doa_cac_wem,c.doapp_sign_up,c.doapp_address,c.doapp_choose_notification,c.doapp_error_list_wem,c.doa_app_config_wem,c.doa_links_wem,c.doa_uta_wem,c.doapp_my_choice_confirmation])})}}}]).directive("doappPickupOptions",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='PickupOptionsDiv' class='modal' ng-controller='DOAPP.PickupOptionsCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.PickupOptionsHtml:"<div id='PickupOptionsDiv' ng-controller='DOAPP.PickupOptionsCtrl' hidden>"+a.convertModal(c.PickupOptionsHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("serverError",function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c){b.on("change",function(){a.$apply(function(){try{c.$setValidity("serverMessage",!0)}catch(b){a.hasSetValidity=b}})})}}}).directive("inputStrip",["doappErrorHandler",function(a){return{restrict:"A",require:["^form","?ngModel"],link:function(b,c,d,e){c.on("blur",function(){c.context.value&&(c.context.value=c.context.value.replace(/<[^>]+>/g,""),/[^\u0000-\u00ff]/.test(c.context.value)&&(c.context.value=c.context.value.replace(/[^\u0000-\u00ff]/g,""),b.errorList=a.createErrorList("DOUBLE_BYTE_ERROR"),e[0]&&e[0][d.name]&&e[0][d.name].$name&&(b.formObj[e[0][d.name].$name]=c.context.value))),e[0]&&e[0][d.name]&&!e[0][d.name].$modelValue&&(e[0][d.name].$valid=!1,e[0][d.name].$error.required=!0,e[0][d.name].$pristine=!1,e[0][d.name].$setDirty())})}}}]).directive("doappPickupStartDate",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='PickupStartDateDiv' class='modal' ng-controller='DOAPP.PickupStartDateCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.PickupStartDateHtml:"<div id='PickupStartDateDiv' ng-controller='DOAPP.PickupStartDateCtrl' hidden>"+a.convertModal(c.PickupStartDateHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappOpenAccountConfirmation",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='OpenAccountConfirmationDiv' class='modal' ng-controller='DOAPP.OpenAccountConfirmationCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.OpenAccountConfirmationHtml:"<div id='OpenAccountConfirmationDiv' ng-controller='DOAPP.OpenAccountConfirmationCtrl' hidden>"+a.convertModal(c.OpenAccountConfirmationHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappAddress",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d,e){var f;f=a.isModalFlow?"<div id='"+e.name+"' ng-init='"+e.init+"' class='modal' ng-controller='DOAPP.AddressCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.AddressHtml:"<div id='"+e.name+"' ng-init='"+e.init+"' ng-controller='DOAPP.AddressCtrl' hidden>"+a.convertModal(c.AddressHtml),f+="</div>",d.append(b(f)(c))}}}]).directive("doappChooseAddress",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='ChooseAddressDiv' class='modal' ng-controller='DOAPP.ChooseAddressCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.ChooseAddressHtml:"<div id='ChooseAddressDiv' ng-controller='DOAPP.ChooseAddressCtrl' hidden>"+a.convertModal(c.ChooseAddressHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappApacUpload",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='APACUploadDiv' class='modal' ng-controller='DOAPP.APACUploadCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.ApacUploadHtml:"<div id='APACUploadDiv' ng-controller='DOAPP.APACUploadCtrl' hidden>"+a.convertModal(c.ApacUploadHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappApacTaxInfo",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='APACTaxInfoDiv' class='modal' ng-controller='DOAPP.APACTaxInfoCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.ApacTaxInfoHtml:"<div id='APACTaxInfoDiv' ng-controller='DOAPP.APACTaxInfoCtrl' hidden>"+a.convertModal(c.ApacTaxInfoHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappAvailability",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='AvailabilityDiv' class='modal' ng-controller='DOAPP.MyAvailabilityCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.MyAvailabilityHtml:"<div id='AvailabilityDiv' ng-controller='DOAPP.MyAvailabilityCtrl' hidden>"+a.convertModal(c.MyAvailabilityHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappAccountOptions",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='AccountOptionsDiv' class='modal' ng-controller='DOAPP.AccountOptionsCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.AccountOptionsHtml:"<div id='AccountOptionsDiv' ng-controller='DOAPP.AccountOptionsCtrl' hidden>"+a.convertModal(c.AccountOptionsHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappOpenAccountFail",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='OAFailDiv' class='modal' ng-controller='DOAPP.OAFailCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.OpenAccountFailHtml:"<div id='OAFailDiv' ng-controller='DOAPP.OAFailCtrl' hidden>"+a.convertModal(c.OpenAccountFailHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappHazmat",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='HazmatDiv' class='modal' ng-controller='DOAPP.HazmatCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.HazmatHtml:"<div id='HazmatDiv' ng-controller='DOAPP.HazmatCtrl' hidden>"+a.convertModal(c.HazmatHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappAddOrAuthAccount",["doappService","$compile","IS_DEVELOPMENT","$http","doappUtilService",function(a,b,c,d,e){return{restrict:"E",replace:!0,transclude:!1,link:function(f,g){c?e.initHeaders().then(function(){d.get("/app_assets/templates/ups.doa-add-or-authenticate-account.html").then(function(a){g.replaceWith(b(a)(f))})}):e.initHeaders().then(function(){a.getHTML(function(a){g.replaceWith(b(a)(f))},["ups.doa-add-or-authenticate-account"])})}}}]).directive("doappChooseNotification",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='ChooseNotificationDiv' class='modal' ng-controller='DOAPP.ChooseNotificationCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.ChooseNotificationHtml:"<div id='ChooseNotificationDiv' ng-controller='DOAPP.ChooseNotificationCtrl' hidden>"+a.convertModal(c.ChooseNotificationHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("doappAccountAia",["$window",function(a){return{restrict:"E",replace:!0,transclude:!1,link:function(){var b=a.location.href;if(b.indexOf("?")>-1){var c=b.slice(b.indexOf("?")+1);c.indexOf("#")>-1&&(c=c.indexOf("?")>-1?c.slice(c.indexOf("?")+1):c.substring(0,c.indexOf("#")));c.substring(9,12);a.location.href="https://wwwapps.ups.com/identityverification/fullpage/aia/?"+c}else a.location.href="https://wwwapps.ups.com/identityverification/fullpage/aia/?"+c}}}]).directive("doappAddExistingAccountTemplate",["IS_DEVELOPMENT","doappUtilService","doappWemsDataConversion","$http","doappConstants","$compile","doappService",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,transclude:!1,link:function(h,i){b.initHeaders().then(function(){g.getHTML(function(b){c.convertAppConfig(b[e.doa_app_config_wem]),c.convertLinks(b[e.doa_links_wem]),c.convertCountryList(b[e.doa_country_list]),c.convertErrorCodes(b[e.doapp_error_list_wem]),a?d.get("/app_assets/templates/"+e.doapp_aia+".html").then(function(a){h.ChooseNotificationHtml=a.data,d.get("/app_assets/templates/"+e.doapp_promo_conflict+".html").then(function(a){h.PromoConflictHtml=a.data,i.replaceWith(f("<doapp-promo-conflict></doapp-promo-conflict><doapp-aia></doapp-aia>")(h)),h.finishedLoading="done"})}):(h.ChooseNotificationHtml=b[e.doapp_aia],h.PromoConflictHtml=b[e.doapp_promo_conflict],i.replaceWith(f("<doapp-promo-conflict></doapp-promo-conflict><doapp-aia></doapp-aia>")(h)),h.finishedLoading="done")},[e.doapp_promo_conflict,e.doa_app_config_wem,e.doa_links_wem,e.doa_country_list,e.doapp_error_list_wem,e.doapp_aia])})}}}]).directive("doappAia",["doappService","$compile",function(a,b){return{restrict:"E",replace:!0,transclude:!1,link:function(c,d){var e;e=a.isModalFlow?"<div id='DoAppAddExistingAccountDiv' class='modal' ng-controller='DOApp.AddExistingAccountCtrl' data-backdrop='static' tabindex='-1' role='dialog' >"+c.ChooseNotificationHtml:"<div id='DoAppAddExistingAccountDiv' ng-controller='DOApp.AddExistingAccountCtrl' hidden>"+a.convertModal(c.ChooseNotificationHtml),e+="</div>",d.append(b(e)(c))}}}]).directive("file",["fileUpload",function(a){return{require:"ngModel",restrict:"A",link:function(b,c,d,e){c.bind("change",function(c){var f=c.target.files,g=f[0];e.$setViewValue(g),a.uploadFileToUrl(g),b.updateChecks(d.title),b.$apply()})}}}]).directive("doappNumericOnly",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){var b=a.replace(/[^0-9]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),b}d.$parsers.push(e)}}}).directive("noSpecialChar",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){var b=a.replace(/[^\w\s]/gi,"");return b!==a&&(d.$setViewValue(b),d.$render()),b}d.$parsers.push(e)}}}).directive("triggerFocusOn",function(){return{link:function(a,b,c){b.on("click",function(){$("#"+c.triggerFocusOn).focus()})}}}),angular.module("upsDOApp.directives").directive("doappThreatMatrix",["$compile",function(a){return{restrict:"E",replace:!0,transclude:!1,link:function(a,b,c){$("<script>").attr({src:a.treatMatrixUrl}).appendTo("body")}}}]),angular.module("upsDOApp.directives").directive("windowSize",["$window","$rootScope",function(a,b){function c(){d(),angular.element(a).bind("resize",function(){d()})}function d(){b.windowWidth=a.innerWidth,b.toolTipLocation=b.windowWidth>990?"right":"top"}return{link:c,restrict:"E"}}]);


angular.module("upsDoApp.filters",[]).filter("lowerFirstLetter",function(){return function(a){if(a)return a=a.charAt(0).toLowerCase()+a.slice(1),a.replace(" ","")}}).filter("join",function(){return function(a){if(a)return a=a.replace(/ /g,""),a.toLowerCase()}}).filter("doappPopulateErrorMessage",["doappErrorHandler",function(a){return a.errorList=[],function(b){if(b){var c=a.Errors[b];return void 0===c&&a.errorList?(c=[],a.errorList.push("doappGenericError")):c.ErrorMessage&&a.errorList&&a.errorList.push(c),c.ErrorMessage}}}]).filter("removeSpaces",[function(){return function(a){return angular.isString(a)?a.replace(/[\s]/g,""):a}}]).filter("capFirstLetter",function(){return function(a){if(a)return a=a.charAt(0).toUpperCase()+a.slice(1)}});


UPS_DO_APP.directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0])})})}}}]),UPS_DO_APP.service("fileUpload",["$http","doappConstants",function(a,b){this.uploadBusinessToUrl=function(c){var d=new FormData;d.append("files",c),a({method:"POST",xsrfCookieName:b.XSRFCookieName,data:d,transformRequest:angular.identity,headers:{"Content-Type":void 0},url:"/doapp/OpenAccount/UploadBusinessImage/"}).then(function(a){a.data},function(a){})},this.uploadFinancialToUrl=function(c){var d=new FormData;d.append("files",c),a({method:"POST",xsrfCookieName:b.XSRFCookieName,data:d,transformRequest:angular.identity,headers:{"Content-Type":void 0},url:"/doapp/OpenAccount/UploadFinancialImage/"}).then(function(a){a.data},function(a){})},this.uploadRegistrationToUrl=function(c){var d=new FormData;d.append("files",c),a({method:"POST",xsrfCookieName:b.XSRFCookieName,data:d,transformRequest:angular.identity,headers:{"Content-Type":void 0},url:"/doapp/OpenAccount/UploadRegistrationImage/"}).then(function(a){a.data},function(a){})},this.uploadPAnCardToUrl=function(c){var d=new FormData;d.append("files",c),a({method:"POST",xsrfCookieName:b.XSRFCookieName,data:d,transformRequest:angular.identity,headers:{"Content-Type":void 0},url:"/doapp/OpenAccount/UploadPanCardImage/"}).then(function(a){a.data},function(a){})},this.uploadImporterRegistrationCertificateToUrl=function(c){var d=new FormData;d.append("files",c),a({method:"POST",xsrfCookieName:b.XSRFCookieName,data:d,transformRequest:angular.identity,headers:{"Content-Type":void 0},url:"/doapp/OpenAccount/UploadImporterRegistrationCertificateImage/"}).then(function(a){a.data},function(a){})},this.uploadIdentificationToUrl=function(c){var d=new FormData;d.append("files",c),a({method:"POST",xsrfCookieName:b.XSRFCookieName,data:d,transformRequest:angular.identity,headers:{"Content-Type":void 0},url:"/doapp/OpenAccount/UploadIdentificationImage/"}).then(function(a){a.data},function(a){})},this.uploadFileToUrl=function(a){(new FormData).append("files",a)}}]),angular.module("upsDoApp.services",["ui.bootstrap"]).service("doappWemsDataConversion",["doappService","doappErrorHandler","$rootScope",function(a,b,c){return{convertVAT:function(b){if(a.vatConstants={},b){var c=JSON.parse(b);if(this.hasDataContainer(c)){for(var d=c.angular.dataContainer.item,e=[],f=[],g=[],h=[],i=0;i<d.length;i++){var j=d[i],k=j.key,l=j.value;"VAT_REQUIRED"===k?e.push(l):"VAT_OPTIONAL"===k?f.push(l):"VAT_NOT_NEEDED"===k?g.push(l):"VAT_CERTIFIED_CITY_LIST"===k&&h.push(l)}a.vatConstants.VAT_REQUIRED=e,a.vatConstants.VAT_OPTIONAL=f,a.vatConstants.VAT_NOT_NEEDED=g,a.vatConstants.VAT_CERTIFIED_CITY_LIST=h}}else a.vatConstants.VAT_REQUIRED=["AU"],a.vatConstants.VAT_OPTIONAL=["JP"],a.vatConstants.VAT_NOT_NEEDED=["ALL_OTHERS"],a.vatConstants.VAT_CERTIFIED_CITY_LIST=["Beijing"]},convertPopover:function(b){if(a.popoverConstants={},b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer.item,e=0;e<d.length;e++){var f=d[e],g=f.key,h=f.value;a.popoverConstants[g]=h}}else a.popoverConstants.doappUserIDHeaderPopover=["Your user ID must be 1-16 characters long and include:"],a.popoverConstants.doappNoSpacesPopover=["No spaces"],a.popoverConstants.doappNoEmailPopover=["No email addresses"],a.popoverConstants.doappNoSpecialCharsPopover=["No special characters"],a.popoverConstants.doappPasswordCantContainPopover=["Passwords cannot contain your first or last name, user ID, or email address used to log in to ups.com"],a.popoverConstants.doappPasswordHeaderPopover=["Passwords must be 7-26 characters long and include at least three of the following:"],a.popoverConstants.doappLowerCasePopover=["One lowercase letter"],a.popoverConstants.doappUpperCasePopover=["One uppercase letter"],a.popoverConstants.doappOneNumberPopover=["One number"],a.popoverConstants.doappSpecialCharPopover=["One special character (!@#$%*)"],a.popoverConstants.mycPopoverLine1=["Sign up for UPS My Choice notification now, and we'll allert you to incoming deliveries."],a.popoverConstants.mycPopoverLine2=["We'll also send info on all service features as well as your next steps to access those benefits and manage your alerts."]},convertCreditCardTypes:function(b){if(a.creditCardTypes={},b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer.item,e=0;e<d.length;e++){var f=d[e],g=f.key,h=f.value;a.creditCardTypes[g]=h}}else a.creditCardTypes["01"]="American Express",a.creditCardTypes["04"]="Mastercard"},convertBillingCenter:function(b){if(a.billingCenterConstants=[],b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer.item,e=0;e<d.length;e++){var f=d[e],g=f.value;a.billingCenterConstants.push(g)}}else a.billingCenterConstants=["US"]},convertUTA:function(b){if(a.utaConstants={},b){var c=JSON.parse(b);if(this.hasDataContainer(c)){for(var d=c.angular.dataContainer.item,e=[],f=[],g=[],h=[],i=0;i<d.length;i++){var j=d[i],k=j.key,l=j.value;"UTA_CHECK_BOX_ONLY"===k?e.push(l):"UTA_OPTIONAL_SCROLL"===k?f.push(l):"UTA_REQUIRED_SCROLL"===k?g.push(l):"WAIVER_OF_CONSUMER_RIGHTS"===k&&h.push(l)}a.utaConstants.UTA_CHECK_BOX_ONLY=e,a.utaConstants.UTA_OPTIONAL_SCROLL=f,a.utaConstants.UTA_REQUIRED_SCROLL=g,a.utaConstants.WAIVER_OF_CONSUMER_RIGHTS=h}}else a.utaConstants.UTA_CHECK_BOX_ONLY=["AU","US"],a.utaConstants.UTA_OPTIONAL_SCROLL=["FR"],a.utaConstants.UTA_REQUIRED_SCROLL=["ALL_OTHER_COUNTRIES"],a.utaConstants.WAIVER_OF_CONSUMER_RIGHTS=["AT"]},convertErrorCodes:function(a){b.Errors={};var c={};if(a){var d=JSON.parse(a);if(this.hasDataContainer(d))for(var e=d.angular.dataContainer,f=0;f<e.length;f++){for(var g=e[f].item,h="",i=[],j="",k="",l="",m=0;m<g.length;m++){var n=g[m].key,o=g[m].value.toString();"ErrorCode"===n?-1!==o.indexOf("|")?i=o.split("|"):h=o:"ErrorMessage"===n?j=o:"FieldId"===n?k=o:"FieldName"===n&&(l=o)}if(c={ErrorMessage:j,FieldId:k,FieldName:l},i.length>0)for(var p=0;p<i.length;p++)b.Errors[i[p]]=c;else b.Errors[h]=c}}else c={ErrorMessage:"We're sorry, but it seems we're experiencing technical issues. Please refresh your screen or try again later."},b.Errors.BACK_END_DOWN=c,c.ErrorMessage="Sorry, we're unable to process this request. Please check your information and try again.",b.Errors.doappGenericError=c,b.Errors.errorHeader=" Please correct the following errors:"},convertAppConfig:function(b){if(a.appConfig=[],b){var d=JSON.parse(b);if(this.hasDataContainer(d))for(var e=d.angular.dataContainer.item,f=0;f<e.length;f++){var g=e[f],h=g.key,i=g.value;a.appConfig[h]=i}}else a.appConfig.idleTimeout=1200,a.appConfig.MaxPaymentMethods=99,a.appConfig.MaxChooseAddresses=99;c.$emit("configLoaded")},convertLinks:function(b){if(a.links={},b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer.item,e=0;e<d.length;e++){var f=d[e],g=f.key,h=f.value;a.links[g]=h}}},convertSuffixList:function(b){if(a.suffixValues=[],b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer,e=0;e<d.length;e++){for(var f=d[e].item,g="",h="",i=0;i<f.length;i++){var j=f[i].key,k=f[i].value;"value"===j?g=k:"option"===j&&(h=k)}var l={value:g,option:h};a.suffixValues.push(l)}}},convertApacValidCitiesCN:function(b){if(a.APAC_VALID_CITIES_CN=[],b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer.item,e=0;e<d.length;e++)a.APAC_VALID_CITIES_CN.push(d[e].value)}else a.APAC_VALID_CITIES_CN=["Beijing"]},convertApacValidLocales:function(b){if(a.APAC_INFO={},b){var c=[],d=[],e=JSON.parse(b);if(this.hasDataContainer(e)){for(var f=e.angular.dataContainer.item,g=0;g<f.length;g++){var h=f[g].key,i=f[g].value;"APAC_OPTIONAL"===h?c.push(i):"APAC_REQUIRED"===h&&d.push(i)}a.APAC_INFO.APAC_OPTIONAL=c,a.APAC_INFO.APAC_REQUIRED=d}}else a.APAC_INFO.APAC_OPTIONAL=["AU"],a.APAC_INFO.APAC_REQUIRED=["JP"]},convertDays:function(b){if(a.AVAILABLE_DAYS=[],b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer.item,e=0;e<d.length;e++){var f={day:d[e].value,index:d[e].key,isSelected:!1};a.AVAILABLE_DAYS.push(f)}}else a.AVAILABLE_DAYS=[{day:"Monday",index:"01",isSelected:!1},{day:"Tuesday",index:"02",isSelected:!1},{day:"Wednesday",index:"03",isSelected:!1},{day:"Thursday",index:"04",isSelected:!1},{day:"Friday",index:"05",isSelected:!1},{day:"Saturday",index:"06",isSelected:!1},{day:"Sunday",index:"07",isSelected:!1}]},convertBusinessDocuments:function(b){var c='{"angular":{"dataContainer":[{"item":[{"value":"AU","key":"LocationCode"},{"value":"Business Licence","key":"Type1"},{"value":"Copy of Identification Card","key":"Type2"}]},{"item":[{"value":"CN","key":"LocationCode"},{"value":"Business Licence","key":"Type1"}]},{"item":[{"value":"HK","key":"LocationCode"},{"value":"Business Licence","key":"Type1"}]},{"item":[{"value":"IN","key":"LocationCode"},{"value":"Business Licence","key":"Type1"},{"value":"PAN Card Copy","key":"Type2"},{"value":"Importer-Exporter Code Registration Certificate","key":"Type3"}]},{"item":[{"value":"KR","key":"LocationCode"},{"value":"Business Licence","key":"Type1"}]},{"item":[{"value":"MO","key":"LocationCode"},{"value":"Business Licence","key":"Type1"}]},{"item":[{"value":"MY_1","key":"LocationCode"},{"value":"Form 9 (Perakuan Perbadanan Syarikat Sendirian) or Form 13 (Perakuan Perbadanan Atas Pertukaran nama Syarikat)","key":"Type1"},{"value":"Form 24 (Return of Allotment of Shares)","key":"Type2"},{"value":"Form 49 (Particular of Register of Directors, Managers & Secretaries and change of Particulars)","key":"Type3"}]},{"item":[{"value":"MY_2","key":"LocationCode"},{"value":"Form 9 (Perakuan Perbadanan Syarikat Sendirian) or Form 13 (Perakuan Perbadanan Atas Pertukaran nama Syarikat)","key":"Type1"},{"value":"Form 24 (Return of Allotment of Shares)","key":"Type2"},{"value":"Form 49 (Particular of Register of Directors, Managers & Secretaries and change of Particulars)","key":"Type3"}]},{"item":[{"value":"MY_3","key":"LocationCode"},{"value":"SSM certificate (Suruhanjaya Syarikat Malaysia)","key":"Type1"},{"value":"Applicant’s Identification Card (IC) of company owner","key":"Type2"}]},{"item":[{"value":"MY_4","key":"LocationCode"},{"value":"SSM certificate (Suruhanjaya Syarikat Malaysia)","key":"Type1"},{"value":"Applicant’s Identification Card (IC) of company owner","key":"Type2"}]},{"item":[{"value":"JP","key":"LocationCode"},{"value":"Business Licence","key":"Type1"}]},{"item":[{"value":"SG","key":"LocationCode"},{"value":"Business Licence","key":"Type1"}]},{"item":[{"value":"TH","key":"LocationCode"},{"value":"Business Licence","key":"Type1"},{"value":"Customer Financial Statement","key":"Type2"},{"value":"Registration Statement","key":"Type3"}]},{"item":[{"value":"TW","key":"LocationCode"},{"value":"Business Licence","key":"Type1"}]},{"item":[{"value":"VN","key":"LocationCode"},{"value":"Business Licence","key":"Type1"}]}]}}',d=JSON.parse(c);a.BUSINESS_DOCUMENTS=[],a.BUSINESS_DOCUMENTS_ENGLISH_VERSION=[];var e="";if(b){var f=JSON.parse(b);if(this.hasDataContainer(f)){for(var g=f.angular.dataContainer,h=d.angular.dataContainer,i=0;i<g.length;i++){for(var j=g[i].item,k="",l=[],m=0;m<j.length;m++){e=j[m].key;var n=j[m].value;"LocationCode"===e?k=n:l.push(n)}e=k;var o={};o[e]=l,a.BUSINESS_DOCUMENTS.push(o)}for(var i=0;i<h.length;i++){for(var j=h[i].item,k="",l=[],m=0;m<j.length;m++){e=j[m].key;var n=j[m].value;"LocationCode"===e?k=n:l.push(n)}e=k;var o={};o[e]=l,a.BUSINESS_DOCUMENTS_ENGLISH_VERSION.push(o)}}}},convertCountryList:function(b){if(a.countryList=[],a.countryListArray=[],b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer,e=0;e<d.length;e++){for(var f=d[e].item,g="",h="",i="",j="",k=0;k<f.length;k++){var l=f[k].key,m=f[k].value;"code"===l?g=m:"country"===l?h=m:"CustomerServicePhoneNumber"===l?j=m:"FraudPreventionPhoneNumber"===l&&(i=m)}var n={code:g,country:h,fraudNumber:i,customerServiceNumber:j};a.countryList[g]=n,a.countryListArray.push(n)}}this.sortCountryList()},convertListOfNonPostalMyChoiceCountries:function(b){if(a.doa_nonpostal_mychoice_countries=[],b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer,e=0;e<d.length;e++){for(var f=d[e].item,g="",h=0;h<f.length;h++){var i=f[h].key,j=f[h].value;"Code"===i&&(g=j)}var k={code:g};a.doa_nonpostal_mychoice_countries.push(k)}}},convertListOf16MyChoiceCountryList:function(b){if(a.doa_mychoice_countriesArray=[],b){var c=JSON.parse(b);if(this.hasDataContainer(c))for(var d=c.angular.dataContainer,e=0;e<d.length;e++){for(var f=d[e].item,g="",h=0;h<f.length;h++){var i=f[h].key,j=f[h].value;"Code"===i&&(g=j)}var k={code:g};a.doa_mychoice_countriesArray.push(k)}}},hasDataContainer:function(a){return a.angular&&a.angular.dataContainer},sortCountryList:function(){a.countryListArray&&a.countryListArray.sort(function(a,b){return a.country>b.country?1:b.country>a.country?-1:0})}}}]).service("doappUtilService",["API_SERVICE","$http","$q","$window","doappConstants","IS_DEVELOPMENT","PREPEND_STRING","doappService","$rootScope","doappErrorHandler","IdentityVerificationClientService",function(a,b,c,d,e,f,g,h,i,j,k){return{createWebViewCallback:function(a){if(a){return"https://www.ups.com/webviewCallback?didCompleteRegistration="+(a.didCompleteRegistration?1:0)+"&didCompleteEnrollment="+(a.didCompleteEnrollment?1:0)+"&didCancel="+(a.didCancel?1:0)+"&didTimeout="+(a.didTimeout?1:0)+"&didPassAuth="+(a.didPassAuth?1:0)}return"https://www.ups.com/webviewCallback?didCompleteRegistration=0&didCompleteEnrollment=0&didCancel=0&didTimeout=0&didPassAuth=0"},triggerUTAGCall:function(a){"undefined"!=typeof utag&&void 0!==utag&&utag.view($.extend(utag_data,a),null)},resetUTAGData:function(){"undefined"!=typeof utag_data&&void 0!==utag_data&&(utag_data.gross_revenue="",utag_data.net_revenue="",utag_data.currency="",utag_data.journey_step_number="",utag_data.shipping_package_count="",utag_data.link_name="",utag_data.link_page="",utag_data.link_type="",utag_data.field_name="",utag_data.form_name="",utag_data.form_intent="",utag_data.event_id="0")},createGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})},createPPCLink:function(a){return h.links.ppcLink+"&confirmation="+a},collectEnrollmentData:function(){var a=h.prepopData.ContactName.split(" "),b={FirstName:a[0],LastName:a[a.length-1],Address:h.AddressData,Locale:h.Locale};return b.Address.Country=b.Address.CountryCode,b.Address.PostalCode=b.Address.PostalCode.trim(),b},getTrackingNumberDetails:function(a){i.trackingDetails,b({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(a),url:h.createURL(e.Track)}).then(function(a){if(a){var b=a.data;b&&b.WasSuccessfull&&(i.trackingDetails=b.Object)}},function(a){h.errorCode="BACK_END_DOWN",i.trackingDetailsError=a})},addExistingAccount:function(a){var c=this.collectAddExistingAccountData();b({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(c),url:h.createURL(e.AccountAddition)}).then(function(b){if(a!==e.InitStart&&(angular.element(a).scope().isLoading=!1),b){var c=b.data;if(c&&!0===c.WasSuccessfull)h.addExistingAccountResponse=c.Object,h.addExistingAccountResponse.FPCResponseCode?($(a).modal("toggle"),k.showModal("aiaentry",h.Locale,"DOAPP")):h.addExistingAccountResponse?h.addExistingAccountResponse.HasPromoConflict?(i.promoConflictInfo=h.addExistingAccountResponse,angular.element(e.PromoConflictDiv).scope().togglePromoConflictScreen(a)):(i.isClosing=!0,location.reload(!0)):angular.element(a).scope().errorList=j.createErrorList("doappGenericError");else if(c.Object)try{a!==e.InitStart?angular.element(a).scope().errorList=j.createErrorList(c.Object):(a="#DoAppAddExistingAccountDiv",h.isModalFlow&&$(a).modal("show"),angular.element(a).scope().errorList=j.createErrorList(c.Object))}catch(d){h.addExistingAccountException=d}}else angular.element(a).scope().errorList=j.createErrorList("BACK_END_DOWN")},function(b){return angular.element(a).scope().isLoading=!1,h.errorCode="BACK_END_DOWN",b})},collectAddExistingAccountData:function(){return i.aiaFormData},addPromo:function(a){return c(function(c,d){b({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(a),url:h.createURL(e.addPromoToAccount)}).then(function(a){i.addPromoResult=a.data,c(a.data)},function(a){h.errorCode="BACK_END_DOWN",i.addPromoResult=a,d(a)})})},openAccount:function(a){var c=this.collectOpenAccountData();b({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(c),url:h.createURL(e.AccountCreation)}).then(function(b){a!==e.InitStart&&(angular.element(a).scope().isLoading=!1);var c=b.data;c&&!0===c.WasSuccessfull?(h.openAccountResponse=c.Object,h.openAccountResponse.FraudResponse?($(a).modal("toggle"),k.showModal("Identity",h.Locale)):h.openAccountResponse.FraudFail?(h.shouldDisplayContactUPSError=!0,angular.element(e.OAFailDiv).scope().toggleOpenAccountFailScreen(h.Locale,a)):h.openAccountResponse.AccountNumber?h.openAccountResponse.DiscountDetails&&h.openAccountResponse.DiscountDetails.HasPromoConflict?angular.element(e.PromoConflictDiv).scope().togglePromoConflictScreen(a):angular.element(e.OpenAccountConfirmationDiv).scope().toggleOpenAccountConfirmationScreen(h.Locale,a):angular.element(a).scope().errorList=j.createErrorList("doappGenericError")):c.Object&&("9580190"==c.Object.ErrorCode?angular.element(e.OAFailDiv).scope().toggleOpenAccountFailScreen(h.Locale,a):angular.element(a).scope().errorList=j.createErrorList(c.Object.ErrorCode))},function(a){return h.errorCode="BACK_END_DOWN",a})},collectOpenAccountData:function(){return{IsSaturdayAvailable:i.isSaturdayAvailable,WasSaturdaySelected:h.wasSaturdaySelected,IsBusiness:h.accountOptionsData.isBusiness,IsAlcoholIndicator:h.accountOptionsData.isAlcohol,IsDangerousGoodsIndicator:h.accountOptionsData.isDangerousGoods&&h.WasHazmatChecked,IsLithiumBatteriesIndicator:h.accountOptionsData.isLithiumBatteries&&h.WasHazmatChecked,IsShippingPrescriptionsIndicator:h.accountOptionsData.isShippingPrescription,IsLicensedToShipPrescriptions:h.accountOptionsData.isLicensedForPrescription,InvoiceAddress:h.InvoiceAddressData||h.AddressData,AccountAddress:h.AddressData,IsNIF:i.isNif,VatTaxID:h.accountOptionsData.vatID,IsDefaultPaymentAccount:h.accountOptionsData.isDefaultPaymentAccount,EndUserUpsId:h.SignUpData.UserID,Locale:h.Locale,APACTaxInfo:h.APACTaxInfoData,Pickup:h.pickupOptionsData,CompanyName:h.accountOptionsData.companyName,UnitOfMeasure:h.accountOptionsData.unitOfMeasurement,ImportBrokerageCode:h.accountOptionsData.brokerageCode,ImportBrokerageName:h.accountOptionsData.brokerageName,iobb:h.accountOptionsData.iobb,WasChooseAddress:h.hasVisitedChooseAddress,IsExistingAddress:e.isExistingAddress,UserID:h.SignUpData.UserID,HasExistingPhone:!!h.prepopData.PhoneNumber,IsElectronicInvoiceChecked:h.accountOptionsData.electronicInvoice,documentsUpload:h.documentsupload,PromoCode:i.promoCode,HasDefaultAddress:i.hadDefaultAddress}},hasSavedPayment:function(){b({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(h.Locale),url:h.createURL(e.GetUserPaymentMethods)}).then(function(a){var b=a.data;b&&!0===b.WasSuccessfull?h.savedPayments=b.Object:h.savedPayments=[],i.$emit("loadedSavedPayments")},function(a){h.errorCallbackReponse=a,h.errorCode="BACK_END_DOWN",h.savedPayments=[],i.$emit("loadedSavedPayments")})},getPath:function(a){return f?a:"https://wwwapps.ups.com"+a},openTermsAndConditions:function(a){var b=a,c=Math.round(.8*UPS.configs.viewport.width),e=Math.round(.8*UPS.configs.viewport.height),f=void 0!==window.screenLeft?window.screenLeft:screen.left,g=void 0!==window.screenTop?window.screenTop:screen.top,h=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,i=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,j=h/2-c/2+f,k=i/2-e/2+g,l=d.open(b,"_blank","scrollbars=yes, width="+c+", height="+e+", top="+k+", left="+j);window.focus&&l.focus()},getKeyFromJson:function(a,d){var e=c.defer();return b.get(d).then(function(b){for(var c in b.data)if(-1!==c.indexOf(a)){e.resolve(b.data[c]);break}}),e.promise},mergeNames:function(a){var b=angular.copy(a),c=a.middle_name?" "+a.middle_name+" ":" ",d=a.first_name+c+a.last_name;return d.length>35&&(d=a.first_name+" "+a.last_name,d.length>35&&(d=a.first_name.trim()+" "+a.last_name.trim(),d.length>35&&(d=a.first_name.trim()+" "+a.last_name.trim(),d=d.slice(0,35)))),b.name=d,b},createPrepopInfo:function(){var a=c.defer();return b({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(""),url:h.createURL(e.PrepopInformation)}).then(function(b){var c=b.data;h.prepopData=c.Object,h.SignUpData.UserID=h.prepopData.UserId,a.resolve()},function(b){h.prepopData={ContactName:"",EmailAddress:"",UserID:""},h.errorCallbackReponse=b,h.errorCode="BACK_END_DOWN",a.resolve()}),a.promise},initHeaders:function(){var a=c.defer();return b({method:"GET",url:e.InitURL}).then(function(b){var c=b.data;c&&!0===c.WasSuccessfull?(h.transactionID=c.Object.transactionID,c.Object.xOriginLocale&&(h.Locale=c.Object.xOriginLocale),i.globalEmailAllowed=c.Object.IsGlobalEmailAllowed,c.Object.CPCToken&&(i.cpcTransactionId=c.Object.CPCToken.TransactionID,i.cpcToken=c.Object.CPCToken.Token),a.resolve()):a.resolve()},function(b){h.errorCallbackReponse=b,h.errorCode="BACK_END_DOWN",$("#ajaxError").html("There was an issue. Please try again soon."),$("#enrollmentError").html(""),$("#error_modal").modal("show"),a.resolve()}),a.promise}}}]).service("doappScreenChanger",["doappService","doappScreenLogger","doappConstants","$rootScope","doappErrorHandler",function(a,b,c,d,e){return{changeScreen:function(f,g,h){d.apiErrorKey="",e.errorList=[],b.logChange(f,g),angular.element(f).scope()&&(angular.element(f).scope().isShown=!1),h?f===c.InitStart?$(g).modal("show"):($(f).on("hidden.bs.modal",function(b){a.hiddenModalTrigger=b,$(g).modal("show"),$(f).off()}),$(f).modal("hide"),($(g).data("bs.modal")||{}).isShown||$(g).modal("show")):(f===c.InitStart?($(g).show(),$(g).removeAttr("hidden"),$(document).scrollTop(0)):($(f).hide(),$(f).attr("hidden","hidden"),$(g).show(),$(g).removeAttr("hidden"),$(document).scrollTop(0)),d.displayFullPage=!0),angular.element(g).scope()&&(angular.element(g).scope().isShown=!0)}}}]).service("doappScreenLogger",["doappConstants",function(a){return{log:"",logChange:function(b,c){b===a.InitStart?this.log+="Time="+Math.round(+new Date/1e3)+"~InitScreen="+c:this.log+="|Time="+Math.round(+new Date/1e3)+"~From="+b+"~To="+c}}}]).service("doappClientService",["$http","doappService","doappConstants","$compile","PREPEND_STRING","$rootScope",function(a,b,c,d,e,f){return{showModal:function(g,h,i,j){b.clientCallback=i,b.Locale=h,b.entryPoint=g,f.clientServiceTrackingNumber=j,b.isMyChoiceFlow=!1,b.isSignUpFlow=!1,b.isMyChoicePremiumFlow=!1,b.isOpenAccountFlow=!1,b.isPickupFlow=!1,b.isAddNotificationFlow=!1,b.isHazmatChecklistFlow=!1,b.isAddExistingAccountFlow=!1,b.isAddPromoFlow=!1,b.isPremiumConfirmationFlow=!1,b.entryPoint===c.SignUpMyChoice?b.isMyChoiceFlow=!0:b.entryPoint===c.SignUp?b.isSignUpFlow=!0:b.entryPoint===c.SignUpMyChoicePremium?(b.isMyChoiceFlow=!0,b.isMyChoicePremiumFlow=!0):b.entryPoint===c.MyChoiceConfirmation?b.isMyChoiceFlow=!0:b.entryPoint===c.OpenAccount?b.isOpenAccountFlow=!0:b.entryPoint===c.Pickup?b.isPickupFlow=!0:b.entryPoint===c.AddNotifications?b.isAddNotificationFlow=!0:b.entryPoint===c.HazmatChecklist?b.isHazmatChecklistFlow=!0:b.entryPoint===c.AddExistingAccount?b.isAddExistingAccountFlow=!0:b.entryPoint===c.AddPromo?b.isAddPromoFlow=!0:b.entryPoint===c.MyChoicePremiumConfirmation&&(b.isPremiumConfirmationFlow=!0),b.IsServiceCall=!0,b.isModalFlow=!0,a.get(e+"/doapp/app_assets/"+g+".html").then(function(a){var b=f.$new();$("body").append(d(a.data)(b))})}}}]).service("doappErrorHandler",["$rootScope",function(a){return this.errorList=[],{createError:function(a,b,c){var d=this.Errors[b];if(void 0!==d.FieldName){var e=a[d.FieldName];c.errors[d.FieldName]=d.ErrorMessage,e.$setValidity("serverMessage",!1,a)}},getErrorList:function(a,b){for(var c=[],d=0;d<b.length;d++)c.push(this.Errors[b[d]]);return c},createErrorList:function(b){var c=[];"string"==typeof b&&(b=[b]);for(var d=0;d<b.length;d++){var e=b[d];if("string"!=typeof e){c.push(this.Errors.doappGenericError);break}var f=e.indexOf("~");f>-1&&(a.apiErrorKey=e.substring(f+1,e.length),e=e.substring(0,f)),c.push(this.Errors[e]||this.Errors.doappGenericError||this.Errors.BACK_END_DOWN)}return window.scrollTo(0,0),c}}}]).service("doappService",["$http","doappConstants","$location",function(a,b,c){return{convertModal:function(a){return a=a.replace("modal-dialog modal-lg","ups-wrap"),a=a.replace("ups-application_wrapper ups-app_onboarding ups-form_wrap","ups-wrap_inner"),a=a.replace("modal-content",""),a=a.replace("modal-header","ups-onboApp-wrap-ppc ups-application_wrapper ups-app_onboarding"),a=a.replace("modal-title","ups-no-modal"),a=a.replace("ups-modal_subtitle",""),a=a.replace("ups-icon-x",""),a=a.replace("modal-body","ups-application_wrapper ups-form_wrap ups-app_onboarding")},createURL:function(a){var b=c.url()||window.location.href,d=b.split("?"),e=d[1];return void 0!==e?(e=void 0===this.getUrlParameter("DOAPP_USE_CASE_NUMBER")?e+"&TRANSACTION_ID="+this.transactionID+"&DOAPP_USE_CASE_NUMBER=-1":e+"&TRANSACTION_ID="+this.transactionID,e=e+"&doappFlow="+this.entryPoint,a+"?"+e):a+"?TRANSACTION_ID="+this.transactionID+"&DOAPP_USE_CASE_NUMBER=-1&doappFlow="+this.entryPoint},getUrlParameter:function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d];if(e.indexOf("=")){var f=e.split("=");if(f[0]===a){return decodeURIComponent(f[1])}}}return""},getHTML:function(c,d){var e={PageIds:d,Locale:this.Locale};a({method:"POST",xsrfCookieName:b.XSRFCookieName,data:JSON.stringify(e),url:this.createURL(b.GetHTMLContent)}).then(function(a){var b=a.data;b&&!0===b.WasSuccessfull&&c(b.Object)},function(a){this.errorCallbackReponse=a,this.errorCode="BACK_END_DOWN",$("#ajaxError").html("There was an issue with getting name sugestions suggestions. Please try again soon."),$("#enrollmentError").html(""),$("#error_modal").modal("show")})}}}]).service("doappConstants",["PREPEND_STRING",function(a){this.SignUpDiv="#SignupDiv",this.UTADiv="#UTADiv",this.SignupConfirmationDiv="#SignupConfirmationDiv",this.GuestShippingConfirmationDiv="#GuestShippingConfirmationDiv",this.AvailabilityDiv="#AvailabilityDiv",this.AddressDiv="#AddressDiv",this.ChooseAddressDiv="#ChooseAddressDiv",this.AccountOptionsDiv="#AccountOptionsDiv",this.OAFailDiv="#OAFailDiv",this.HazmatDiv="#HazmatDiv",this.InvoiceMailingAddressDiv="#InvoiceMailingAddressDiv",this.AddOrAuthAccountDiv="#AddOrAuthAccountDiv",this.UTADiv="#UTADiv",this.ChooseNotificationDiv="#ChooseNotificationDiv",this.HazmatAndLitiumDiv="#HazmatAndLitiumDiv",this.FraudDiv="#FraudDiv",this.APACUploadDiv="#APACUploadDiv",this.APACTaxInfoDiv="#APACTaxInfoDiv",this.PickupOptionsDiv="#PickupOptionsDiv",this.PickupStartDateDiv="#PickupStartDateDiv",this.OpenAccountConfirmationDiv="#OpenAccountConfirmationDiv",this.ChoosePaymentDiv="#ChoosePaymentDiv",this.AddPaymentCardDiv="#AddPaymentCardDiv",this.AddPaymentMethodDiv="#AddPaymentMethodDiv",this.MyChoiceConfirmationDiv="#MyChoiceConfirmationDiv",this.PickupConfirmationDiv="#PickupConfirmationDiv",this.AcceptMyChoiceTermsDiv="#AcceptMychoiceTermsDiv",this.AddExistingAccountDiv="#DoAppAddExistingAccountDiv",this.AccountAIADiv="#AccountAIADiv",this.PromoConflictDiv="#PromoConflictDiv",this.ContactCSDiv="#ContactCSDiv",this.promoChoosePaymentDiv="#PromoChoosePaymentDiv",this.promoTermsAndConditionsDiv="#PromoTermsAndConditionsDiv",this.promoConfirmationDiv="#PromoConfirmationDiv",this.InitStart="InitStart",this.SignUp="SignUp",this.SignUpMyChoice="SignUpMyChoice",this.SignUpMyChoicePremium="SignUpMyChoicePremium",this.MyChoiceConfirmation="MyChoiceConfirmation",this.AcceptMyChoiceTerms="AcceptMyChoiceTerms",this.OpenAccount="SignUpOpenAccount",this.Pickup="Pickup",this.AddNotifications="AddNotifications",this.HazmatChecklist="HazmatChecklist",this.AddExistingAccount="AddExistingAccount",this.AddPromo="AddPromo",this.MyChoicePremiumConfirmation="MyChoicePremiumConfirmation",this.Register=a+"/doapp/Registration/Register",this.LoggedInCheck=a+"/doapp/IsUserLoggedIn",this.UniqueIDCheck=a+"/doapp/Registration/UniqueIDCheck",this.SocialIdentityCheck=a+"/doapp/Registration/SocialIdentityCheck",this.SendIDs=a+"/doapp/Registration/SendIDs",this.UniqueEmailCheck=a+"/doapp/Registration/UniqueEmailCheck",this.AccountAddition=a+"/doapp/Registration/AddExistingAccount",this.CheckNonUsMyChoice=a+"/doapp/MYC/CheckNonUsMC",this.IsEligibileForMyChoice=a+"/doapp/MYC/IsEligibileForMyChoice",this.AutoEnroll=a+"/doapp/MYC/AutoEnroll",this.ValidateMCAddress=a+"/doapp/MYC/ValidateMCAddress",this.MatchingEnrollment=a+"/doapp/MYC/MatchingEnrollment",this.SaveMCAddress=a+"/doapp/MYC/SaveMCAddress",this.PrepopulateFromSession=a+"/doapp/PrepopulateFromSession",this.AddAddress=a+"/doapp/OpenAccount/AddAddress",this.InitURL=a+"/doapp/Init",this.ParseName=a+"/doapp/ParseName",this.SaturdayAvailability=a+"/doapp/OpenAccount/IsSaturdayTimeAvailable",this.PickupOptions=a+"/doapp/OpenAccount/PickupOptions",this.DaySpecificCheck=a+"/doapp/OpenAccount/DaySpecificCheck",this.GetHTMLContent=a+"/doapp/Content/GetHTML",this.CloseDoapp=a+"/doapp/CloseDoapp",this.Logout=a+"/doapp/Logout",this.HasEnrollmentToken=a+"/doapp/HasEnrollmentToken",this.AccountCreation=a+"/doapp/OpenAccount/OpenAccount",this.GetMyAddresses=a+"/doapp/OpenAccount/GetMyAddresses",this.PrepopInformation=a+"/doapp/Prepop/GetPrepopInformation",this.GetUserPaymentMethods=a+"/doapp/Payment/GetUserPaymentMethods",this.GetAcceptedPayments=a+"/doapp/Payment/GetAcceptedPayments",this.GetCPCRequestToken=a+"/doapp/Payment/GetCPCRequestToken",this.AcceptMyChoiceTerms=a+"/doapp/MYC/AcceptMyChoiceTerms",this.Track=a+"/doapp/Track/GetTrackingDetails/",this.GetMYCPromoDetails=a+"/doapp/Promo/GetMYCPromoDetails/",this.addPromoToAccount=a+"/doapp/Promo/AddPromoToAccount/",this.SignUpRoute="/register",this.SignUpMyChoiceRoute="/registermyc",this.SignUpMyChoicePremiumRoute="/registermycpremium",this.SignUpOARoute="/registeroa",this.PickupRoute="/pickup",this.AddNotificationsRoute="/addnotifications",this.AddExistingAccountRoute="/addexistingaccount",this.AccountAIA="/accountaia",this.HazmatChecklistRoute="/doapp/hazmatchecklist",this.AcceptMyChoiceTermsRoute="/doapp/accepttermmodal",this.addPromoCodeRoute="/doapp/addpromocode",this.RegularAddressModal="Regular",this.InvoiceAddressModal="Invoice",this.socialURL="ups.doa-success-onsubmit.json",this.signUpValuesURL="ups.doa-signup.json",this.pickupOptionsValuesURL="ups.doa-pickup-options.json",this.myChoiceAvalURL="ups.doa-my-choice-availability.json",this.addressInfoURL="ups.doa-enter-address.json",this.localizedInfoURL="/assets/resources/json/uib_angularjs_calendar_ll_CC.json",this.doapp_sign_up="ct1_doapp_signup",this.doapp_uta="ct1_doapp_uta",this.doapp_uta_legal="uta_legal",this.doapp_oa_fail="ct1_doapp_oa_fail",this.doapp_oa_hazmat="ct1_doapp_oa_hazmat",this.doapp_account_options="ct1_doapp_oa_options",this.doapp_address="ct1_doapp_enteraddress",this.doapp_apac_tax_info="ct1_doapp_oa_apactax",this.doapp_apac_upload="ct1_doapp_oa_apacupload",this.doapp_choose_address="ct1_doapp_chooseaddress",this.doapp_choose_notification="ct1_doapp_requestnotifications",this.doapp_my_availability="ct1_doapp_umc_availabilitycheck",this.doapp_open_account_confirmation="ct1_doapp_confirm_oa",this.doapp_pickup_options="ct1_doapp_choosepickup",this.doapp_pickup_start_date="ct1_doapp_choosedate",this.doapp_page_header="header-full",this.doapp_page_footer="footer-full",this.doapp_add_payment_card="ct1_doapp_addpaymentcard",
this.doapp_choose_payment="ct1_doapp_choosepayment",this.doapp_my_choice_confirmation="ct1_doapp_confirm_umc",this.doapp_add_payment_method="ct1_doapp_addpaymentmethod",this.doapp_signup_confirmation="ct1_doapp_confirm_ups",this.doapp_pickup_confirmation="ct1_doapp_confirm_fromschedulepickup",this.doapp_guest_shipping_confirmation="ct1_doapp_confirm_fromguestshipping",this.doapp_timeout="ct1_doapp_timeout",this.doapp_accept_mychoice_terms="ct1_doapp_acceptmychoiceterms",this.doapp_aia="ct1_doapp_aia",this.doapp_promo_conflict="ct1_doapp_paymentoptions_dlg_promoconflict",this.doapp_contact_cs="ct1_doapp_contact_cs",this.doapp_promo_choose_payment="ct1_doapp_promo_choose_payment",this.doapp_promo_confirmation="ct1_doapp_promo_confirmation",this.doapp_promo_terms_and_conditions="ct1_doapp_promo_terms_and_conditions",this.doapp_cpc_wem="ct1_doapp_cpc",this.doapp_suffix_list="doa_suffix_options",this.doa_apac_valid_cities_cn="doa_apac_valid_cities_cn",this.doa_apac_valid_locales="doa_apac_valid_locales",this.doa_business_documents_wem="doa_business_documents_required_per_location",this.doa_days_wem="doa_days",this.doa_country_list="doa_country_list",this.doapp_error_list_wem="doapp_errors",this.doa_app_config_wem="doa_app_config",this.doa_links_wem="doa_links",this.doa_uta_wem="doa_uta",this.doa_vat_wem="doa_vat",this.doa_billingcentercountries_wem="doa_billingcentercountries",this.doa_popover_wem="doa_popover",this.doa_cac_wem="doa_cac",this.doa_credit_card_types="doa_credit_card_types",this.doa_mychoice_16countries="doa_mychoice_countries",this.doa_nonpostal_mychoice_countries="doa_nonpostal_mychoice_countries",this.apacValidFileTypes=["application/pdf","application/x-pdf","application/x-bzpdf","application/x-gzpdf","image/gif","image/jpg","image/jpeg","image/tif","image/tif-fx","image/tiff","imagtiff-fx"],this.XSRFCookieName="DOA-XSRF-TOKEN"}]).service("doappScopeStack",function(){this.LocationStack=[]}).service("doappUploadServices",["$timeout","Upload",function(a,b){var c=this;return c.uploadFile=function(a,c){return a&&(a.upload=b.upload({url:"https://angular-file-upload-cors-srv.appspot.com/upload",data:{file:a}}),a.upload.then(function(b){a.result=b.data,c()},function(b){b.status>0&&(a.errorMsg=b.status+": "+b.data)},function(b){a.progress=Math.min(100,parseInt(100*b.loaded/b.total)),a.csv&&c()})),a},c}]).service("doappProgressBarService",[function(){var a={interval:10,min:0,max:100,offset:270},b=this;return b.startProgressBar=function(b){return b<a.max&&(b+=a.interval),b},b}]).service("doappNotificationService",["$window","$rootScope",function(a,b){var c=[],d={UPS_ERR_01:{errorCode:404,errorMessage:"File not found",errorDetail:"File not found"}};return{handleError:function(a,e){if(a)if("object"==typeof a)a.length>0?a[0].errorCode&&a[0].errorMessage&&(c=a):c=[a];else{var f=d[a];a=f?{id:a,msg:f.message}:{id:a,msg:e},c=a}else c=[];b.$emit("handleError",c)}}}]);


function isAtUTABottom(){Math.round($("#utaScrollBar")[0].scrollHeight-$("#utaScrollBar").scrollTop()-$("#utaScrollBar").innerHeight()<=3)?angular.element("#UTADiv").scope().updateScrollability(!0):angular.element("#UTADiv").scope().updateScrollability(!1)}angular.module("upsDOApp.controllers").controller("DOApp.AddPaymentCardCtrl",["$scope","doappScreenChanger","doappConstants","doappService","doappUtilService","$rootScope","$http",function(a,b,c,d,e,f,g){function h(){a.form={},a.form.SameAddr=!0,a.invalidCard=!1;var b="",c="";a.cpcApi={};var e=d.Locale.substring(3,5);g({method:"POST",url:"https://wwwapps.ups.com/ppc/Profile/GetCPCTokenRequest"}).then(function(f){var g=f.data;g.Response&&g.Response.IsSuccess?(d.cpcCallIsSuccess=!0,b=g.token,c=g.appId,a.widgetOptions={transactionId:d.transactionID,appId:c,uiType:2,country:e,userId:"xolt_test",autoSavePayment:!0,autoValidate:!0,cardTypeListFlag:2,collectAddress:!0,accountKey:"keyValue",newPaymentCard:!0,iobb:document.getElementById("iobb").value,token:b,cpcwsBaseUri:"https://cclamp.cde.ismd.ups.com/",useCookies:!0,redirectTo:"https://cclamp.cde.ismd.ups.com/cpcws/redirect",returnTo:window.location.protocol+"//"+window.location.host+"/"},a.cpcApi.init(a.widgetOptions)):d.cpcCallIsSuccess=!1})}a.savePaymentToProfile=function(){a.cpcApi.saveToProfile(function(){},function(){})},a.computeFlow=function(){e.hasSavedPayment()},f.$on("loadedSavedPayments",function(){d.savedPayments.length?angular.element(c.ChoosePaymentDiv).scope().toggleChoosePaymentModal(d.Locale,c.InitStart):(h(),b.changeScreen(c.InitStart,c.AddPaymentCardDiv,d.isModalFlow))}),a.toggleAddCardScreen=function(a,e){h(),b.changeScreen(e,c.AddPaymentCardDiv,d.isModalFlow)},a.changeCard=function(b){b&&(a.invalidCard=!1)},a.changeVerCode=function(b){b&&(a.invalidCode=!1)},a.changeImage=function(b){a.isImage=!!b},a.checkLength=function(b){b.length<16?a.invalidCard=!0:a.invalidCard=!1},a.checkcodeLength=function(b){b.length<3?a.invalidCode=!0:a.invalidCode=!1},a.changeYear=function(b){b=parseInt(b);var c=new Date,d=c.getFullYear(),e=c.getMonth(),f=a.Months;b===d?(angular.forEach(f,function(a,b){e>=f[b].id&&(f[b].isValid=!0)}),a.form.month=f[e].month.toString()):angular.forEach(f,function(a,b){f[b].isValid=!1})},a.saveMethods=function(b,e){if(b){var f=a.form;f.payementNickName=f.Cardtype+f.cardNumber.slice(-3),f.Method="Payment Card-"+f.Cardtype,f.Number="XXXXXXXXXXXXX"+f.cardNumber.slice(-3),f.accountType="Payment Card",f.makeDefault?f.Default="DEFAULT METHOD":f.Default="Make Default Method",a.diffAddress?angular.element(c.AddressDiv).scope().toggleAddressModal(d.Locale,c.RegularAddressModal,c.AddPaymentCardDiv):angular.element(c.MyChoiceConfirmationDiv).scope().toggleMyChoiceConfirmationModal(d.Locale,c.AddPaymentCardDiv)}else angular.forEach(e.$error.required,function(a){a.$setDirty()})},a.$watch("finishedLoading",function(){a.computeFlow()})}]),angular.module("upsDOApp.controllers").controller("DOApp.AddPaymentMethodCtrl",["$scope","doappScreenChanger","doappConstants","doappService","doappUtilService","$rootScope","$http","doappErrorHandler",function(a,b,c,d,e,f,g,h){function i(){a.selectedOption="",a.shouldDisplayCreditCard=-1!==a.payments.indexOf("01"),a.shouldDisplayShippingAccount=-1!==a.payments.indexOf("05"),a.shouldDisplayPaypal=-1!==a.payments.indexOf("02")}a.checkMethod=function(b){a.selectedOption=b},a.toggleAddPaymentMethodScreen=function(e,f){g({method:"POST",xsrfCookieName:c.XSRFCookieName,data:JSON.stringify(d.Locale),url:d.createURL(c.GetAcceptedPayments)}).then(function(e){var g=e.data;g&&!0===g.WasSuccessfull&&(a.payments=g.Object,i(),b.changeScreen(f,c.AddPaymentMethodDiv,d.isModalFlow))},function(b){b.Object&&(a.errorList=h.createErrorList(b.Object))})}}]),angular.module("upsDOApp.controllers").controller("DOApp.AddExistingAccountCtrl",["$rootScope","$scope","doappScreenChanger","doappConstants","doappService","doappErrorHandler","doappUtilService","COUNTRY_CODE_CONSTANTS",function(a,b,c,d,e,f,g,h){b.init=function(){b.form=b.ups_AddExistingAccountForm,b.view0Fields=[b.form.accountNumber,b.form.accountNickname,b.form.postalCode],b.view1Fields=[b.form.airFreightAccountNumber,b.form.airFreightNickname],b.docsAndPackagesSelected=!0,b.countries=e.countryListArray,b.country=e.Location,b.makeDefaultPayment=!1,b.makeAirFreightDefaultPayment=!1,b.clicked=!1,b.isPostalRequired=b.getIsPostalRequired(e.Location),b.resetInputData(),g.resetUTAGData()},b.resetInputData=function(){b.accountNumber="",b.accountNickname="",b.postalCode="",b.airFreightAccountNumber="",b.airFreightNickname="",b.ups_AddExistingAccountForm.$setPristine(),b.ups_AddExistingAccountForm.$setUntouched()},b.getIsPostalRequired=function(a){return-1!==h.POSTAL_REQUIRED.indexOf(a)},b.updatePostalRequired=function(a){b.isPostalRequired=b.getIsPostalRequired(a.country)},b.toggleAddExistingAccountScreen=function(){b.init(),c.changeScreen(d.InitStart,d.AddExistingAccountDiv,e.isModalFlow)},b.toggleAccountType=function(a,c){b.clicked=!1,b.shouldToggleAccountType(c)&&(b.errorList=[],b.docsAndPackagesSelected=!b.docsAndPackagesSelected,b.cleanForm())},b.shouldToggleAccountType=function(a){return!(b.docsAndPackagesSelected&&0===a||!b.docsAndPackagesSelected&&1===a)},b.cleanForm=function(){var a=b.docsAndPackagesSelected?b.view0Fields:b.view1Fields;angular.forEach(a,function(a){var b=a.$viewValue;""!==b&&void 0!==b||a.$setPristine()})},b.aiaCallback=function(){g.addExistingAccount("InitStart")},b.continueFlow=function(c,e){b.continueForm=e,b.isLoading=!0,b.clicked=!0,b.isFormValid()?(a.aiaFormData=b.collectFormData(),g.addExistingAccount(d.AddExistingAccountDiv)):b.isLoading=!1},b.isFormValid=function(){var a=!0,c=b.docsAndPackagesSelected?b.view0Fields:b.view1Fields;return angular.forEach(c,function(b){b.$valid||(a=!1,b.$setDirty())}),a},b.collectFormData=function(){return{iobb:document.getElementById("iobb")?document.getElementById("iobb").value:"EMPTY",IsDocsAndPackagesType:b.docsAndPackagesSelected,DocsAndPackagesAccount:{AccountNumber:b.accountNumber,AccountNickname:b.accountNickname,Country:b.country,PostalCode:b.postalCode,DefaultPaymentIndicator:b.makeDefaultPayment},AirFreightAccount:{AirFreightAccountNumber:b.airFreightAccountNumber,AirFreightNickname:b.airFreightNickname,DefaultAirFreightIndicator:b.makeAirFreightDefaultPayment},Locale:e.Locale,PromoCode:a.promoCode}}}]),angular.module("upsDOApp.controllers").controller("DOAPP.ChooseAddressCtrl",["$scope","$rootScope","$http","doappService","doappConstants","doappScreenChanger","doappUtilService",function(a,b,c,d,e,f,g){a.init=function(){a.parentFormObj=[],a.addClicked=!1,a.disabled=!1,d.fromChooseAddress=!1,a.enableNextbtn=!1,a.isNextClicked=!1,a.getUsersAddresses(),g.resetUTAGData()},a.getUsersAddresses=function(){c({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(""),url:d.createURL(e.GetMyAddresses)}).then(function(c){var g=c.data;g&&g.WasSuccessfull&&g.Object.Addresses&&g.Object.Addresses.length>0?(d.hasVisitedChooseAddress=!0,a.parentFormObj=a.cleanAvailableAddresses(g.Object.Addresses),b.hadDefaultAddress=g.Object.HasDefaultAddress,0!==a.parentFormObj.length?(a.allowAddOne=a.parentFormObj.length<parseInt(d.appConfig.MaxChooseAddresses),a.fromScreen===e.SignUpDiv?f.changeScreen(e.InitStart,e.ChooseAddressDiv,d.isModalFlow):f.changeScreen(a.fromScreen,e.ChooseAddressDiv,d.isModalFlow)):angular.element(e.AddressDiv).scope().toggleAddressModal(d.Locale,e.RegularAddressModal,e.ChooseAddressDiv)):(a.parentFormObj=[],d.hasVisitedChooseAddress=!1,angular.element(e.AddressDiv).scope().toggleAddressModal(d.Locale,e.RegularAddressModal,e.ChooseAddressDiv))},function(b){d.errorCallbackReponse=b,d.errorCode="BACK_END_DOWN",a.parentFormObj=[],angular.element(e.AddressDiv).scope().toggleAddressModal(d.Locale,e.RegularAddressModal,e.ChooseAddressDiv)})},a.cleanAvailableAddresses=function(a){for(var b=[],c=0;c<a.length;c++)a[c].Country===d.Location&&b.push(a[c]);return b},a.toggleChooseAddressModal=function(b,c){a.fromScreen=c,a.init()},a.callNextPage=function(b){b&&(d.Country=a.parentFormObj.CountryCode,a.isChooseAddress?(d.fromChooseAddress=!0,e.isExistingAddress=!0,angular.element(e.AddressDiv).scope().toggleAddressModal(d.Locale,e.RegularAddressModal,e.ChooseAddressDiv)):a.addClicked&&(e.isExistingAddress=!1,angular.element(e.AddressDiv).scope().toggleAddressModal(d.Locale,e.RegularAddressModal,e.ChooseAddressDiv)))},a.toggleselectText=function(b){a.enableNextbtn=!0,a.addClicked=!1,a.isChooseAddress=!0,angular.forEach(a.parentFormObj,function(a,c){c===b?(a.isSelected=!0,d.AddressData=a,d.AddressData.CountryCode=d.AddressData.Country,d.AddressData.StateProvinceCode=d.AddressData.StateProvince):a.isSelected=!1})},a.addBtnClicked=function(b){a.addClicked=!0,a.enableNextbtn=!0,a.isChooseAddress=!1,angular.forEach(a.parentFormObj,function(c,d){d===b?(c.isSelected=!0,a.selectedAddressInfo=c):c.isSelected=!1})}}]),angular.module("upsDOApp.controllers").controller("DOAPP.PickupStartDateCtrl",["$scope","doappService","doappConstants","doappScreenChanger","doappUtilService","$rootScope","$http",function(a,b,c,d,e,f,g){function h(){a.isLoading=!1,a.dateMoved=!1,b.wasSaturdaySelected=!1;var c=new Date;c.setDate(c.getDate()+2);var d=c.getDay();0===d?c.setDate(c.getDate()+1):6===d&&c.setDate(c.getDate()+2);var f=new Date;f.setDate(f.getDate()+13);var g=f.getDay();switch(0===g?f.setDate(f.getDate()-2):6===g&&f.setDate(f.getDate()-1),a.dt=c,a.min=c,a.max=f,a.nextIsClicked=!1,a.min.getDay()){case 1:case 2:case 3:f.setDate(a.min.getDate()+9);break;case 4:case 5:f.setDate(a.min.getDate()+11)}1==c.getDay()&&4==f.getDay()&&f.setDate(f.getDate()-1),a.dateOptions={"year-format":"yyyy","starting-day":1,showWeeks:!1,minDate:c,maxDate:f},e.resetUTAGData()}function i(a){var b=a.toString().split(" ");return b.length>=3?b[0]+", "+b[1]+" "+b[2]:""}function j(){return{SpecificDaysSelected:b.pickupOptionsData.DaysOfTheWeek,AvailableDays:b.availableDates}}function k(a){var c="";if(b.availableDates){var d=a.getYear()+1900,e=a.getMonth()+1;c=a.getDate(),e=e<=9?"0"+e:e,c=c<=9?"0"+c:c;var f=d.toString()+e.toString()+c.toString();return-1!==b.availableDates.indexOf(f)}return!(0===(c=a.getDay())||6===c)}function l(){b.availableDates&&b.availableDates.length&&(a.dateOptions.minDate=m(b.availableDates[0],!0),a.dateOptions.maxDate=m(b.availableDates[b.availableDates.length-1],!1)),a.min=a.dateOptions.minDate}function m(b,c){if(b){if(8===b.length){var d=b.substring(0,4),e=parseInt(b.substring(4,6))-1,f=b.substring(6,8);return new Date(d,e,f)}return c?a.min:a.max}return new Date}function n(a){var b=parseInt(a.getYear()+1900),c=a.getMonth()+1,d="";d=c<10?"0"+c:parseInt(c);var e=parseInt(a.getDate()),f="";return f=e<10?"0"+e.toString():e.toString(),b.toString()+d.toString()+f}h(),a.setDate=function(b,c,d){a.dt=new Date(b,c,d)},a.togglePickupStartDateModal=function(){b.availableDates=b.masterAvailabileDays,a.$watch("dt",function(){k(a.dt)?6===a.dt.getDay()?b.wasSaturdaySelected=!0:b.wasSaturdaySelected=!1:(a.firstAvailableDay=i(a.min),a.dt=a.min,a.dateMoved=!0)},!0),99===f.chosenField?g({method:"POST",xsrfCookieName:c.XSRFCookieName,data:JSON.stringify(j()),url:b.createURL(c.DaySpecificCheck)}).then(function(a){var e=a.data;e&&e.WasSuccessfull&&(b.availableDates=e.Object),l(),d.changeScreen(c.PickupOptionsDiv,c.PickupStartDateDiv,b.isModalFlow)},function(a){b.errorCallbackReponse=a,b.errorCode="BACK_END_DOWN"}):(l(),d.changeScreen(c.PickupOptionsDiv,c.PickupStartDateDiv,b.isModalFlow))},a.check=function(){a.first=!0},a.clear=function(){a.dt=null},a.goback=function(){d.changeScreen(c.PickupStartDateDiv,c.PickupOptionsDiv,b.isModalFlow)},a.nextConfirmation=function(d){a.isFormValid=d,a.isLoading||a.dt&&(a.isLoading=!0,b.PickupStartDate=a.dt,b.pickupOptionsData.StartDate=n(a.dt),e.openAccount(c.PickupStartDateDiv))}}]),angular.module("upsDOApp.controllers").controller("DOApp.ChoosePaymentCtrl",["IS_DEVELOPMENT","$scope","$http","$window","$location","$rootScope","UtilService","$timeout","$filter","doappScreenChanger","doappConstants","doappService","doappErrorHandler","doappUtilService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.init=function(a){b.hasMadeSelection=!1,b.showMustMakeSelectionWording=!1,b.payments=f.payments,b.cpcToken=f.cpcToken,b.cpcTransactionId=f.cpcTransactionId,b.addClicked=!1,b.shouldShowCancelDialog=!1,f.didUseCPC=!1,f.cpcPaymentAddress={},f.cpcCardData="",b.resetIsSelected(),b.myChoiceCard={},a?j.changeScreen(a,k.ChoosePaymentDiv,l.isModalFlow):j.changeScreen(k.InitStart,k.ChoosePaymentDiv,l.isModalFlow)},b.initCPCWidget=function(c){var d=a?"https://www.ups.com/":window.location.origin+"/";b.cpcApi=c;var e=document.getElementById("iobb"),g=new Cpc.WidgetOptions;g.uiType=2,g.appId="hG76moXdB93nueE8",g.token=f.cpcToken,g.transactionId=f.cpcTransactionId,g.country=l.Location,g.locale=l.Locale,g.currency="USD",g.cpcwsBaseUri=d,g.iobb=e?e.value:"",g.newPaymentCard=!0,g.cacwsBaseUri=d,g.templateString=l.cpc_html,g.cacTemplateString=l.cac_html,b.cpcApi.init(g)},b.toggleChoosePaymentModal=function(a){c({method:"POST",data:JSON.stringify(""),url:l.createURL(k.GetUserPaymentMethods)}).then(function(c){var d=c.data;d&&(d.WasSuccessfull?f.payments=d.Object.PaymentInfo:f.payments=[],d.Object?(f.cpcToken=d.Object.CPCToken,f.cpcTransactionId=d.Object.CPCTransactionId):(f.cpcToken="",f.cpcTransactionId=n.createGuid())),b.init(a)},function(a){f.payments=[],f.cpcToken="",f.cpcTransactionId=n.createGuid()})},b.resetIsSelected=function(){for(var a=0;a<b.payments.length;a++)b.payments[a].isSelected=!1},b.toggleSelectedPayment=function(a){b.hasMadeSelection=!0,b.addClicked=!1,b.resetIsSelected(),b.payments[a].isSelected=!0,b.myChoiceCard=b.payments[a]},b.toggleAddClicked=function(){b.hasMadeSelection=!0,b.resetIsSelected(),b.addClicked=!0,b.myChoiceCard={}},b.toggleCancelOption=function(a){b.shouldShowCancelDialog=a,b.showMustMakeSelectionWording=!1},b.continue=function(a){f.myChoiceData.DidAttemptPremiumCode=a,(b.hasMadeSelection||0===f.payments.length)&&a?b.addClicked?b.toggleCPC(!0):0===b.payments.length&&b.cpcApi&&b.cpcApi.saveToProfile?(f.didUseCPC=!0,b.cpcApi.saveToProfile(function(c){b.saveCPCData(c),b.saveMyChoiceAddress(a)},function(a){b.saveMyChoiceAddress(!1)})):b.saveMyChoiceAddress(a):a?b.showMustMakeSelectionWording=!0:b.saveMyChoiceAddress(a)},b.saveCPCData=function(a){if(a&&a.data.authorization&&a.data.authorization.payment){if(b.cpcPaymentInfo=a.data.authorization.payment,b.cpcPaymentInfo.billingAddress){var c=b.cpcPaymentInfo.billingAddress;f.cpcPaymentAddress={AddressLine1:c.addressLine1,AddressLine2:c.addressLine2,AddressLine3:c.addressLine3,City:c.city,StateProvince:c.state,PostalCode:c.postalCode,Country:c.country}}if(b.cpcPaymentInfo.sccn&&b.cpcPaymentInfo.sccn.cardType){var d=b.cpcPaymentInfo.sccn.cardType.cardTypeID,e=b.cpcPaymentInfo.sccn.lastFourChars;f.cpcCardData=d+e}}},b.saveMyChoiceAddress=function(a){var d="";a?(f.myChoiceData.PremiumBillingInfo=b.createPremiumBillingInfo(b.myChoiceCard),d=k.SaveMCAddress):(f.myChoiceData.PremiumBillingInfo=null,d=k.ValidateMCAddress),c({method:"POST",data:JSON.stringify(f.myChoiceData),url:l.createURL(d)}).then(function(a){var c=a.data;c&&c.WasSuccessfull?angular.element(k.MyChoiceConfirmationDiv).scope().toggleMyChoiceConfirmationModal(l.Locale,k.ChoosePaymentDiv):b.errorList=m.createErrorList(c.Object)},function(a){l.errorCallbackReponse=a,l.errorCode="BACK_END_DOWN"})},b.toggleCPC=function(a){a?(b.addClicked=!1,b.payments=[]):b.payments=f.payments},b.createPremiumBillingInfo=function(a){if(f.didUseCPC){return{DidUseCPC:!0,BillingAddress:f.cpcPaymentAddress,Card:{CardNumber:f.cpcCardData}}}if(a){var b={DidUseCPC:!1,BillingAddress:a.BillingAddress,Key:a.Key,IsDefaultIndicator:a.IsDefaultIndicator};return a.IsPayPal?b.PayPal={AccountName:a.DisplayableCardNumber}:b.Card={CardType:a.CardType,CardNumber:a.CardNumber,DisplayableCardNumber:a.DisplayableCardNumber,ExpiryMonth:a.ExpirationMonth,ExpiryYear:a.ExpirationYear,IsPayPal:a.IsPayPal},b}return{}}}]),angular.module("upsDOApp.controllers").controller("DOAPP.PickupOptionsCtrl",["$scope","doappUtilService","$rootScope","doappService","doappConstants","doappScreenChanger","$http","doappErrorHandler","TIME_FORMAT_CONSTANTS","PICKUP_COUNTRIES_CONSTANT","DOA_CONSTANTS","PICKUP_OPTIONS_COUNTRIES",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){a.isChargable=!1,a.isLoading=!1,a.formObj={},a.formObj.pickup={},a.formObj.weekendPickup={},a.formObj.weekendPickup.selectedOption=k.NOPICKUP,a.smartPickupTime="",a.saturdaySmartPickupTime="",a.isHazmat=d.WasHazmatChecked,a.formObj.pickup.selectedOption=d.WasHazmatChecked?"02":"08",a.Hours=[],a.Meridian=["AM","PM"],a.saturdayAvailable=!1,"jp"===d.Location.toLowerCase()?a.jpPickupOptionsMessage=!0:a.jpPickupOptionsMessage=!1,a.is24HourCountry=-1===i.TWELVE_HOUR_FORMAT_COUNTRIES.indexOf(d.Location),a.isChargable=-1!=j.NON_CHARGEABLE_PICKUP_COUNTRIES.indexOf(d.Location),r(),a.togglePickUp(a.formObj.pickup.selectedOption),a.totalDaysSelected=0,b.resetUTAGData()}function n(){g({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(d.AddressData),url:d.createURL(e.SaturdayAvailability)}).then(function(b){var e=b.data;e&&e.WasSuccessfull?e.Object.IsAvailable?(a.saturdayAvailable=!0,c.isSaturdayAvailable=!0,d.availableDates=e.Object.AvailableDates,d.masterAvailabileDays=d.availableDates):(a.saturdayAvailable=!1,c.isSaturdayAvailable=!1,d.availableDates=e.Object.AvailableDates,d.masterAvailabileDays=d.availableDates):(a.saturdayAvailable=!1,c.isSaturdayAvailable=!1)},function(a){d.errorCallbackReponse=a,d.errorCode="BACK_END_DOWN"})}function o(){var b={City:d.AddressData.City,StateProvinceCode:d.AddressData.StateProvinceCode,CountryCode:d.AddressData.CountryCode,PostalCode:d.AddressData.PostalCode,NickName:"",ContactName:"",CompanyName:"",StreetAddress:"",Suite:"",Phone:{Number:"",Extension:""},EmailAddress:""};g({method:"POST",xsrfCookieName:e.XSRFCookieName,url:d.createURL(e.PickupOptions),data:JSON.stringify(b)}).then(function(c){var d=c.data;if(d&&d.WasSuccessfull){if(d.Object.PickupOptionsResponse.PickupOptionsList.PickupOption.length>0){var e=d.Object.PickupOptionsResponse.PickupOptionsList.PickupOption;if(2==e.length&&-1!==e.indexOf("01")&&-1!==e.indexOf("08"))"US"===b.CountryCode.toUpperCase()?(a.isOnRoute=!0,a.isDaySpecific=!0,a.isSmart=!1):(a.isOnRoute=!1,a.isDaySpecific=!1,a.isSmart=!1);else{for(var f=["03","04","05","06"],g=0;g<f.length;g++)if(-1!==e.indexOf(f[g])){a.isDaySpecific=!0;break}a.isSmart=-1!==e.indexOf("02"),a.isOnRoute=-1!==e.indexOf("07")}}}else"US"===b.CountryCode.toUpperCase()&&(a.isOnRoute=!0,a.isDaySpecific=!0,a.isSmart=!1)},function(a){})}function p(){var b=a.is24HourCountry?32:28,c=a.is24HourCountry?68:16,d=a.is24HourCountry?58:6;a.formObj.pickup.earlyTime=a.Hours[b],a.formObj.pickup.earlyMeridian=a.Meridian[0],a.formObj.pickup.latestTime=a.Hours[c],a.formObj.pickup.latestMeridian=a.Meridian[1],a.formObj.pickup.preferredTime=a.Hours[d],a.formObj.pickup.preferredMeridian=a.Meridian[1],a.formObj.pickup.pickupLocation="Select_One",a.errorPreferred=!1,a.errorLatest=!1,a.errorEarly=!1,a.smartPickupTime=w(a.formObj.pickup.preferredTime,"AM"===a.formObj.pickup.preferredMeridian),a.tempDaysHolder=[]}function q(){a.formObj.pickup.earlyTimeSat=a.formObj.pickup.earlyTime,a.formObj.pickup.earlyMeridianSat=a.formObj.pickup.earlyMeridian,a.formObj.pickup.latestTimeSat=a.formObj.pickup.latestTime,a.formObj.pickup.latestMeridianSat=a.formObj.pickup.latestMeridian,a.formObj.pickup.preferredTimeSat=a.formObj.pickup.preferredTime,a.formObj.pickup.preferredMeridianSat=a.formObj.pickup.preferredMeridian,a.formObj.weekendPickup.pickupLocation=a.formObj.pickup.pickupLocation,a.errorPreferredSat=!1,a.errorLatestSat=!1,a.errorEarlySat=!1,a.saturdaySmartPickupTime=w(a.formObj.pickup.preferredTimeSat,"AM"===a.formObj.pickup.preferredMeridianSat)}function r(){a.specificDays=d.AVAILABLE_DAYS.slice(0,5),a.specificWeekendDays=[d.AVAILABLE_DAYS[5]],function(){for(var b=a.is24HourCountry?0:1,c=a.is24HourCountry?23:12,d=b;d<=c;d++)d<=9?a.Hours.push("0"+d+":00","0"+d+":15","0"+d+":30","0"+d+":45"):a.Hours.push(d+":00",d+":15",d+":30",d+":45")}(),p()}function s(){var a=new Date;return a.getMonth()+"/"+a.getDate()+"/"+a.getFullYear()}function t(b,c,d,e){b<c?b<d&&c>d?(a.errorPreferred=!1,a.errorLatest=!1,a.errorEarly=!1):b===d?a.errorPreferred=!1:c===d?a.errorPreferred=!1:(a.errorPreferred=!0,a.errorLatest=!1,a.errorEarly=!1):b>c?!0===e?(a.errorPreferred=!1,a.errorLatest=!1,a.errorEarly=!0):(a.errorPreferred=!1,a.errorLatest=!0,a.errorEarly=!1):b===c&&c===d&&b===d?(a.errorLatest=!0,a.errorEarly=!0,a.errorPreferred=!0):b===c?(a.errorLatest=!0,a.errorEarly=!0,a.errorPreferred=!1):c===d?a.errorPreferred=!1:d===b&&(a.errorPreferred=!1)}function u(b,c,d,e){b<c?b<d&&c>d?(a.errorPreferredSat=!1,a.errorLatestSat=!1,a.errorEarlySat=!1):b===d?a.errorPreferredSat=!1:c===d?a.errorPreferredSat=!1:(a.errorPreferredSat=!0,a.errorLatestSat=!1,a.errorEarlySat=!1):b>c?!0===e?(a.errorPreferredSat=!1,a.errorLatestSat=!1,a.errorEarlySat=!0):(a.errorPreferredSat=!1,a.errorLatestSat=!0,a.errorEarlySat=!1):b===c&&c===d&&b===d?(a.errorLatestSat=!0,a.errorEarlySat=!0,a.errorPreferredSat=!0):b===c?(a.errorLatestSat=!0,a.errorEarlySat=!0,a.errorPreferredSat=!1):c===d?a.errorPreferredSat=!1:d===b&&(a.errorPreferredSat=!1)}function v(b,c,d,e,f,g){var h,i,j;switch(a.is24HourCountry?(h=new Date(a.convert24HourCalc(b)).getTime(),i=new Date(a.convert24HourCalc(c)).getTime(),j=new Date(a.convert24HourCalc(d)).getTime()):(h=new Date(b).getTime(),i=new Date(c).getTime(),j=new Date(d).getTime()),g){case"weekday":t(h,i,j,e,f);break;case"weekend":u(h,i,j,e,f)}}function w(b,c){var d=a.Hours.indexOf(b)-4;if(d<0){var e=d%a.Hours.length;d=a.Hours.length+e,c=!c}var f=a.Hours[d];if(a.is24HourCountry)return f;if(-1!==f.indexOf("11")||-1!==f.indexOf("12"))var g=c?"PM":"AM";else var g=c?"AM":"PM";return f+" "+g}function x(){return{weekendPickUpType:a.formObj.weekendPickup.selectedOption,WeekendDriverInstructions:a.formObj.weekendPickup.pickupLocation,type:a.formObj.pickup.selectedOption,EarliestPickupTime:y(a.formObj.pickup.earlyTime,"AM"!==a.formObj.pickup.earlyMeridian),LatestPickupTime:y(a.formObj.pickup.latestTime,"AM"!==a.formObj.pickup.latestMeridian),PreferredPickupTime:y(a.formObj.pickup.preferredTime,"AM"!==a.formObj.pickup.preferredMeridian),SaturdayEarliestPickupTime:y(a.formObj.pickup.earlyTimeSat,"AM"!==a.formObj.pickup.earlyMeridianSat),SaturdayLatestPickupTime:y(a.formObj.pickup.latestTimeSat,"AM"!==a.formObj.pickup.latestMeridianSat),SaturdayPreferredPickupTime:y(a.formObj.pickup.preferredTimeSat,"AM"!==a.formObj.pickup.preferredMeridianSat),DriverInstructions:a.formObj.pickup.pickupLocation,AdditionalInstructions:a.formObj.pickup.add_instructions,DaysOfTheWeek:z(a.specificDays)}}function y(b,c){if(b&&(b=b.replace(":","")+"00",c&&!a.is24HourCountry)){b=parseInt(b.substring(0,2))+12+b.substring(2)}return b}function z(a){for(var b=[],c=0;c<a.length;c++)!0===a[c].isSelected&&b.push(a[c].index);return b}function A(b){var c,d,e,f,g;return a.formObj.pickup.selectedOption===k.NOPICKUP?c=!0:(e="Select_One"!==a.formObj.pickup.pickupLocation,f="Select_One"!==a.formObj.weekendPickup.pickupLocation,a.isSaturdayAvailable?a.formObj.weekendPickup.selectedOption===k.NOPICKUP?(d=!1===a.errorPreferred&&!1===a.errorLatest&&!1===a.errorEarly,c=d&&e):(d=!1===a.errorPreferred&&!1===a.errorLatest&&!1===a.errorEarly&&!1===a.errorPreferredSat&&!1===a.errorLatestSat&&!1===a.errorEarlySat,c=d&&e&&f):(d=!1===a.errorPreferred&&!1===a.errorLatest&&!1===a.errorEarly,c=d&&e),a.formObj.pickup.selectedOption===k.DAYSPECIFICPICKUP&&(!0===a.isdaySelected?(g=!0,c=c&&g):(angular.forEach(a.tempDaysHolder,function(b,c){a.currentKey=c,!0===b&&(g=!0)}),"undefined"===g&&(g=!1),c=c&&g))),a.isFormValid=c,c}a.formObj={},a.formObj.pickup={};d.Locale.substring(3,5),d.Locale.substring(0,2);a.togglePickupOptionsModal=function(b,c){m(),-1!==l.PICKUP_OPTIONS_COUNTRIES.indexOf(d.Location.toUpperCase())?o():(a.isOnRoute=!1,a.isSmart=!1,a.isDaySpecific=!1),n(),a.previousModalID=c,f.changeScreen(c,e.PickupOptionsDiv,d.isModalFlow)},c.chosenField=0,c.weekendchosenField=0,a.togglePickUp=function(b){c.chosenField=b,a.formObj.pickup.selectedOption=b,b===k.SMARTPICKUP?a.isWeekendSmartPickUpAvailable=!0:a.isWeekendSmartPickUpAvailable=!1,a.formObj.weekendPickup.selectedOption=k.NOPICKUP,p()},a.toggleWeekendPickUp=function(b){c.weekendchosenField=b,b&&(a.formObj.weekendPickup.selectedOption=b.toString()),b!==k.NOPICKUP&&q()},a.pickupOpenpopup=function(a){switch(a){case"PI":d.isUS?b.openTermsAndConditions("https://www.ups.com"+d.links.pickupPricingUSLink):b.openTermsAndConditions("https://www.ups.com"+d.links.pickupPricingIntlLink);break;case"PT":b.openTermsAndConditions("https://www.ups.com/content/gb/en/shipping/time/service/value_added/index.html")}},a.toggleselectText=function(b){angular.forEach(a.specificDays,function(c,d){d===b&&(!0===c.isSelected?(c.isSelected=!1,a.isdaySelected=!1,a.tempDaysHolder[b]=!1,a.totalDaysSelected-=1):a.totalDaysSelected!==a.specificDays.length-1&&(c.isSelected=!0,a.isdaySelected=!0,a.tempDaysHolder[b]=!0,a.totalDaysSelected+=1))})},a.captureText=function(){var b=event.target.value,c=b.length;a.isEmptyValue=0===c},a.convert24HourCalc=function(a){if(a.includes("PM")){var b=a.split(" "),c=b[1].split(":");if(3===b.length&&2===c.length){var d=parseInt(c[0]);return 12!==d&&(d-=12),console.log(b[0]+" "+(d<10?"0"+d:d)+":"+c[1]+" PM"),b[0]+" "+(d<10?"0"+d:d)+":"+c[1]+" PM"}return a}return a},a.calculateTimings=function(b,c,d){var e,f,g,h,i,j,k,l,m,n=s();switch(b){case"early":a.eTime=!0,a.lTime=!1;break;case"latest":a.lTime=!0,a.eTime=!1}"weekday"===d?(e=a.formObj.pickup.earlyTime,f=a.formObj.pickup.earlyMeridian,g=a.formObj.pickup.latestTime,h=a.formObj.pickup.latestMeridian,i=a.formObj.pickup.preferredTime,j=a.formObj.pickup.preferredMeridian,a.smartPickupTime=w(a.formObj.pickup.preferredTime,"AM"===a.formObj.pickup.preferredMeridian)):(e=a.formObj.pickup.earlyTimeSat,f=a.formObj.pickup.earlyMeridianSat,g=a.formObj.pickup.latestTimeSat,h=a.formObj.pickup.latestMeridianSat,i=a.formObj.pickup.preferredTimeSat,j=a.formObj.pickup.preferredMeridianSat,a.saturdaySmartPickupTime=w(a.formObj.pickup.preferredTimeSat,"AM"===a.formObj.pickup.preferredMeridianSat)),a.is24HourCountry?(k=n+" "+e,l=n+" "+g,m=n+" "+i):(k=n+" "+e+" "+f,l=n+" "+g+" "+h,m=n+" "+i+" "+j),v(k,l,m,a.eTime,a.lTime,d)},a.goback=function(){f.changeScreen(e.PickupOptionsDiv,a.previousModalID,d.isModalFlow)},a.updatePickupLocation=function(){a.isPickupLocationValid="Select_One"!==a.formObj.pickup.pickupLocation,a.isWeekendPickupLocationValid="Select_One"!==a.formObj.weekendPickup.pickupLocation},a.nextPickupOptionStep=function(f,g){if(a.isNextClicked=!0,!a.isLoading)if(d.pickupOptionsData=x(),a.isPickupLocationValid="Select_One"!==d.pickupOptionsData.DriverInstructions,a.isWeekendPickupLocationValid="Select_One"!==d.pickupOptionsData.WeekendDriverInstructions,c.chosenField===k.NOPICKUP)a.isLoading=!0,b.openAccount(e.PickupOptionsDiv);else if(a.isSaturdayAvailable&&a.formObj.weekendPickup.selectedOption!==k.NOPICKUP)A(c.chosenField)&&g.$valid?(d.PickupOptionsSelectedDays=a.specificDays,angular.element(e.PickupStartDateDiv).scope().togglePickupStartDateModal()):angular.forEach(g.$error.required,function(a){a.$setDirty()});else{var h=g.$valid;h||angular.forEach(g.$error.required,function(a,b){h="ups-weekendpickup-location"===a.$name}),A(c.chosenField)&&h?(d.PickupOptionsSelectedDays=a.specificDays,angular.element(e.PickupStartDateDiv).scope().togglePickupStartDateModal()):angular.forEach(g.$error.required,function(a){a.$setDirty()})}},a.OpenAccountCallback=function(){b.openAccount("#InitDiv")}}]),angular.module("upsDOApp.controllers").controller("DOAPP.GuestShippingConfirmationCtrl",["$scope","doappService","doappConstants","doappScreenChanger","$http","doappErrorHandler","doappUtilService","$rootScope",function(a,b,c,d,e,f,g,h){function i(){try{a.mycNoticePopover="mycNoticePopover.html",a.popoverContent=b.popoverConstants.mycPopoverLine1+" "+b.popoverConstants.mycPopoverLine2,a.ppcLink=g.createPPCLink("08"),a.isMX=b.isMX,a.firstName=b.finalFormObj.first_name,a.lastName=b.finalFormObj.last_name,a.profileisplayName=b.SignUpData.FullName,a.profileAddressLine1=a.cleanInput(b.prepop.MyAddress.AddressLine1),a.profileCity=a.cleanInput(b.prepop.MyAddress.City),a.profileState=a.cleanInput(b.prepop.MyAddress.StateProvinceCode),a.profileZip=a.cleanInput(b.prepop.MyAddress.PostalCode),a.profileCityStateZip=j(a.profileCity,a.profileState,a.profileZip),a.profileCountry=a.cleanInput(b.prepop.MyAddress.CountryCode),a.emailAddress=b.SignUpData.Email,a.userId=b.SignUpData.UserID,a.creditCardType=a.cleanInput(b.creditCardTypes[b.prepop.Payment.CreditCardType]),a.creditCardLast4Digits=a.cleanInput(b.prepop.Payment.CreditCardLast4Digits),a.contactDisplayName=a.cleanInput(b.prepop.Contact.ContactName),a.contactAddressLine1=a.cleanInput(b.prepop.Contact.AddressLine1),a.contactCity=a.cleanInput(b.prepop.Contact.City),a.profileState=a.cleanInput(b.prepop.Contact.StateProvinceCode),a.profileZip=a.cleanInput(b.prepop.Contact.PostalCode),a.contactCityStateZip=j(a.profileCity,a.profileState,a.profileZip),a.contactCountry=a.cleanInput(b.prepop.Contact.CountryCode),k()}catch(c){b.guestShippingException=c}g.resetUTAGData()}function j(a,b,c){return a+", "+b+" "+c}function k(){a.profileCountry?"us"===a.profileCountry.toLowerCase()?a.isEligibleForMyChoice=!0:e({method:"POST",xsrfCookieName:c.XSRFCookieName,data:JSON.stringify(l(a.profileCountry,a.profileZip)),url:b.createURL(c.CheckNonUsMyChoice)}).then(function(b){var c=b.data;c&&c.WasSuccessfull?a.isEligibleForMyChoice=!0:(a.isEligibleForMyChoice=!1,c.Object&&(a.errorList=f.createErrorList(c.Object)))},function(c){a.isEligibleForMyChoice=!1,b.errorCallbackReponse=c,b.errorCode="BACK_END_DOWN"}):a.isEligibleForMyChoice=!1}function l(a,c){return{AddressCheck:{Country:a,PostalCode:c},MYCUserProfile:{FirstName:b.SignUpData.FirstName,MiddleName:"",LastName:b.SignUpData.LastName,Suffix:"",EmailAddress:b.SignUpData.Email}}}a.cleanInput=function(a){return a||""},a.checkMyChoice=function(){h.isClosing=!1,a.upsNotificationCheck&&(h.isClosing=!0,e({method:"POST",xsrfCookieName:c.XSRFCookieName,data:JSON.stringify(g.collectEnrollmentData()),url:b.createURL(c.AutoEnroll)}).then(function(a){b.callbackResponse=a},function(a){b.errorCallbackReponse=a,b.errorCode="BACK_END_DOWN"})),h.isClosing=!0},a.toggleGuestShippingConfirmationModal=function(a,e){i(),d.changeScreen(e,c.GuestShippingConfirmationDiv,b.isModalFlow)}}]),angular.module("upsDOApp.controllers").controller("DOAPP.PickupConfirmationCtrl",["$scope","doappService","doappConstants","doappScreenChanger","$http","doappErrorHandler","doappUtilService","$rootScope",function(a,b,c,d,e,f,g,h){function i(){a.mycNoticePopover="mycNoticePopover.html",a.popoverContent=b.popoverConstants.mycPopoverLine1+" "+b.popoverConstants.mycPopoverLine2,a.ppcLink=g.createPPCLink("09"),a.isMX=b.isMX,a.firstName=b.finalFormObj.first_name,a.lastName=b.finalFormObj.last_name,a.profileisplayName=b.SignUpData.FullName,a.profileAddressLine1=b.prepop.MyAddress.AddressLine1,a.profileCity=b.prepop.MyAddress.City,a.profileState=b.prepop.MyAddress.StateProvinceCode,a.profileZip=b.prepop.MyAddress.PostalCode,a.profileCityStateZip=j(a.profileCity,a.profileState,a.profileZip),a.profileCountry=b.prepop.MyAddress.CountryCode,a.emailAddress=b.finalFormObj.email,a.userId=b.SignUpData.UserID,a.creditCardType=b.creditCardTypes[b.prepop.Payment.CreditCardType],a.creditCardLast4Digits=b.prepop.Payment.CreditCardLast4Digits,k(),g.resetUTAGData()}function j(a,b,c){return a+", "+b+" "+c}function k(){"us"===a.profileCountry.toLowerCase()?a.isEligibleForMyChoice=!0:e({method:"POST",xsrfCookieName:c.XSRFCookieName,data:JSON.stringify(l(a.profileCountry,a.profileZip)),url:b.createURL(c.CheckNonUsMyChoice)}).then(function(b){var c=b.data
;c&&c.WasSuccessfull?a.isEligibleForMyChoice=!0:c.Object&&(a.isEligibleForMyChoice=!1,a.errorList=f.createErrorList(c.Object))},function(c){b.errorCallbackReponse=c,b.errorCode="BACK_END_DOWN",a.isEligibleForMyChoice=!1})}function l(b,c){return{AddressCheck:{Country:b,PostalCode:c},MYCUserProfile:{FirstName:a.firstName,MiddleName:"",LastName:a.lastName,Suffix:"",EmailAddress:a.emailAddress}}}a.checkMyChoice=function(){a.upsNotificationCheck&&e({method:"POST",xsrfCookieName:c.XSRFCookieName,data:JSON.stringify(g.collectEnrollmentData()),url:b.createURL(c.AutoEnroll)}).then(function(a){b.callbackResponse=a,h.isClosing=!0},function(a){b.errorCallbackReponse=a,b.errorCode="BACK_END_DOWN",h.isClosing=!0}),h.isClosing=!0},a.togglePickupConfirmationModal=function(a,e){i(),d.changeScreen(e,c.MyChoiceConfirmationDiv,b.isModalFlow)}}]),angular.module("upsDOApp.controllers").controller("DOAPP.OpenAccountConfirmationCtrl",["$scope","$rootScope","$location","doappService","doappConstants","doappScreenChanger","$http","doappUtilService",function(a,b,c,d,e,f,g,h){function i(){a.mycNoticePopover="mycNoticePopover.html",a.discountInformation=d.openAccountResponse.DiscountDetails,a.name=d.AddressData.ContactName,a.email=d.AddressData.EmailAddress,a.userId=d.SignUpData.UserID,a.upsNotificationCheck=!1,a.mycNoticePopover="mycNoticePopover.html",a.popoverContent=d.popoverConstants.mycPopoverLine1+" "+d.popoverConstants.mycPopoverLine2,a.initWelcomeMessages(),a.isMX=d.isMX,a.myChoicePrivacyNoticeLink=d.links.myChoicePrivacyNoticeLink,a.account=d.openAccountResponse.AccountNumber,a.pickupOption=b.chosenField,a.weekendPickupOption=b.weekendchosenField,a.isSaturdayAvailable=b.isSaturdayAvailable,a.profileCountry=d.AddressData.CountryCode,a.profileZip=d.AddressData.PostalCode,j(),a.WasHazmatChecked=d.WasHazmatChecked&&d.originalHazmatChecked,a.WasLithiumBatteriesChecked=d.WasHazmatChecked&&d.WasLithiumBatteriesChecked;var c=parseInt(a.pickupOption);if(c)switch(c){case 1:case 7:a.startDate=n(d.PickupStartDate);break;case 99:a.specificPickupDays=m(d.PickupOptionsSelectedDays),a.startDate=n(d.PickupStartDate)}h.resetUTAGData()}function j(){g({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(k()),url:d.createURL(e.IsEligibileForMyChoice)}).then(function(b){if(b&&b.data){var c=b.data;c&&c.WasSuccessfull?a.isEligibleForMyChoice=!0:a.isEligibleForMyChoice=!1}else a.isEligibleForMyChoice=!1},function(a){d.errorCallbackReponse=a,d.errorCode="BACK_END_DOWN"})}function k(){var a={Address:d.AddressData,Locale:d.Locale};return a.Address.Country=a.Address.CountryCode,a.Address.PostalCode=a.Address.PostalCode.trim(),a}function l(){var a=d.prepopData.ContactName.split(" "),b={FirstName:a[0],LastName:a[a.length-1],Address:d.AddressData,Locale:d.Locale};return b.Address.Country=b.Address.CountryCode,b.Address.PostalCode=b.Address.PostalCode.trim(),b}function m(a){for(var b="",c=0;c<a.length;c++)!0===a[c].isSelected&&(b+=a[c].day+", ");return b.substring(0,b.length-2)}function n(a){var b=a.toString().split(" ");return b[0]+", "+b[1]+" "+b[2]}a.initWelcomeMessages=function(){d.Registered?(a.shouldDisplayDefaultWelcome=!0,a.shouldDisplayBillingCenterWelcome=!1,a.shouldDisplayAltBillingCenterWelcome=!1,a.ppcLink=h.createPPCLink("03")):(a.shouldDisplayDefaultWelcome=!1,-1!==d.billingCenterConstants.indexOf(d.Location)?(a.shouldDisplayBillingCenterWelcome=!0,a.shouldDisplayAltBillingCenterWelcome=!1,a.ppcLink=h.createPPCLink("04")):(a.shouldDisplayBillingCenterWelcome=!1,a.shouldDisplayAltBillingCenterWelcome=!0,a.ppcLink=h.createPPCLink("05"))),a.discountInformation&&(a.ppcLink="https://wwwapps.ups.com/ppc/ppc.html?loc="+d.Locale+"#/payment",a.discountWasUsed=!0,a.discountName=a.discountInformation.DiscountName,a.discountDetails=a.discountInformation.DiscountDetails,a.discountInformation.DiscountLink&&(a.shouldDisplayDiscountTermsLink=!0,a.discountTermsLink=a.discountInformation.DiscountLink)),a.firstName=a.name.split(" ")[0]},a.checkMyChoiceAutoEnroll=function(){a.discountWasUsed||(a.upsNotificationCheck&&g({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(l()),url:d.createURL(e.AutoEnroll)}).then(function(a){d.callbackResponse=a,b.isClosing=!0},function(a){d.errorCallbackReponse=a,d.errorCode="BACK_END_DOWN",b.isClosing=!0}),b.isClosing=!0)},a.updateNotificationCheck=function(b){a.upsNotificationCheck=b.upsNotificationCheck},a.toggleOpenAccountConfirmationScreen=function(a,b){angular.element(b).scope().isLoading=!1,i(),f.changeScreen(b,e.OpenAccountConfirmationDiv,d.isModalFlow)}}]),angular.module("upsDOApp.controllers").controller("DOAPP.MyChoiceConfirmationCtrl",["$rootScope","$scope","doappService","doappConstants","doappScreenChanger","$http","doappUtilService","$window",function(a,b,c,d,e,f,g,h){b.displayFreeAlertMessageForCurrent16=!0,b.displayFreeAlertMessageForExpansionCountrie=!1,b.init=function(){a.didAttemptPremiumCode?b.ppcLink="https://wwwapps.ups.com/ppc/ppc.html?loc="+c.Locale+"#/preferencePage/mychoicePreference/membership":c.Registered?b.ppcLink=g.createPPCLink("06"):b.ppcLink=g.createPPCLink("07"),b.firstName=c.mycData.MYCUserProfile.FirstName,b.emailAddress=c.mycData.MYCUserProfile.EmailAddress,b.mycLink=c.links.seeMyChoiceBenefitsLink,a.flowData.didCompleteEnrollment=!0,g.resetUTAGData()},b.toggleMyChoiceConfirmationModal=function(a,f){b.init(),b.isLoading=!1,e.changeScreen(f,d.MyChoiceConfirmationDiv,c.isModalFlow)},b.completeMyChoiceEnrollment=function(g){function i(){return{MYCAddress:{AddressLine1:c.AddressData.AddressLine1,AddressLine2:c.AddressData.AddressLine2,AddressLine3:c.AddressData.AddressLine3,City:c.AddressData.City,StateProvinceCode:c.AddressData.StateProvince,PostalCode:c.AddressData.PostalCode,AddressPhone:{Number:c.PhoneNumber,Extension:c.PhoneExtenstion}},MYCUserProfile:j(),Locale:c.Locale,PromoCode:a.appliedPromoCode,DidAttemptPremiumCode:a.didAttemptPremiumCode,ShouldGatherPaymentInfo:a.shouldGatherPaymentInfo}}function j(){return{FirstName:c.SignUpData.FirstName,MiddleName:c.SignUpData.MiddleName,LastName:c.SignUpData.LastName,Suffix:c.SignUpData.Suffix,EmailAddress:c.SignUpData.Email}}var k="/doapp/MYC/SaveMCAddress/";k=g?"/doapp/MYC/CompleteMatchingEnrollment/":"/doapp/MYC/SaveMCAddress/",b.init();var l=i();f({method:"POST",xsrfCookieName:d.XSRFCookieName,url:c.createURL(k),data:JSON.stringify(l)}).then(function(f){var g=f.data;if(g&&g.WasSuccessfull){"success"==g.Object?(a.isEmailEnrollmentRequest&&a.isEmailEnrollmentRequest?b.displayFreeAlertMessageForExpansionCountrie=!0:b.displayFreeAlertMessageForCurrent16=!0,c.isModalFlow?e.changeScreen(d.InitStart,d.MyChoiceConfirmationDiv,c.isModalFlow):e.changeScreen(d.AddressDiv,d.MyChoiceConfirmationDiv,c.isModalFlow)):h.location.href="#"}else{"CANCEL_REQUESTED"==g.Object&&(a.isClosing=!0)}},function(a){c.errorCallbackReponse=a,c.errorCode="BACK_END_DOWN"})}}]),angular.module("upsDOApp.controllers").controller("DOAPP.SignupConfirmationCtrl",["$rootScope","$scope","doappService","doappConstants","doappScreenChanger","doappUtilService",function(a,b,c,d,e,f){function g(){b.ppcLink=f.createPPCLink(c.isNotUniqueEmail?"02":"01"),b.isSocialLogin=c.isSocialLogin,b.isEmailBasedEnrollment=!1,b.isPhoneBasedEnrollment=!1,b.socialSite=h(),b.isNotUniqueEmail=c.isNotUniqueEmail,b.finalFormObj=c.finalFormObj,a.flowData.didCompleteRegistration=!0,f.resetUTAGData()}function h(){if(b.isSocialLogin&&c.socialResponse.ProviderName){var a=c.socialResponse.ProviderName.toLowerCase();if("facebook"===a)return"Facebook";if("googleplus"===a)return"Google+";if("linkedin"===a)return"LinkedIn";if("amazon"===a)return"Amazon";if("twitter"===a)return"Twitter"}return""}b.toggleSignupConfirmationModal=function(a,b){g(),e.changeScreen(b,d.SignupConfirmationDiv,c.isModalFlow)}}]),angular.module("upsDOApp.controllers").controller("DOAPP.AddressCtrl",["$rootScope","$scope","$location","$http","doappUtilService","doappService","doappConstants","doappScreenChanger","PREPEND_STRING","IdentityVerificationClientService","doappErrorHandler","IS_DEVELOPMENT","$timeout","doappWemsDataConversion",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){if(b.isMYCShown=!1,b.isOAShown=!1,b.isCalledFromInit=!0,b.errorList={},b.isLoading=!1,b.addressFormObj={save_address:!1,terms_conditions:!1},b.addressFormObj.terms_conditions=!1,b.clicked=!1,b.myChoiceTermsLink=f.links.mychoiceTermsLink,b.addressFormObj.phone_type="Mobile",b.isMyChoiceFlow=s(),b.isMyChoiceFlow?(b.isMYCShown=!0,q()):b.isOAShown=!0,b.isOpenAccountFlow=t(),b.addressFormObj.country=$("#index_ups-country_select option:selected").text().substring(3,5).toLowerCase(),b.countryDropDownUneditable=!0,b.clearAddressVars(),w(),b.cacAPI){var a=b.createCACOptions();b.cacAPI.initNewAddressAndContact(a.address,a.contact)}b.phoneRegEx=f.isUS||f.isPR||f.isCA?/[^0-9-]/g:/[^0-9]/g,b.shouldDisplayPromoAppliedSection=!1,b.hasAppliedPromo=!1,b.shouldDisplayInputAddress=!0,b.resetPromoVariables(),e.resetUTAGData()}function p(a,b){for(var c=0;c<a.length;c++)if(a[c].code==b)return!0;return!1}function q(){f.nameGuesses&&3===f.nameGuesses.length&&(b.first_name=f.nameGuesses[0],b.middle_initial=r(f.nameGuesses[1]),b.last_name=f.nameGuesses[2]),b.hasNameGuess=!0,b.isUSOrPR=f.isUS||f.isPR||f.SignUpData&&f.SignUpData.Country&&"us"===f.SignUpData.Country.toLowerCase(),b.suffixValues=f.suffixValues}function r(a){return a&&a.length>0?a.substring(0,1):""}function s(){return f.isMyChoiceFlow||f.isAddNotificationFlow}function t(){return f.isOpenAccountFlow||f.isPickupFlow}function u(){f.isENUS?(b.isUs=!0,b.nonUSState=!1):(b.isUs=!1,b.nonUSState=!0)}function v(){f.isENUS?b.addressFormObj.country="us":s()?(b.addressFormObj.country=f.SignUpData.Country,b.addressFormObj.zipcode=f.SignUpData.PostalCode,b.zipCodeMyChoiceReadOnly=!0,b.countryDropDownUneditable=!0):t()&&(b.addressFormObj.country=f.Location.toLowerCase(),b.countryDropDownUneditable=!0)}function w(){x(),b.modalType===g.RegularAddressModal?b.isMyChoiceFlow?b.displayAdditionalTitle=!0:b.displayBasicTitle=!0:b.modalType===g.InvoiceAddressModal?b.displayInvoiceTitle=!0:b.displayBasicTitle=!0}function x(){b.displayBasicTitle=!1,b.displayHomeTitle=!1,b.displayAdditionalTitle=!1,b.displayPickupTitle=!1,b.displayAccountTitle=!1,b.displayBillingTitle=!1,b.displayInvoiceTitle=!1}function y(a){var c=a.address,d=a.contact,e=d.phone,h=e.replace("+","");c.country||(c.country="");var i={UserId:f.SignUpData.UserID,Address:{Type:b.modalType===g.RegularAddressModal?"ACCOUNT":"INVOICE",AddressLine1:c.address1,AddressLine2:c.address2?c.address2:"",AddressLine3:c.address3?c.address3:"",City:c.city?c.city:"",PostalCode:c.postal?c.postal:"",CountryCode:c.country.key?c.country.key:f.AddressData.CountryCode,AddressPhone:{Number:h,Extension:d.extension},IsDefaultAddress:b.addressFormObj.save_address,ContactName:d.name?d.name:"",EmailAddress:d.email?d.email:""}};return c.state&&(c.state.value?(i.Address.StateProvinceCode=c.state.key,i.Address.OtherInfo=""):(i.Address.StateProvinceCode="",i.Address.OtherInfo=c.state.key)),i.Address.CountryCode&&"pr"===i.Address.CountryCode.toLowerCase()&&(i.Address.CountryCode="PR",i.Address.StateProvinceCode="PR"),i}function z(c){var d=c.address,e=c.contact;f.PhoneNumber=e.phone,f.PhoneExtenstion=e.extension;var g={MYCAddress:{AddressLine1:d.address1,AddressLine2:d.address2?d.address2:"",AddressLine3:d.address3?d.address3:"",City:d.city?d.city:"",PostalCode:d.postal?d.postal:"",CountryCode:d.country?d.country.key:f.AddressData.CountryCode,AddressPhone:{Number:e.phone,Extension:e.extension},savaAsDefaultAddress:b.addressFormObj.save_address,Tracking:a.trackingNumber},MYCUserProfile:A(),Locale:f.Locale,PromoCode:b.hasAppliedPromo?b.appliedPromoCode:"",userRequestedAddressOverride:b.overwrite,DidAttemptPremiumCode:a.didAttemptPremiumCode,ShouldGatherPaymentInfo:a.shouldGatherPaymentInfo};return void 0===g.MYCUserProfile.EmailAddress&&(g.MYCUserProfile.EmailAddress=e.email),d.state&&(g.MYCAddress.StateProvinceCode=d.state.key),a.mycCollectedAddress=g.MYCAddress,a.mycCollectedName=g.MYCUserProfile,a.appliedPromoCode=b.appliedPromoCode,$.doappShouldGatherPaymentInfo=a.shouldGatherPaymentInfo,g}function A(){return f.isMyChoiceFlow&&!1===b.hasNameGuess?{FirstName:f.SignUpData.FirstName,MiddleName:f.SignUpData.MiddleName,LastName:f.SignUpData.LastName,Suffix:f.SignUpData.Suffix,EmailAddress:f.SignUpData.Email,iobb:document.getElementById("iobb")?document.getElementById("iobb").value:""}:f.isMyChoiceFlow&&!0===b.hasNameGuess?{FirstName:$("#ups-first_name_input").val(),MiddleName:$("#ups-middle_initial_input").val(),LastName:$("#ups-last_name_input").val(),Suffix:b.isUSOrPR?$("#ups-suffix_select").val():$("#ups-suffix_input_non-US").val(),EmailAddress:f.SignUpData.Email,iobb:document.getElementById("iobb")?document.getElementById("iobb").value:""}:f.isAddNotificationFlow?{FirstName:f.SignUpData.FirstName,MiddleName:f.SignUpData.MiddleName,LastName:f.SignUpData.LastName,Suffix:"",EmailAddress:f.SignUpData.Email,iobb:document.getElementById("iobb")?document.getElementById("iobb").value:""}:void 0}function B(a){b.isLoading=!1,b.modalType===g.RegularAddressModal?(f.AddressData=a.Address,angular.element(g.AccountOptionsDiv).scope().toggleAccountOptionsModal(f.Locale,g.AddressDiv)):b.modalType===g.InvoiceAddressModal&&(f.InvoiceAddressData=a.Address,angular.element(g.AccountOptionsDiv).scope().returnFromInvoiceAddress())}function C(c){b.isLoading=!0,f.mycData=c,a.myChoiceData=c,f.AddressData=c.MYCAddress;var e="";e=a.isEmailEnrollmentRequest?g.MatchingEnrollment:g.ValidateMCAddress,d({method:"POST",xsrfCookieName:g.XSRFCookieName,data:JSON.stringify(c),url:f.createURL(e)}).then(function(a){b.isLoading=!1;var c=a.data;if(c&&c.WasSuccessfull){var d=c.Object;d&&("doapp"===d?angular.element(g.MyChoiceConfirmationDiv).scope().toggleMyChoiceConfirmationModal(f.Locale,g.AddressDiv):"premium"===d?angular.element(g.ChoosePaymentDiv).scope().toggleChoosePaymentModal(g.AddressDiv):($("#AddressDiv").modal("toggle"),j.showModal("Identity",f.Locale)))}else if(b.shouldDisplayInputAddress=!0,c.Object){b.errorList=k.createErrorList(c.Object);for(var e=k.createErrorList(c.Object),h=0;h<e.length;h++)var i=e[h],l=i.ErrorMessage;$("#serverErrorMessages").html(JSON.stringify(l))}},function(a){b.isLoading=!1,f.errorCallbackReponse=a,f.errorCode="BACK_END_DOWN",h.changeScreen(g.InitStart,g.MyChoiceConfirmationDiv,!0)})}b.shouldDisplayInputAddress=!0,b.isCalledFromInit=!1,b.cacAPI={};var D=f.cac_html;b.CacLoadedCallback=function(c){if(f.doa_mychoice_countriesArray){var d=f.doa_mychoice_countriesArray;b.isAChoice16Countries=p(d,f.Location),b.isAChoice16Countries?a.isEmailEnrollmentRequest=!1:a.isEmailEnrollmentRequest=!0}b.cacAPI=c;var e=b.createCACOptions();b.cacAPI.init(e)},b.checkPromoCode=function(c){if(b.resetPromoVariables(),c&&!b.isPromoSectionLoading){b.isPromoSectionLoading=!0;var e={PromoCode:c,Language:f.Language,Country:f.Location};d({method:"POST",xsrfCookieName:g.XSRFCookieName,data:JSON.stringify(e),url:f.createURL(g.GetMYCPromoDetails)}).then(function(d){if(b.isPromoSectionLoading=!1,d){var e=d.data;e&&e.WasSuccessfull&&(b.promoCallWasSuccessful=!0,b.hasAppliedPromo=!0,b.appliedPromoCode=c,b.shouldDisplayPromoAppliedLabel=!0),b.shouldDisplayPromoAppliedSection=!0,b.promoDescription=e.Object.DisplayMessage,a.promoDescription=e.Object.DisplayMessage,a.didAttemptPremiumCode=e.Object.DidAttemptPremiumCode,a.attemptedPromoCode=c,a.premiumCodeDescription=e.Object.PremiumCodeDescription,a.discountAmount=e.Object.DiscountAmount,a.discountCurrency=e.Object.DiscountCurrency,a.shouldGatherPaymentInfo=e.Object.ShouldGatherPaymentInfo,!1===b.promoCallWasSuccessful&&!1===a.didAttemptPremiumCode&&"BACK_END_DOWN"!==e.Object.ErrorCode?b.invalidPromo=!0:b.invalidPromo=!1}},function(c){b.isPromoSectionLoading=!1,f.errorCode="BACK_END_DOWN",a.checkPromoCodeError=c})}},b.resetPromoVariables=function(){b.promoCallWasSuccessful=!1,b.hasAppliedPromo=!1,b.appliedPromoCode="",b.shouldDisplayPromoAppliedLabel=!1,b.shouldDisplayPromoAppliedSection=!1,b.promoDescription="",a.didAttemptPremiumCode=!1,a.attemptedPromoCode="",a.shouldGatherPaymentInfo=!1},b.clearPromoSection=function(){b.addressFormObj.ups_promoCode="",b.shouldDisplayPromoAppliedSection=!1,b.hasAppliedPromo=!1,b.appliedPromoCode=""},b.createCACOptions=function(){var c=new Cac.WidgetOptions;if(c.addressType="Origin",c.idPrefix=1,c.templateString=D,c.locale=f.Locale,c.useFullWidth=!0,c.cacwsBaseUri=l?"https://wwwapps.ups.com/":window.location.origin+"/",c.showTopNickname=function(){return!1},s()){if(c.showName=function(){return!1},c.nameRequired=function(){return!1},c.showContactName=function(){return!1},c.contactNameRequired=function(){return!1},c.showPhoneType=function(){return!0},f.SignUpData.PostalCode&&(c.address.postal=f.SignUpData.PostalCode,c.postalDisabled=function(){return!0}),a.trackingDetails&&a.trackingDetails.Address&&a.trackingDetails.Address.CountryCode===f.Location){var d=a.trackingDetails.Address;c.address.country.key=d.CountryCode,d.AddressLine&&d.AddressLine.length>30?c.address.address1=d.AddressLine.substring(0,30):c.address.address1=d.AddressLine,c.address.city=d.City,c.address.state.key=d.StateProvinceCode,c.address.postal=d.PostalCode}}else t()&&(c.showName=function(){return!0},c.nameRequired=function(){return!0},c.nameMaxLength=function(){return 20},c.showContactName=function(){return!1},c.contactNameRequired=function(){return!1},c.showPhoneType=function(){return!1},(f.isUS||f.isPR||f.isCA)&&(c.address2MaxLength=function(){return 8}));return c.contactListRequired=function(){return!1},c.showIsResidential=function(){return!1},c.countryRequired=function(){return!0},c.showSaveEntry=function(){return!1},c.showEmailNotify=function(){return!1},c.countactNameRequired=function(){return!1},c.address1Required=function(){return!0},c.address1MaxLength=function(){return 30},c.address2Required=function(){return!1},c.address3Required=function(){return!1},c.emailRequired=function(){return!0},c.phoneRequired=function(){return!0},c.showContactsList=function(){return!1},c.showCountry=function(){return!0},c.showCountactName=function(){return!1},c.showAddress1=function(){return!0},c.showAddress2=function(){return!0},c.showAddress3=function(){return!0},c.showCity=function(){return!0},c.cityMaxLength=function(){return 30},c.showState=function(){return!0},c.postalMaxLength=function(){return 10},c.showPostal=function(){return!0},c.showEmail=function(){return!0},c.showPhone=function(){return!0},c.phonePattern=function(){return f.isUS||f.isPR||f.isCA?"^([0-9-]){5,}$":"^([0-9]){5,}$"},a.isEmailEnrollmentRequest&&(c.emailDisabled=function(){return!0}),c.onPhoneBlur=function(){var a=b.cacAPI.getData().contact;if(a.phone){var c=a.phone.replace(b.phoneRegEx,"");if(c){var d=c.length;d=d>15?15:d,b.cacAPI.setPhone(c.substring(0,d))}}},c.showFax=function(){return!1},c.showLocationId=function(){return!1},g.isExistingAddress?(f.AddressData.Country?c.address.country.key=f.AddressData.Country:f.AddressData.CountryCode&&(c.address.country.key=f.AddressData.CountryCode),f.AddressData.AddressLine1&&f.AddressData.AddressLine1.length>30?c.address.address1=f.AddressData.AddressLine1.substring(0,30):c.address.address1=f.AddressData.AddressLine1,c.address.address2=f.AddressData.AddressLine2,c.address.address3=f.AddressData.AddressLine3,c.address.city=f.AddressData.City,c.address.state.key=f.AddressData.StateProvince,f.AddressData.StateProvince?c.address.state.key=f.AddressData.StateProvince:f.AddressData.StateProvinceCode&&(c.address.state.key=f.AddressData.StateProvinceCode),c.address.postal=f.AddressData.PostalCode.trim(),c.contact.name=f.AddressData.ContactName,c.contact.email=f.AddressData.EmailAddress,c.contact.phone=f.AddressData.Phone||f.prepopData.PhoneNumber):(f.SignUpData.Country?"us"===f.SignUpData.Country?c.address.country.key="US":c.address.country.key=f.SignUpData.Country.toUpperCase():c.address.country.key=f.Location,c.contact.email=f.prepopData.EmailAddress||f.SignUpData.Email,c.address.postal&&a.isEmailEnrollmentRequest&&(c.postalDisabled=function(){return!0}),c.contact.name=f.prepopData.ContactName||f.SignUpData.FullName,a.fromlastScreen&&(a.fromlastScreen=!1,c.address.address1=b.cacCollection.address.address1,c.address.address2=b.cacCollection.address.address2,c.address.address3=b.cacCollection.address.address3,c.address.city=b.cacCollection.address.city,c.address.postal=b.cacCollection.address.postal,c.contact.email=b.cacCollection.contact.email,c.contact.phone=b.cacCollection.contact.phone,c.address.state.key=b.cacCollection.address.state.key)),c.countryDisabled=function(){return b.countryDisabled},c},b.setForm=function(a){b.usedMYCForm=a},b.toggleAddressModal=function(c,d,e){b.toggledLocale=c,a.$broadcast("populateAddressData"),b.hasClientId="none"!==f.ClientID,b.modalType=d||g.RegularAddressModal,o(),u(),v(),d===g.RegularAddressModal?(f.isSignUpFlow&&f.IsUserLoggedIn&&$(g.AddressDiv).modal(),h.changeScreen(e,g.AddressDiv,f.isModalFlow)):d===g.InvoiceAddressModal&&h.changeScreen(e,g.InvoiceMailingAddressDiv,f.isModalFlow)},b.openAddressTermsAndConditions=function(){e.openTermsAndConditions(f.links.mychoiceTermsLink)},b.addressGoBack=function(a){void 0===b.modalType&&(b.modalType=a),s()&&!f.isENUS?angular.element(g.AvailabilityDiv).scope().toggleAvailabilityModal(f.Locale,g.AddressDiv):t()&&b.modalType===g.InvoiceAddressModal?angular.element(g.AccountOptionsDiv).scope().toggleAccountOptionsModal(f.Locale,g.InvoiceMailingAddressDiv):t()&&b.modalType===g.RegularAddressModal&&angular.element(g.ChooseAddressDiv).scope().toggleChooseAddressModal(f.Locale,g.AddressDiv)},b.continueFromNonValidatedAddress=function(){b.overwrite=!1;var a;t()?(a=y(b.cacCollection),B(a)):s()&&(b.overwrite=!0,a=z(b.cacCollection),C(a))},b.submitForm=function(){if(b.clearAddressVars(),b.clicked=!0,b.clientErrors=[],!b.isLoading)if(b.isLoading=!0,b.ups_mychoiceform.$valid)if(b.cacAPI.formValid()){var a=b.cacAPI.getData();if(b.cacCollection=a,s()){var c=f.SignUpData.FirstName||$("#ups-first_name_input").val(),d=f.SignUpData.LastName||$("#ups-last_name_input").val(),e=c+" "+d;b.cacAPI.setName(e),b.cacAPI.setContactName(e)}else b.cacAPI.setName(a.contact.name),b.cacAPI.setContactName(a.contact.name);b.cacAPI.validateAddress().then(function(c){if("2"===c.validationResult.key||"3"===c.validationResult.key){f.Country=a.address.country.key;var d={};t()?(d=y(a),B(d)):s()&&(d=z(a),C(d))}else"0"===c.validationResult.key||"1"===c.validationResult.key?(f.isUS||f.isPR?(b.populateAddressVars(b.cacCollection),b.shouldDisplayInputAddress=!1):b.errorList=k.createErrorList("doappInvalidAddress"),window.scrollTo(0,0),b.isLoading=!1):b.isLoading=!1},function(a){f.errorCallbackReponse=response,f.errorCode="BACK_END_DOWN",b.isLoading=!1})}else b.isLoading=!1;else b.cacAPI.validateAddress().then(function(a){b.clientErrors=a.errors}),$("#AddressDiv").scrollTop(0),b.isLoading=!1},b.clearAddressVars=function(){b.addressLine1Input="",b.cityInput="",b.stateInput="",b.zipInput="",b.countryInput="",b.clientErrors=[],$("#serverErrorMessages").html(JSON.stringify(""))},b.populateAddressVars=function(a){if(a&&a.address){var c=a.address;b.addressLine1Input=c.address1,b.cityInput=c.city,b.zipInput=c.postal,c.state&&c.state.key&&(b.stateInput=c.state.key),c.country&&c.country.key&&(b.countryInput=c.country.key)}}}]),angular.module("upsDOApp.controllers").controller("DOAPP.APACTaxInfoCtrl",["$scope","doappScreenChanger","doappConstants","doappService","doappUtilService",function(a,b,c,d,e){function f(){a.formObj={},a.formObj.vatCertified=!0,a.vatCertifiedCountry=!0,a.isCertifiedVATCompany=!0,a.Country=d.Country,a.vatCertifiedCityList=d.VAT_CERTIFIED_CITY_LIST,e.resetUTAGData()}function g(b){for(var c=0;c<a.vatCertifiedCityList.length;c++)if(b===angular.lowercase(a.vatCertifiedCityList[c]))return!0;return!0}f(),a.updateVatBankInfo=function(b){a.isCertifiedVATCompany=b},a.countryVal=function(b){a.formObj.city,"china"===angular.lowercase(b)&&void 0!==a.formObj.city&&(a.vatCertifiedCountry=g(angular.lowercase(a.formObj.city)))},a.goBack=function(){"JP"==d.Location?b.changeScreen(c.APACTaxInfoDiv,c.AccountOptionsDiv,d.isModalFlow):b.changeScreen(c.APACTaxInfoDiv,c.APACUploadDiv,d.isModalFlow)},a.nextScreen=function(b,e){if(b){var f={CompanyName:a.formObj.companyName,ContactName:a.formObj.contactPerson,TaxpayerID:a.formObj.taxpayerId,BankName:a.formObj.bankName,AccountNumber:a.formObj.bankAcctNum,TaxInformationAddress:{CountryCode:a.formObj.country,AddressLine1:a.formObj.billingAddress1,AddressLine2:a.formObj.billingAddress2,AddressLine3:a.formObj.billingAddress3,City:a.formObj.city,PostalCode:a.formObj.postalCode,StateProvinceCode:a.formObj.province}};d.APACTaxInfoData=f,angular.element(c.PickupOptionsDiv).scope().togglePickupOptionsModal(d.Locale,c.APACTaxInfoDiv)}else angular.forEach(e.$error.required,function(a){a.$setDirty()})}}]),angular.module("upsDOApp.controllers").controller("DOAPP.APACUploadCtrl",["$scope","doappConstants","doappScreenChanger","doappService","fileUpload","doappUtilService",function(a,b,c,d,e,f){function g(){d.AddressData&&d.AddressData.City&&(a.Country=d.AddressData.City);var b=k(d.Location),c=l(d.Location);if(a.documents=[],a.totalDocsNeeded=0,b){for(var e=0;e<b.length;e++){var g={id:e,name:b[e],name_english:c[e],isUpload:!1,isError:!1,name_ind:"Upload_"+e,isDirty:!1};a.documents.push(g)}a.totalDocsNeeded=b.length}a.validFileTypes=["application/pdf","application/x-pdf","application/x-bzpdf","application/x-gzpdf","image/gif","image/jpg","image/jpeg","image/tif","image/tif-fx","image/tiff","imagtiff-fx"],a.maxSize="999999999",a.isNextEnabled=!1,a.myFiles=[],a.ifFileError=!1,a.fileErrorMessage="",f.resetUTAGData()}function h(){for(var b=0,c=0;c<a.documents.length;c++)a.documents[c].isUpload&&(b+=1);return b}function i(a,b){return a&&b?"The file is too large and is not the correct type.":a?"The file is too large.":b?"The file is not the correct type. You must choose a pdf, gif, jpeg or tiff file.":void 0}function j(){for(var b=0;b<a.documents.length;b++)if(a.documents[b].isError)return!0;return!1}function k(a){switch(a){case"AU":return d.BUSINESS_DOCUMENTS[0].AU;case"CN":return d.BUSINESS_DOCUMENTS[1].CN;case"HK":return d.BUSINESS_DOCUMENTS[2].HK;case"IN":return d.BUSINESS_DOCUMENTS[3].IN;case"KR":return d.BUSINESS_DOCUMENTS[4].KR;case"MO":return d.BUSINESS_DOCUMENTS[5].MO;case"MY":return m("MY1");case"JP":return d.BUSINESS_DOCUMENTS[10].JP;case"SG":return d.BUSINESS_DOCUMENTS[11].SG;case"TH":return d.BUSINESS_DOCUMENTS[12].TH;case"TW":return d.BUSINESS_DOCUMENTS[13].TW;case"VN":return d.BUSINESS_DOCUMENTS[14].VN}}function l(a){switch(a){case"AU":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[0].AU;case"CN":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[1].CN;case"HK":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[2].HK;case"IN":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[3].IN;case"KR":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[4].KR;case"MO":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[5].MO;case"MY":return m("MY1");case"JP":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[10].JP;case"SG":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[11].SG;case"TH":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[12].TH;case"TW":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[13].TW;case"VN":return d.BUSINESS_DOCUMENTS_ENGLISH_VERSION[14].VN}}function m(a){switch(a){case"MY1":return d.BUSINESS_DOCUMENTS[6].MY_1;case"MY2":return d.BUSINESS_DOCUMENTS[7].MY_2;case"MY3":return d.BUSINESS_DOCUMENTS[8].MY_3;case"MY4":return d.BUSINESS_DOCUMENTS[9].MY_4}}function n(){c.changeScreen(b.APACUploadDiv,b.APACTaxInfoDiv,d.isModalFlow)}function o(){angular.element(b.PickupOptionsDiv).scope().togglePickupOptionsModal(d.Locale,b.APACUploadDiv)}g(),a.uploadFiles=function(b){if(b){d.documentsupload=[];for(var c=0;c<a.totalDocsNeeded;c++){var f=document.getElementById("Upload_"+c).files[0];if("Business Licence"==a.documents[c].name_english){f.documentType="Business Licence",d.documentsupload.push("Business Licence");e.uploadBusinessToUrl(f)}else if("PAN Card Copy"==a.documents[c].name_english){f.documentType="PAN Card Copy",d.documentsupload.push("PAN Card Copy");e.uploadPAnCardToUrl(f)}else if("Importer-Exporter Code Registration Certificate"==a.documents[c].name_english){f.documentType="Importer-Exporter Code Registration Certificate",d.documentsupload.push("Importer-Exporter Code Registration Certificate");e.uploadImporterRegistrationCertificateToUrl(f)}else if("Copy of Identification Card"==a.documents[c].name_english){f.documentType="Copy of Identification Card",d.documentsupload.push("Copy of Identification Card");e.uploadIdentificationToUrl(f)}else if("Customer Financial Statement"==a.documents[c].name_english){f.documentType="Customer Financial Statement",d.documentsupload.push("Customer Financial Statement");e.uploadFinancialToUrl(f)}else if("Registration Statement"==a.documents[c].name_english){f.documentType="Registration Statement",d.documentsupload.push("Registration Statement");e.uploadRegistrationToUrl(f)}else if("Applicant’s Identification Card (IC) of company owner"==a.documents[c].name_english){f.documentType="Applicant’s Identification Card (IC) of company owner",d.documentsupload.push("Applicant’s Identification Card (IC) of company owner");e.uploadRegistrationToUrl(f)}}"VN"==d.Location||"TH"==d.Location?o():n()}},a.updateChecks=function(b){{var c=document.getElementById("Upload_"+b).files[0],d=c.size>a.maxSize,e=-1===a.validFileTypes.indexOf(c.type);d||e?(a.documents[b].isUpload=!1,a.documents[b].isError=!0,a.fileErrorMessage=i(d,e)):(a.documents[b].isError=!1,a.documents[b].isUpload=!0),a.ifFileError=j(),a.isNextEnabled=h()===a.totalDocsNeeded,a.documents[b].isDirty=!0}},a.goBack=function(){angular.element(b.AccountOptionsDiv).scope().toggleAccountOptionsModal(d.Locale,b.APACUploadDiv)}}]),angular.module("upsDOApp.controllers").controller("DOAPP.OAFailCtrl",["$scope","doappService","doappConstants","doappScreenChanger","doappUtilService",function(a,b,c,d,e){function f(){a.default=!1,a.contactUPS=!1,a.billingSystemFailure=!1,a.billingAddressFailure=!1,a.isEU=!1,a.specialShippingNeedsFailure=!1,a.customerServiceNumber=b.countryList[b.Location].customerServiceNumber,a.customerServiceHelpNumber=b.countryList[b.Location].fraudNumber,b.shouldDisplayContactUPSError?a.contactUPS=!0:b.specialNeedsShipping?a.specialShippingNeedsFailure=!0:a.default=!0,a.isCA=b.isCA,e.resetUTAGData()}a.toggleOpenAccountFailScreen=function(a,e){f(),d.changeScreen(e,c.OAFailDiv,b.isModalFlow)},a.goBack=function(){angular.element(c.AccountOptionsDiv).scope().toggleAccountOptionsModal(b.Locale,c.OAFailDiv)}}]),angular.module("upsDOApp.controllers").controller("DOAPP.HazmatCtrl",["$scope","doappUtilService","doappService","doappConstants","doappScreenChanger",function(a,b,c,d,e){function f(){a.isUS=c.isUS,a.displayList=!0,a.hazmatLink=c.links.hazmatLink2,a.lithiumLink=c.links.lithiumLink,a.tarriffAndTermsLink=c.links.tarriffAndTermsLink,a.destinationCountriesLink=c.links.destinationCountriesLink,a.compliantShippingSystemsLink=c.links.compliantShippingSystemsLink,a.internationalDangerousGoodsLink=c.links.internationalDangerousGoodsLink,a.tariffAndTermsLink=c.links.tariffAndTermsLink,c.WasHazmatChecked=!1,a.isHazmatChecklistFlow=c.isHazmatChecklistFlow,b.resetUTAGData()}function g(){a.isAPACRequired()?i():h()}function h(){angular.element(d.PickupOptionsDiv).scope().togglePickupOptionsModal(c.Locale,d.HazmatDiv)}function i(){e.changeScreen(d.HazmatDiv,d.APACUploadDiv,c.isModalFlow)}a.toggleHazmatScreen=function(a,b){f(),b?e.changeScreen(b,d.HazmatDiv,c.isModalFlow):e.changeScreen(d.InitStart,d.HazmatDiv,c.isModalFlow)},a.goBack=function(){angular.element(d.AccountOptionsDiv).scope().toggleAccountOptionsModal(c.Locale,d.HazmatDiv)},a.nextStep=function(b,d){if(a.oaHAzmatForm=d,a.isNextClicked=!0,a.displayList)if(b)if(a.isValidForm=!0,c.WasHazmatChecked=!0,c.isHazmatChecklistFlow){var e=window.location.href.split("#")[0]+"#/?hazmatSelected=true"
;window.history.pushState(e,"hazmatSelection",e)}else g();else a.displayList=!1;else c.WasHazmatChecked=!1,g()},a.isAPACRequired=function(){return-1!==c.APAC_INFO.APAC_REQUIRED.indexOf(c.Location)||"IN"==c.Location},a.$watch("hazmatLoaded",function(){c.isHazmatChecklistFlow&&a.toggleHazmatScreen(c.Locale,void 0)})}]),angular.module("upsDOApp.controllers").controller("DOAPP.AccountOptionsCtrl",["$scope","$rootScope","doappUtilService","doappService","doappConstants","doappScreenChanger","DIGITAL_SIGNATURE_COUNTRIES","ELECTRONIC_BILLING_CONSTANTS","BILLING_CENTER_CONSTANTS",function(a,b,c,d,e,f,g,h,i){function j(){a.formObj={},a.formObj.pickup={},a.company_email=d.AddressData.EmailAddress,a.displayDefaultPaymentCheckBox=!0,a.isLicenced=!0,a.isOnline=!0,a.willShipPharmaceuticals=!1,a.shouldAddInvoiceAddress=!1,a.isPR=d.isPR,d.specialNeedsShipping=!1,a.hazmatLink=d.links.hazmatLink2,a.businessRegLink=d.links.businessRegLink,-1!==a.businessRegLink.indexOf("_")&&(a.businessRegLink=a.businessRegLink.replace("_","-")),a.clicked=!1,a.electronicInvoice=!1,a.isBillingCenterCountry=-1!==d.billingCenterConstants.indexOf(d.Location),a.emailPattern=b.masterEmailPattern,a.shouldDisplayElectronicInvoice=!1,a.isBasicBillingCenter=!1,a.isBillingCenterAndIsDigitalSignature=!1,a.isNonBillingCenterAndIsDigitalSignature=!1,a.isNonBillingCenterAndIsNonDigitalSignature=!1,a.setElectronicInvoiceVariables(),c.resetUTAGData()}function k(){d.isUS||d.isCA||d.isPR?(a.shouldDisplayBusinessMessage=!1,a.shouldDisplayCompanyName=!1,a.isPersonalSelected=!0,a.isPersonalDisabled=!1):(a.shouldDisplayBusinessMessage=!0,a.shouldDisplayCompanyName=!0,a.isPersonalSelected=!1,a.isPersonalDisabled=!0),a.shouldDisplayCompanyInfo=a.shouldDisplayCompanyName}function l(){return-1!==d.vatConstants.VAT_REQUIRED.indexOf(d.Location)||-1!==d.vatConstants.VAT_OPTIONAL.indexOf(d.Location)}function m(){return-1!==d.vatConstants.VAT_REQUIRED.indexOf(d.Location)}function n(){var b={isBusiness:a.shouldDisplayCompanyInfo,isAlcohol:a.formObj.ATCheckBox,isDangerousGoods:a.formObj.HazmatCheckBox,isLithiumBatteries:a.formObj.BatteriesCheckBox,isShippingPrescription:a.willShipPharmaceuticals,isLicensedForPrescription:a.willShipPharmaceuticals&&a.isLicenced,isOnlineOrMailOrder:a.willShipPharmaceuticals&&a.isOnline,vatID:a.formObj.acc_number,isDefaultPaymentAccount:a.formObj.isDefaultPayment,companyName:a.formObj.companyName,unitOfMeasurement:a.formObj.pickup.unitsOfMeasurement,brokerageCode:a.formObj.pickup.brokerType,brokerageName:a.formObj.brokerName,electronicInvoice:a.electronicInvoice,iobb:document.getElementById("iobb")?document.getElementById("iobb").value:"EMPTY"};return a.shouldDisplayCompanyInfo&&(d.AddressData.EmailAddress=a.ups_accOptionsform.company_email.$viewValue),b}function o(b,c){d.FromInvoiceModal=!b,!0===a.formObj.ATCheckBox||a.isCA&&a.ups_accOptionsform["ups-check_box_ca"]&&a.ups_accOptionsform["ups-check_box_ca"].$viewValue?(d.isCA=a.isCA,d.specialNeedsShipping=!0,angular.element(e.OAFailDiv).scope().toggleOpenAccountFailScreen(d.Locale,e.AccountOptionsDiv)):a.formObj.diffInvoiceMailingAddress&&b&&a.shouldAddInvoiceAddress?angular.element(e.InvoiceMailingAddressDiv).scope().toggleAddressModal(d.Locale,e.InvoiceAddressModal,e.AccountOptionsDiv):!0===a.formObj.HazmatCheckBox||!0===a.formObj.BatteriesCheckBox?(t(),"invoiceAddress"==c?angular.element(e.HazmatDiv).scope().toggleHazmatScreen(d.Locale,e.InvoiceMailingAddressDiv):angular.element(e.HazmatDiv).scope().toggleHazmatScreen(d.Locale,e.AccountOptionsDiv)):a.isAPACRequired()?"JP"==d.Location?q(c):s():r(b)}function p(){a.isAPACRequired()?"JP"==d.Location?q():s():r()}function q(a){"invoiceAddress"==a?f.changeScreen(e.InvoiceMailingAddressDiv,e.APACTaxInfoDiv,d.isModalFlow):f.changeScreen(e.AccountOptionsDiv,e.APACTaxInfoDiv,d.isModalFlow)}function r(){t(),d.FromInvoiceModal?angular.element(e.PickupOptionsDiv).scope().togglePickupOptionsModal(d.Locale,e.InvoiceMailingAddressDiv):angular.element(e.PickupOptionsDiv).scope().togglePickupOptionsModal(d.Locale,e.AccountOptionsDiv)}function s(){t(),f.changeScreen(e.AccountOptionsDiv,e.APACUploadDiv,d.isModalFlow)}function t(){d.WasHazmatChecked=a.formObj.HazmatCheckBox,d.originalHazmatChecked=a.formObj.HazmatCheckBox,d.WasLithiumBatteriesChecked=a.formObj.BatteriesCheckBox}a.setElectronicInvoiceVariables=function(){var b=d.Location;if(a.shouldDisplayElectronicInvoice=-1!==h.ELECTRONIC_BILLING_COUNTRIES.indexOf(b),a.shouldDisplayElectronicInvoice)if("pt"===d.Location.toLowerCase())a.isNonBillingCenterAndIsDigitalSignature=!0;else{var c=-1!==i.BILLING_CENTER_COUNTRIES.indexOf(b),e=-1!==g.DIGITAL_SIGNATURE_COUNTRIES.indexOf(b);c?e?a.isBillingCenterAndIsDigitalSignature=!0:a.isBasicBillingCenter=!0:e?a.isNonBillingCenterAndIsDigitalSignature=!0:a.isNonBillingCenterAndIsNonDigitalSignature=!0}},a.updateElectronicInvoice=function(b){a.electronicInvoice=b.electronicInvoice};var u=function(){a.formObj.ATCheckBox=!1,a.formObj.HazmatCheckBox=!1,a.formObj.BatteriesCheckBox=!1,a.checkBoxCA=!1};a.toggleAccountOptionsModal=function(b,c){j(),u(),a.formObj.accountAddress1=d.AddressData.AddressLine1,a.formObj.accountAddressCityStateZip=d.AddressData.City+", "+(d.AddressData.StateProvince||d.AddressData.StateProvinceCode)+" "+d.AddressData.PostalCode,a.formObj.addressCountry=d.AddressData.CountryCode||d.AddressData.Country;var g=b.substring(3,5).toLowerCase();a.isUS=d.isUS,a.isCA=d.isCA,a.isPT="pt"===g,a.shouldDisplayVAT=l(),a.isVatRequired=m(),a.shouldDisplayBrokerName=!1,a.shouldDisplayBrokerType=!1,a.formObj.pickup.unitsOfMeasurement="LB",a.formObj.pickup.brokerType="01",k(),a.accountOptionsModalToggle=!0,f.changeScreen(c,e.AccountOptionsDiv,d.isModalFlow)},a.updateBrokerType=function(b){a.shouldDisplayBrokerName="02"===b},a.toggleAccountType=function(b){a.shouldDisplayCompanyInfo=1===b},a.togglePrescriptionResponse=function(b){a.willShipPharmaceuticals=0===b},a.toggleIsLicencedResponse=function(b){a.isLicenced=0===b},a.toggleIsOnlineResponse=function(b){a.isOnline=0===b},a.goBack=function(c){"accountOptions"===c?(a.accountOptionsModalToggle=!1,d.fromChooseAddress?(d.fromChooseAddress=!1,angular.element(e.ChooseAddressDiv).scope().toggleChooseAddressModal(d.Locale,e.AccountOptionsDiv)):(b.fromlastScreen=!0,angular.element(e.AddressDiv).scope().toggleAddressModal(d.Locale,e.RegularAddressModal,e.AccountOptionsDiv))):"hazmatLithium"===c?(a.hazmatLithiumModalToggle=!1,a.accountOptionsModalToggle=!0):"oaFail"===c&&(a.oaFailModalToggle=!1,a.accountOptionsModalToggle=!0)},a.nextStep=function(b,c,e){a.clicked=!0,d.accountOptionsData=n(),b?(a.clicked=!1,"accountOptions"===c?o(!0):"hazmatLithium"===c?p():"invoiceAddress"===c&&o(!1,"invoiceAddress")):angular.forEach(e.$error.required,function(a){a.$setDirty()})},a.returnFromInvoiceAddress=function(){a.nextStep(!0,"invoiceAddress")},a.toggleInvoiceOption=function(b){a.shouldAddInvoiceAddress=1===b},a.isAPACRequired=function(){return-1!==d.APAC_INFO.APAC_REQUIRED.indexOf(d.Location)||"IN"==d.Location||"JP"==d.Location}}]),angular.module("upsDOApp.controllers").controller("DOAPP.PromoConflictCtrl",["$rootScope","$scope","doappService","doappConstants","doappScreenChanger","doappUtilService","$window","doappErrorHandler",function(a,b,c,d,e,f,g,h){b.init=function(){b.errorList={},b.ppcRedirect="https://wwwapps.ups.com/ppc/ppc.html?loc="+c.Locale+"#/payment";var d=a.promoConflictInfo;d&&(b.newDiscountName=a.promoCode,b.newDiscountDescription=d.NewDiscountDescription,b.applyDiscountViewTerms=d.NewDiscountUrl,b.currentDiscountName=d.CurrentDiscountName,b.currentDiscountDescription=d.CurrentDiscountDescription,b.keepDiscountViewTerms=d.CurrentDiscountUrl,b.keepDiscountCurrrentSavings="")},b.applyDiscount=function(){b.isLoading=!0,b.errorList={};var c=angular.element(d.promoChoosePaymentDiv).scope().collectPromoData();c.WantsOverride=!0,f.addPromo(c).then(function(c){b.isLoading=!1,c.WasSuccessfull?(a.selectedAccount=b.selectedAccount,c.Object&&(a.discountDescription=c.Object),angular.element(d.promoConfirmationDiv).scope().togglePromoConfirmationScreen(d.PromoConflictDiv)):b.errorList=h.createErrorList(c.Object.ErrorCode)},function(a){b.isLoading=!1})},b.keepDiscount=function(){a.isClosing=!0,location.href=b.ppcRedirect},b.togglePromoConflictScreen=function(a){b.init(),e.changeScreen(a,d.PromoConflictDiv,c.isModalFlow)}}]),angular.module("upsDOApp.controllers").controller("DOAPP.PromoChoosePaymentCtrl",["$scope","$rootScope","doappService","$http","doappConstants","doappScreenChanger","$window","doappUtilService","doappErrorHandler",function(a,b,c,d,e,f,g,h,i){a.init=function(){a.errorList={},1===a.accounts.length?a.selectedAccount=a.accounts[0].UPSAccountNumber||"":a.selectedAccount="",a.selectedIndex=0,a.isLoading=!1},a.toggleAddPromoScreen=function(){d({method:"POST",xsrfCookieName:e.XSRFCookieName,data:JSON.stringify(""),url:c.createURL(e.PrepopInformation)}).then(function(b){var c=b.data;c&&c.WasSuccessfull&&c.Object&&c.Object.UserId&&(a.userId=c.Object.UserId,c.Object.Accounts&&(a.accounts=a.getAccountToShow(c.Object.Accounts))),a.computeFlow()},function(a){c.errorCallbackReponse=a,c.errorCode="BACK_END_DOWN",message.resolve()})},a.getAccountToShow=function(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];e.CountryCode===c.Location&&b.push(e)}return b},a.computeFlow=function(){a.userId?a.accounts?0===a.accounts.length?a.redirectToOpenAccount():(a.init(),f.changeScreen(e.InitStart,e.promoChoosePaymentDiv,c.isModalFlow)):a.redirectToOpenAccount():a.sendToLasso()},a.sendToLasso=function(){var a=window.encodeURIComponent(window.location.href);window.location="https://www.ups.com/lasso/login?loc="+c.Locale+"&returnto="+a},a.redirectToOpenAccount=function(){c.isModalFlow?g.location.href="#/doapp/registeroa"+b.fullURLParameters:window.location=window.location.toString().replace("addpromo","signupopenaccount")},a.toggleSelectedAccount=function(b,c){a.errorList={},a.accounts[a.selectedIndex].isSelected=!1,a.selectedAccount=b,a.selectedIndex=c,a.accounts[c].isSelected=!0},a.addPromoToAccount=function(){if(a.errorList={},!a.isLoading&&a.selectedAccount){a.isLoading=!0;var c=a.collectPromoData();h.addPromo(c).then(function(c){console.log(c),a.isLoading=!1,c.WasSuccessfull?(b.selectedAccount=a.selectedAccount,c.Object&&(b.discountDescription=c.Object),angular.element(e.promoConfirmationDiv).scope().togglePromoConfirmationScreen(e.promoChoosePaymentDiv)):c.Object.HasConflictingPromo?(b.promoConflictInfo=c.Object,angular.element(e.PromoConflictDiv).scope().togglePromoConflictScreen(e.promoChoosePaymentDiv)):a.errorList=i.createErrorList(c.Object.ErrorCode)},function(b){a.isLoading=!1,console.log(b)})}},a.collectPromoData=function(){return{PromoCode:b.promoCode,AccountNumber:a.selectedAccount,UserId:a.userId,Language:c.Language,Country:c.Location}}}]),angular.module("upsDOApp.controllers").controller("DOAPP.PromoConfirmationCtrl",["$scope","doappScreenChanger","doappConstants","doappService",function(a,b,c,d){a.togglePromoConfirmationScreen=function(a){b.changeScreen(a,c.promoConfirmationDiv,d.isModalFlow)},a.continue=function(){window.location="https://wwwapps.ups.com/ppc/ppc.html?loc="+d.Locale+"#/profilePage"}}]),angular.module("upsDOApp.controllers").controller("DOAPP.ChooseNotificationCtrl",["$scope","doappService","doappConstants","$window","doappUtilService","doappScreenChanger",function(a,b,c,d,e,f){function g(){a.parentFormObj=[],a.formObj={},e.resetUTAGData()}a.toggleModal=function(){g(),f.changeScreen(c.InitStart,c.ChooseNotificationDiv,b.isModalFlow)},a.toggleselectText=function(b){a.enableNextbtn=!0,0===b?(a.toggle0=!0,a.toggle1=!1):(a.toggle0=!1,a.toggle1=!0)},a.next=function(c){if(c)if(a.toggle0){var e="";e="es_US"===b.Locale?"https://es-us-apps.ups.com/tracksec/returnToDetails?loc=":"https://wwwapps.ups.com/tracksec/returnToDetails?loc=",d.location.href=e+b.Locale+"&statusUpdate=true"}else a.toggle1&&(window.location="https://wwwapps.ups.com/doapp/signupmychoice?loc="+b.Locale)}}]),angular.module("upsDOApp.controllers").controller("DOAPP.SignupCtrl",["$sce","$rootScope","$scope","$window","$http","doappUtilService","doappService","doappErrorHandler","doappConstants","$timeout","$location","doappScreenChanger","PREPEND_STRING","IdentityVerificationClientService","$q","WEB_FORM_CONSTANTS",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a){var f={Locale:g.Locale,GigyaResponse:JSON.stringify(g.gigya),iobb:document.getElementById("iobb")?document.getElementById("iobb").value:"EMPTY"};e({method:"POST",xsrfCookieName:i.XSRFCookieName,data:JSON.stringify(f),url:g.createURL(i.SocialIdentityCheck)}).then(function(e){var f=e.data;if(f&&f.WasSuccessfull){c.errorList={},c.isSocialLogin=!0;var i=g.gigya.user.nickname.replace(/[\s]/g,"");if(g.socialResponse.UserName=i.length>16?i.substring(0,16):i,g.socialResponse.UserUID=g.gigya.UID,g.socialResponse.EmailAddress=g.gigya.user.email,g.socialResponse.ProviderUID=g.gigya.user.identities[g.gigya.provider].providerUID,g.socialResponse.ProviderName=g.gigya.provider,g.socialResponse.EmailVerified=a.isVerified,f.Object.isLinked)b.isClosing=!0;else if(f.Object.needsEmailVerification){var j=d.location.href;if(j.indexOf("?")>-1){var k=j.split("?")[j.split("?").length-1];k.indexOf("#")>-1&&(k=k.substring(0,k.indexOf("#"))),d.location.href="https://www.ups.com/lasso/login?"+k}else d.location.href="https://www.ups.com/lasso/login"}else{var l=g.gigya.user.firstName+" "+g.gigya.user.lastName;if(l&&(c.formObj.fullName=l,c.parseName(l)),g.socialResponse.EmailAddress&&(c.formObj.email=g.socialResponse.EmailAddress),g.socialResponse.UserName){c.formObj.userId=g.socialResponse.UserName,c.ups_signupform.user_id_input=g.socialResponse.UserName;var m={target:{value:g.socialResponse.UserName}};c.useridCheck(m),c.userIdSuggestions()}}}else f.Object&&(c.errorList=h.createErrorList(f.Object),"9610127"===f.Object&&(c.isSocialLogin=!1,c.isFailedSocialLogin=!0))},function(a){g.errorCallbackReponse=a,g.errorCode="BACK_END_DOWN"})}function r(a){g.gigya=a,gigya.accounts.getAccountInfo({callback:q})}function s(){c.clicked=!1,c.formObj={email_offers:[]},c.errorList=[],c.hideInfo=!0,c.passwordFieldInputType="password",c.finalFormObj={},c.onConfirm=!1,c.showUTA=!1,c.showSignUp=!0,c.offerscheckBoxvalue=!1,c.signupmessage=void 0,c.userIDSuggestions=void 0,c.number=!1,c.lowercase=!1,c.special=!1,c.uppercase=!1,c.character=!1,c.noSpace=!1,c.noSpecialChar=!1,c.correctAsciiChars=!1,c.shouldDisplayAsciiError=!1,c.check=!1,c.shouldDisplayNext=!g.isSignUpFlow,c.shouldDisplayUTACheckbox=-1!==g.utaConstants.UTA_CHECK_BOX_ONLY.indexOf(g.Location),c.shouldDisplay14DayUTA=-1===g.utaConstants.WAIVER_OF_CONSUMER_RIGHTS.indexOf(g.Location),c.isUSOrPR=g.isUS||g.isPR,c.shouldSendOffers=c.isUSOrPR,c.isCn=g.isCN,-1!==c.apacCountries.indexOf(g.Location)&&(c.toggleSendOffers("YES"),c.sendOffers="yes")}function t(a){c.formObj.first_name=a[0],c.formObj.middle_name=a[1],c.formObj.last_name=a[2],g.nameGuesses=a}function u(){return-1===g.utaConstants.UTA_CHECK_BOX_ONLY.indexOf(g.Location)}function v(){if(g.isSignUpFlow)w();else{f.resetUTAGData();var a="doapp_signup_complete",b={event_id:"99",site_area:$.siteArea,site_sub_area:$.subArea,referring_url:$.referringUrl,step:a,page_name:$.pageType+a,page_id:a,completion_event:"5026"};f.triggerUTAGCall(b),g.isMyChoiceFlow?x():(g.isOpenAccountFlow||g.isPickupFlow)&&(-1!==p.WEB_FORM_COUNTRIES.indexOf(g.Location)?window.location="https://www.ups.com/account/int/start?loc="+g.Locale+"&WT.svl=PNRO_L1":z())}}function w(){g.finalFormObj=f.mergeNames(c.formObj),g.prepop&&g.prepop.ShipFrom&&g.prepop.ShipFrom.AddressLine1.length?angular.element(i.GuestShippingConfirmationDiv).scope().toggleGuestShippingConfirmationModal(g.Locale,i.SignUpDiv):angular.element(i.SignupConfirmationDiv).scope().toggleSignupConfirmationModal(g.Locale,i.SignUpDiv)}function x(){g.doa_nonpostal_mychoice_countries?(c.isNonPostalCountry=y(g.doa_nonpostal_mychoice_countries,g.Location),c.isNonPostalCountry?b.isEmailEnrollmentRequest=!0:b.isEmailEnrollmentRequest=!1):c.isNonPostalCountry=!1,c.signUpModalToggle=!1,g.isENUS||g.isENPR?(g.SignUpData.Country=g.Location.toLowerCase(),g.SignUpData.GuessCountry=g.Location.toLowerCase(),angular.element(i.AddressDiv).scope().toggleAddressModal(g.Locale,i.RegularAddressModal,i.SignUpDiv)):(g.SignUpData.GuessCountry=g.Location.toLowerCase(),angular.element(i.AvailabilityDiv).scope().toggleAvailabilityModal(g.Locale,i.SignUpDiv))}function y(a,b){for(var c=0;c<a.length;c++)if(a[c].code.toLowerCase()==b.toLowerCase())return!0;return!1}function z(){c.signUpModalToggle=!1;var a=g.Location.toLowerCase();g.SignUpData.Country=a,g.SignUpData.GuessCountry=a,angular.element(i.AddressDiv).scope().toggleAddressModal(g.Locale,i.RegularAddressModal,i.SignUpDiv)}function A(){e({method:"POST",xsrfCookieName:i.XSRFCookieName,headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(""),url:g.createURL(i.PrepopulateFromSession)}).then(function(a){var d=a.data;if(d&&d.WasSuccessfull)for(var e=d.Object,f=e.length,g=0;g<f;g++){var h=e[g];if("ShipFromEmailAddress"===h.key)c.formObj.email=h.value;else if("ShipFromName"===h.key)c.formObj.fullName=h.value,c.parseName(h.value);else if("SocialLoginProvider"===h.key)c.socialClick(h.value);else if("ReservedRegistrationNumber"===h.key)b.reservedRegistrationNumber=h.value;else if("ReturnTo"===h.key){var i=h.value;if(i)var j=i.split("tracknum=");if(j)var k=j[1].split("&");b.trackingNumber=k[0]}}},function(a){g.errorCallbackReponse=a,g.errorCode="BACK_END_DOWN"})}function B(a){a===i.SignUpMyChoice||a===i.SignUpMyChoicePremium?(s(),g.SignUpData={},x()):a===i.OpenAccount||a===i.Pickup?angular.element(i.ChooseAddressDiv).scope().toggleChooseAddressModal(g.Locale,i.SignUpDiv):g.isAddNotificationFlow&&angular.element(i.ChooseNotificationDiv).scope().toggleModal()}c.init=function(){c.isDev=!$.isProduction,c.treatMatrixUrl=a.trustAsResourceUrl("https://h.online-metrix.net/fp/tags.js?org_id=1lsdhefu&session_id="+g.transactionID+"&pageid="+i.doapp_sign_up),c.termsAndConditionsLink=g.links.utaLink,c.sendOffersCheck=!1,c.shouldSendOffers=!1,c.userIdPopover="userIdPopover.html",c.passwordPopover="passwordPopover.html",c.shouldDisplayErrorList=!1,c.apacCountries=["CN","HK","IN","ID","JP","MO","MY","NZ","PH","SG","KR","TW","TH","VN"],c.emailPattern=b.masterEmailPattern,g.popoverConstants&&(c.doappUserIDHeaderPopover=g.popoverConstants.doappUserIDHeaderPopover,c.doappNoSpacesPopover=g.popoverConstants.doappNoSpacesPopover,c.doappNoEmailPopover=g.popoverConstants.doappNoEmailPopover,c.doappNoSpecialCharsPopover=g.popoverConstants.doappNoSpecialCharsPopover,c.doappPasswordCantContainPopover=g.popoverConstants.doappPasswordCantContainPopover,c.doappPasswordHeaderPopover=g.popoverConstants.doappPasswordHeaderPopover,c.doappLowerCasePopover=g.popoverConstants.doappLowerCasePopover,c.doappUpperCasePopover=g.popoverConstants.doappUpperCasePopover,c.doappOneNumberPopover=g.popoverConstants.doappOneNumberPopover,c.doappSpecialCharPopover=g.popoverConstants.doappSpecialCharPopover),c.isSafari=/constructor/i.test(window.HTMLElement)||function(a){return"[object SafariRemoteNotification]"===a.toString()}(!window.safari||"undefined"!=typeof safari&&safari.pushNotification),c.autocompleteValue=c.isSafari?"on":"off",c.isSocialLogin=!1,c.userIdListSent=!1,c.shouldDisplayShow=!0,g.Registered=!1,g.socialResponse={},c.isLoading=!1;var e=(d.location.href,c.createLassoReturnTo()),h="loc="+g.Locale+"&returnto="+encodeURIComponent(e);c.lassoLink="https://www.ups.com/lasso/login?"+h,s(),g.isNotUniqueEmail=!1,"undefined"!=typeof gigya&&gigya.socialize.addEventHandlers({onLogin:r}),f.resetUTAGData()},c.createLassoReturnTo=function(){if(b.urlParameters&&b.urlParameters.loginReturnTo)return b.urlParameters.loginReturnTo;if(b.urlParameters&&b.urlParameters.returnTo)return b.urlParameters.returnTo;if(g.isModalFlow)return"https://www.ups.com/Home.page";if(g.isMyChoiceFlow)return"https://www.ups.com/doapp/signupmychoice?loc="+g.Locale;if(g.isOpenAccountFlow){var a="https://www.ups.com/doapp/signupopenaccount?loc="+g.Locale;return b.promoCode?a+"&promoCode="+b.promoCode:a}return"https://www.ups.com/Home.page"},c.socialClick=function(a){if("undefined"!=typeof gigya){var b={provider:a};gigya.socialize.login(b)}},c.populateGigyaObject=function(a){c.isSocialLogin=!0;var b=a.nickname.replace(/[\s]/g,"");g.socialResponse.UserName=b.length>16?b.substring(0,16):b,g.socialResponse.UserUID=a.UID,g.socialResponse.EmailAddress=a.email,g.socialResponse.ProviderUID=a.loginProviderUID,g.socialResponse.ProviderName=a.loginProvider,g.socialResponse.EmailVerified=a.isVerified;var d=a.firstName+" "+a.lastName;if(d&&(c.formObj.fullName=d,c.parseName(d)),g.socialResponse.EmailAddress&&(c.formObj.email=g.socialResponse.EmailAddress),g.socialResponse.UserName){c.formObj.userId=g.socialResponse.UserName,c.ups_signupform.user_id_input=g.socialResponse.UserName;var e={target:{value:g.socialResponse.UserName}};c.useridCheck(e),c.userIdSuggestions()}},c.getIsUniqueEmail=function(){c.userIdListSent=!1,c.formObj.email&&e({method:"POST",xsrfCookieName:i.XSRFCookieName,data:JSON.stringify(c.formObj.email),url:g.createURL(i.UniqueEmailCheck)}).then(function(a){var b=a.data;b&&b.WasSuccessfull?(c.shouldDisplayListEmail=!b.Object,g.isNotUniqueEmail=c.shouldDisplayListEmail):(c.shouldDisplayListEmail=!1,b.Object&&(c.errorList=h.createErrorList(b.Object)))},function(a){g.errorCallbackReponse=a,g.errorCode="BACK_END_DOWN"})},c.updateTNC=function(){c.clicked=!1},c.sendListOfUserIds=function(){var a=[c.formObj.email,g.Locale];e({method:"POST",xsrfCookieName:i.XSRFCookieName,data:JSON.stringify(a),url:g.createURL(i.SendIDs)}).then(function(a){c.userIdListSent=!0;var b=a.data;b&&b.WasSuccessfull?c.wasIDEmailSent=!0:(c.wasIDEmailSent=!1,b.Object&&(c.errorList=h.createErrorList(b.Object)))},function(a){g.errorCallbackReponse=a,g.errorCode="BACK_END_DOWN"})},c.submitForm=function(a,b){c.clicked=!0,c.shouldDisplayErrorList=!1,a?(c.parseName(c.formObj.fullName),g.SignUpData=c.collectData(),g.formObj=c.formObj,u()?angular.element(i.UTADiv).scope().toggleUTAModal(g.Locale,i.SignUpDiv):c.continueToRegister()):(angular.forEach(b.$error.required,function(a){a.$setDirty()}),c.shouldDisplayErrorList=!0,c.errorList=h.errorList)},c.parseName=function(a){if(a){var b,c,d=o.defer();return b=a.split(" "),2===b.length?(c=[b[0],"",b[1]],t(c)):1===b.length?(c=[b[0],"",""],t(c)):0===b.length?(c=["","",""],t(c)):(c=[b[0],b[1],b[2]],t(c)),d.resolve(),d.promise}},c.trimEmail=function(a){c.formObj.email=a.email_input.$viewValue.replace(/ /g,"")},c.submitFormFromUTA=function(a){a&&c.continueToRegister()},c.continueToRegister=function(){c.isLoading||(c.isLoading=!0,e({method:"POST",xsrfCookieName:i.XSRFCookieName,data:JSON.stringify(g.SignUpData),url:g.createURL(i.Register)}).then(function(a){c.isLoading=!1;var b=a.data;b&&b.WasSuccessfull?(g.Registered=!0,g.RegistrationData=b.Object,g.isSocialLogin=c.isSocialLogin,g.prepop=g.RegistrationData.prepop,v()):b.Object&&(c.errorList=h.createErrorList(b.Object),"9610127"===b.Object&&(c.isSocialLogin=!1,c.isFailedSocialLogin=!0),"9610045"===b.Object?c.userIDExists=!0:c.userIDExists=!1)},function(a){g.errorCallbackReponse=a,g.errorCode="BACK_END_DOWN",c.isLoading=!1}))},c.toggleSendOffers=function(a){c.sendOffersCheck=!0,c.shouldSendOffers="YES"===a},c.collectData=function(){var a="";return b.urlParameters&&b.urlParameters.clientId&&(a=b.urlParameters.clientId),{FullName:c.formObj.fullName,Email:c.formObj.email,UserID:c.formObj.userId,FirstName:c.formObj.first_name,MiddleName:c.formObj.middle_name,LastName:c.formObj.last_name,Suffix:c.formObj.name_suffix,Password:c.formObj.password,TermsAccepted:c.formObj.tnc,EmailCommunications:c.shouldSendOffers?["01","02","03","04"]:[],Locale:g.Locale,TransactionID:g.transactionID,SocialResponse:g.socialResponse,iobb:document.getElementById("iobb")?document.getElementById("iobb").value:"",ReservedRegistrationNumber:b.reservedRegistrationNumber,ClientId:a}},c.userIdSuggestions=function(){c.noEmail&&c.noSpace&&c.noSpecialChar&&c.correctAsciiChars?e({method:"POST",xsrfCookieName:i.XSRFCookieName,data:JSON.stringify(c.formObj.userId),url:g.createURL(i.UniqueIDCheck)}).then(function(a){var b=a.data;b&&b.WasSuccessfull?(b.Object.IsAvailable?(c.userIDSuggestions="",c.userIDIsValid=!0):b.Object.UserIds?(c.userIDSuggestions=b.Object.UserIds,c.userIDIsValid=!1):c.userIDIsValid=!1,c.userIDChecked=!0):b.Object&&"9610000"===b.Object&&(c.userIDSuggestions="",c.userIDIsValid=!0)},function(a){g.errorCallbackReponse=a,g.errorCode="BACK_END_DOWN"}):(c.userIDIsValid=!1,c.ups_signupform.user_id_input.$viewValue?c.userIdHasValue=!0:c.userIdHasValue=!1)},c.userIdChanged=function(){void 0!==c.formObj.userId&&(c.userIDIsValid=!0,c.userIDSuggestions=void 0)},c.toggleModal=function(){s(),A(),e({method:"POST",xsrfCookieName:i.XSRFCookieName,url:g.createURL(i.LoggedInCheck)}).then(function(a){var b=a.data;if(b&&g.isSignUpFlow){var d=g.Locale?g.Locale.toLowerCase().split("_"):"en_us".split();window.location="https://www.ups.com/"+d[1]+"/"+d[0]+"/Home.page"}else b&&!g.isSignUpFlow?g.isOpenAccountFlow&&-1!==p.WEB_FORM_COUNTRIES.indexOf(g.Location)?window.location="https://www.ups.com/account/int/start?loc="+g.Locale+"&WT.svl=PNRO_L1":f.createPrepopInfo().then(function(){g.prepopData.ErrorCode?(c.errorList=h.createErrorList(g.prepopData.ErrorCode),B(g.entryPoint)):c.parseName(g.prepopData.ContactName).then(function(){g.myEmail=g.prepopData.EmailAddress,B(g.entryPoint)})}):g.isAddNotificationFlow?angular.element(i.ChooseNotificationDiv).scope().toggleModal():g.isPickupFlow?angular.element(i.ChooseAddressDiv).scope().toggleChooseAddressModal(g.Locale,i.SignUpDiv):l.changeScreen(i.InitStart,i.SignUpDiv,g.isModalFlow)})},c.offerscheckBox=function(a,b){if(!0===a&&13===b){c.offerscheckBoxvalue=!0;for(var d in c.formObj.email_offers)c.formObj.email_offers[d]=!0}else c.offerscheckBoxvalue=!1},c.useridCheck=function(a){var b=a.target.value;/^[^@]*$/.test(b)?c.noEmail=!0:c.noEmail=!1,/^\s*\S+\s*$/.test(b)?c.noSpace=!0:c.noSpace=!1,/^[^\/\\:;<>"%&]*$/.test(b)?c.noSpecialChar=!0:c.noSpecialChar=!1,/[^\u0000-\u007f]/.test(b)?(c.correctAsciiChars=!1,c.shouldDisplayAsciiError=!0):(c.correctAsciiChars=!0,c.shouldDisplayAsciiError=!1)},c.useridCheckRegEx=new RegExp(/^[^\/\\:;<>@"%& ]*$/),c.passwordValidation=function(a){if(a.password_input){var b=a.password_input.$viewValue;void 0!==b&&(c.dynamicPasswordDisplay(a),b.length<7||b.length>26||c.count<3||c.check?a.password_input.$setValidity("valid",!1):a.password_input.$setValidity("valid",!0))}},c.dynamicPasswordDisplay=function(a){var b=a.password_input.$viewValue;b&&(c.count=0,/[0-9]/.test(b)?(c.number=!0,c.count++):c.number=!1,/[a-z]/.test(b)?(c.lowercase=!0,c.count++):c.lowercase=!1,/[A-Z]/.test(b)?(c.uppercase=!0,c.count++):c.uppercase=!1,/[!@#\$%\^&\*\(\)\+\-\|~=`\{\}\[\]:;"'<>\?\.\/,\\]/.test(b)?(c.special=!0,c.count++):c.special=!1,b=b.toLowerCase(),(void 0===c.formObj.first_name||""===c.formObj.first_name||-1===b.indexOf(c.formObj.first_name.toLowerCase())&&-1===c.formObj.first_name.toLowerCase().indexOf(b))&&(void 0===c.formObj.email||""===c.formObj.email||-1===b.indexOf(c.formObj.email.toLowerCase())&&-1===c.formObj.email.toLowerCase().indexOf(b))&&(void 0===c.formObj.last_name||""===c.formObj.last_name||-1===b.indexOf(c.formObj.last_name.toLowerCase())&&-1===c.formObj.last_name.toLowerCase().indexOf(b))&&(void 0===c.formObj.userId||""===c.formObj.userId||-1===b.indexOf(c.formObj.userId.toLowerCase())&&-1===c.formObj.userId.toLowerCase().indexOf(b))&&(!c.formObj.fullName||-1===b.indexOf(c.formObj.fullName.toLowerCase())&&-1===c.formObj.fullName.toLowerCase().indexOf(b))?c.check=!1:c.check=!0,c.check=c.check&&b.length>=7)},c.showHide=function(a){var b=$(a.currentTarget);"password"===b.parent().find("input").prop("type")?(b.parent().find("input[type=password]").prop("type","text"),c.shouldDisplayShow=!1):(b.parent().find("input[type=text]").prop("type","password"),c.shouldDisplayShow=!0)},c.init()}]),angular.module("upsDOApp.controllers").controller("DOAPP.TimeoutCtrl",["$scope","doappService","$http","doappConstants",function(a,b,c,d){a.submitURL="https://www.ups.com/lasso/login?loc="+b.Locale,c({method:"POST",url:b.createURL(d.LoggedInCheck)}).then(function(a){if(a.data){var c=b.Locale?b.Locale.toLowerCase().split("_"):"en_us".split();window.location="https://www.ups.com/"+c[1]+"/"+c[0]+"/Home.page"}})}]),angular.module("upsDOApp.controllers").controller("DOAPP.MyAvailabilityCtrl",["$rootScope","$scope","$http","doappUtilService","doappService","doappConstants","doappScreenChanger","doappErrorHandler",function(a,b,c,d,e,f,g,h){function i(){b.countryList=e.countryListArray,b.selectedcountryfromlocale=e.Location,b.clicked=!1,$("#IdErrorMessage").html(""),e.MCcountryListArray=[],j(),d.resetUTAGData(),b.displayPostalCodeField=!0}function j(){var a={Locale:e.Locale};c({method:"POST",xsrfCookieName:f.XSRFCookieName,data:JSON.stringify(a),url:e.createURL("/doapp/MYC/GetAvailableMCCountries/")}).then(function(a){var c=a.data,d=c.Object;if(c&&c.WasSuccessfull){var f=d.AvailableCountry;b.selectedcountryfromlocale=e.Location,k(b.selectedcountryfromlocale),angular.forEach(e.countryListArray,function(a,c){b.testKey1=c,angular.forEach(f,function(c,d){if(b.testKey2=d,a.code===c){var f={code:a.code,country:a.country};e.MCcountryListArray.push(f)}})}),b.countryList=e.MCcountryListArray}else e.errordescription=d.ErrorDescription,e.errorCode=d.ErrorCode},function(a){e.errorCallbackReponse=a,e.errorCode="BACK_END_DOWN"})}function k(a){e.doa_nonpostal_mychoice_countries&&(b.isNonPostalCountry=q(e.doa_nonpostal_mychoice_countries,a),b.isNonPostalCountry?b.displayPostalCodeField=!1:b.displayPostalCodeField=!0)}function l(){b.notAvailable=!1,b.checkObj={country:e.Location,postalcode:""}}function m(){var d=b.checkObj.country,g=b.checkObj.postalcode;if(b.displayPostalCodeField){if(n(d,g)){var i=o(d,g);c({method:"POST",xsrfCookieName:f.XSRFCookieName,data:JSON.stringify(i),url:e.createURL(f.CheckNonUsMyChoice)}).then(function(a){var c=a.data;if(c&&c.WasSuccessfull)p(c);else if(c.Object){for(var d=h.createErrorList(c.Object),e=0;e<d.length;e++)var f=d[e],g=f.ErrorMessage;if("9651016"===c.Object){var i=h.createErrorList(c.Object)[0].ErrorMessage||g;$("#IdErrorMessage").html(i),b.errorList=[]}else b.errorList=d,$("#IdErrorMessage").html("")}},function(a){e.errorCallbackReponse=a,e.errorCode="BACK_END_DOWN"})}}else e.SignUpData.Country=b.checkObj.country,a.isEmailEnrollmentRequest=!0,angular.element(f.AddressDiv).scope().toggleAddressModal(e.Locale,f.RegularAddressModal,f.AvailabilityDiv)}function n(a,b){return" "!==a&&" "!==b&&void 0!==a&&void 0!==b&&""!==b}function o(a,b){return{AddressCheck:{Country:a,PostalCode:b},MYCUserProfile:{FirstName:e.SignUpData.FirstName,MiddleName:e.SignUpData.MiddleName,LastName:e.SignUpData.LastName,Suffix:e.SignUpData.Suffix,EmailAddress:e.SignUpData.Email},Locale:e.Locale}}function p(b){e.SignUpData.Country=b.Object.Country,e.SignUpData.PostalCode=b.Object.PostalCode,a.isEmailEnrollmentRequest=b.Object.isEmailEnrollmentRequest,angular.element(f.AddressDiv).scope().toggleAddressModal(e.Locale,f.RegularAddressModal,f.AvailabilityDiv)}function q(a,b){for(var c=0;c<a.length;c++)if(a[c].code.toLowerCase()==b.toLowerCase())return!0;return!1}i(),b.toggleAvailabilityModal=function(a,b){l(),g.changeScreen(b,f.AvailabilityDiv,e.isModalFlow)},b.checkPostalCode=function(){m()},b.checkAvailability=function(a,c){b.clicked=!0,b.errorList="",a?(b.clicked=!1,m()):angular.forEach(c.$error.required,function(a){a.$setDirty()})},b.availabilityGoBack=function(){e.isMyChoiceFlow&&angular.element(f.SignUpDiv).scope().toggleModal(e.Locale)},b.changedPostalCode=function(a){b.checkObj.postalcode="",b.notAvailable=!1,k(a)}}]),
angular.module("upsDOApp.controllers").controller("DOAPP.UTACtrl",["$scope","$window","$http","doappUtilService","doappService","doappErrorHandler","doappConstants","doappScreenChanger","PREPEND_STRING","UTA_CONSTANTS","WEB_FORM_CONSTANTS",function(a,b,c,d,e,f,g,h,i,j,k){function l(){a.shouldDisplayError=!1,a.shouldDisplay14DayUTA=-1===j.WAIVER_OF_CONSUMER_RIGHTS.indexOf(e.Location),a.utaCheckBoxOnly=-1!==j.UTA_CHECK_BOX_ONLY.indexOf(e.Location),a.utaOptionalScroll=-1!==j.UTA_OPTIONAL_SCROLL.indexOf(e.Location),a.utaRequiredScroll=!a.utaOptionalScroll,a.utaCheckboxDisabled=a.utaRequiredScroll,a.meetsScrollRequirements=!!a.utaOptionalScroll,a.termsAndConditionsLink=e.links.utaLink,d.resetUTAGData()}function m(){a.isLoading=!0,e.SignUpData.TermsAccepted="true",c({method:"POST",xsrfCookieName:g.XSRFCookieName,data:JSON.stringify(e.SignUpData),url:e.createURL(g.Register)}).then(function(b){a.isLoading=!1;var c=b.data;c&&!0===c.WasSuccessfull?(e.Registered=!0,e.RegistrationData=c.Object,n()):c.Object&&(a.errorList=f.createErrorList(c.Object))},function(b){e.errorCallbackReponse=b,e.errorCode="BACK_END_DOWN",a.isLoading=!1})}function n(){e.isSignUpFlow?o():e.isMyChoiceFlow?p():(e.isOpenAccountFlow||e.isPickupFlow)&&(-1!==k.WEB_FORM_COUNTRIES.indexOf(e.Location)?window.location="https://www.ups.com/account/int/start?loc="+e.Locale+"&WT.svl=PNRO_L1":q())}function o(){e.finalFormObj=d.mergeNames(e.formObj),e.isNotUniqueEmail=e.RegistrationData.IsNonUniqueEmail,angular.element(g.SignupConfirmationDiv).scope().toggleSignupConfirmationModal(e.Locale,g.UTADiv)}function p(){e.isENUS||e.isENPR?(e.SignUpData.Country=e.Location.toLowerCase(),e.SignUpData.GuessCountry=e.Location.toLowerCase(),angular.element(g.AddressDiv).scope().toggleAddressModal(e.Locale,g.RegularAddressModal,g.SignUpDiv)):(e.SignUpData.GuessCountry=e.Location.toLowerCase(),angular.element(g.AvailabilityDiv).scope().toggleAvailabilityModal(e.Locale,g.UTADiv))}function q(){var a=e.Location.toLowerCase();e.SignUpData.Country=a,e.SignUpData.GuessCountry=a,angular.element(g.AddressDiv).scope().toggleAddressModal(e.Locale,g.RegularAddressModal,g.SignUpDiv)}a.toggleUTAModal=function(a,b){l(),h.changeScreen(b,g.UTADiv,e.isModalFlow)},a.submitFormFromUTA=function(b){b?m():a.shouldDisplayError=!0},a.updateScrollability=function(b){a.shouldDisplayError=!1,void 0===b&&isAtUTABottom(),a.utaOptionalScroll||(b?(a.meetsScrollRequirements=!0,a.utaCheckboxDisabled=!1):(a.meetsScrollRequirements=!1,a.utaCheckboxDisabled=!0),a.$apply())},a.openTermsAndConditions=function(){b.open(a.signupDefault.tnc,"UPS Terms and Conditions","width=500,height=400")}}]),angular.module("upsDOApp.controllers").controller("DOAPP.AcceptMyChoiceCtrl",["$scope","$http","doappService","doappConstants","doappScreenChanger","$timeout","$rootScope","doappErrorHandler","doappUtilService",function(a,b,c,d,e,f,g,h,i){function j(){a.myTermFormObj={},a.myChoiceTermsLink=c.links.mychoiceTermsLink,e.changeScreen(d.InitStart,d.AcceptMyChoiceTermsDiv,c.isModalFlow),i.resetUTAGData()}a.submitMyChoiceTerms=function(){a.myTermFormObj.terms_conditions&&b({method:"POST",xsrfCookieName:d.XSRFCookieName,url:c.createURL(d.AcceptMyChoiceTerms)}).then(function(b){var c=b.data;c&&c.WasSuccessfull?g.isClosing=!0:c.Object&&(a.errorList=h.createErrorList(c.Object))})},f(function(){j()})}]),angular.module("upsDOApp.controllers").controller("DOAPP.MyChoiceConfirmationCtrller",["$scope","$location","$http","doappUtilService","doappService","doappConstants","doappScreenChanger",function(a,b,c,d,e,f,g){function h(){i(),d.resetUTAGData()}function i(){function b(){return{Locale:e.Locale,TransactionID:e.transactionID}}e.mycData=b(),c({method:"POST",url:e.createURL("/doapp/MYC/SaveMCAddress/")}).then(function(b){var c=b.data;if(c&&c.WasSuccessfull){"success"==c.Object&&($rootScope.isEmailEnrollmentRequest&&$rootScope.isEmailEnrollmentRequest?a.displayFreeAlertMessageForExpansionCountrie=!0:a.displayFreeAlertMessageForCurrent16=!0,g.changeScreen(f.InitStart,f.MyChoiceConfirmationDiv,e.isModalFlow))}},function(a){e.errorCallbackReponse=a,e.errorCode="BACK_END_DOWN"})}a.firstName=e.SignUpData.FirstName,a.emailAddress=e.SignUpData.Email,a.displayFreeAlertMessageForCurrent16=!0,a.displayFreeAlertMessageForExpansionCountrie=!1,h()}]);


